
var int XarKnowHLH;

func void xardas_firstlock()
{
	Wld_InsertNpc(Ghost,"NW_CASTLEMINE_GHOST_01");
	Wld_InsertNpc(Ghost,"NW_TROLLAREA_TROLLROCKCAVE_02");
	Wld_InsertNpc(Ghost,"NW_FARM2_TAVERNCAVE1_02");
	Wld_InsertNpc(Ghost,"NW_RITUALFOREST_CAVE_05");
	Wld_InsertNpc(Troll_Rug,"NW_BROTHERTROLL");
	Wld_InsertNpc(Troll_Trag,"NW_BROTHERTROLL");
	Wld_InsertNpc(Troll_Brog,"NW_BROTHERTROLL");
	Wld_InsertNpc(Firewaran_Uniq,"FP_ROAM_NW_TROLLAREA_RUINS_29");
	Wld_InsertNpc(gobbo_mage_gr4,"NW_FARM1_CITYWALL_FOREST_15");
	Wld_InsertNpc(gobbo_mage_gr5,"NW_FARM1_CITYWALL_FOREST_16");
	Wld_InsertNpc(BDT_1000_Bandit_L,"NW_FARM1_BANDITS_CAVE_06");
	Wld_InsertNpc(Keiler,"FP_ROAM_XARDAS_SECRET_23");
	Wld_InsertNpc(Waran,"FP_ROAM_XARDAS_SECRET_08");
	Wld_InsertNpc(Waran,"FP_ROAM_XARDAS_SECRET_15");
	Wld_InsertNpc(Waran,"FP_ROAM_XARDAS_SECRET_04");
	Wld_InsertNpc(gobbo_green1,"NW_XARDAS_TOWER_WATERFALL_CAVE_ENTRANCE_05");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_04");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_06");
	Wld_InsertNpc(YGiant_Rat,"NW_XARDAS_TOWER_SECRET_CAVE_01");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_01");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_01");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_04");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_04");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_FELDREUBER4");
	Wld_InsertNpc(Giant_Bug,"FP_ROAM_MONSTERMILL_11");
	Wld_InsertNpc(Giant_Bug,"NW_BIGMILL_FIELD_MONSTER_01");
	Wld_InsertNpc(Giant_Bug,"NW_BIGMILL_FIELD_MONSTER_02");
	Wld_InsertNpc(Wolf,"NW_TAVERNE_TROLLAREA_MONSTER_04_01");
	Wld_InsertNpc(Gobbo_Green,"NW_TAVERNE_TROLLAREA_MONSTER_05_01");
	Wld_InsertNpc(Warg,"NW_FARM4_WOOD_MONSTER_01");
	Wld_InsertNpc(Warg,"NW_FARM4_WOOD_MONSTER_01");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_MONSTER_02");
	Wld_InsertNpc(Wolf,"NW_FARM4_WOOD_MONSTER_03");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_MONSTER_06");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_MONSTER_07");
	Wld_InsertNpc(Skeleton,"FP_ROAM_CASTLEMINE2_02");
	Wld_InsertNpc(Skeleton,"FP_ROAM_CASTLEMINE2_03");
	Wld_InsertNpc(Skeleton,"FP_ROAM_CASTLEMINE2_06");
	Wld_InsertNpc(Zombie02,"FP_ROAM_CASTLEMINE2_10");
	Wld_InsertNpc(Zombie04,"FP_ROAM_CASTLEMINE2_12");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_NW_BIGFARMFORESTCAVE_03");
	Wld_InsertNpc(Gobbo_Green,"FP_ROAM_BIGFARM_LAKE_CAVE_10");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_BIGFARM_LAKE_CAVE_11");
	Wld_InsertNpc(Gobbo_Green,"FP_ROAM_NW_BIGFARMFORESTCAVE_07");
	Wld_InsertNpc(gobbo_mage,"FP_ROAM_NW_BIGFARMFORESTCAVE_08");
	Wld_InsertNpc(Gobbo_Green,"FP_ROAM_BIGFARM_LAKE_CAVE_05");
	Wld_InsertNpc(Wolf, " NW_SAGITTA_MOREMONSTER_01 " );
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_NEARPEASANT7");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_NEARPEASANT2_14");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_NEARPEASANT2_8");
	Wld_InsertNpc(Scavenger,"NW_FARM4_WOOD_NEARPEASANT2_7");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_NEARPEASANT2_12");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_FARM4_WOOD_MONSTER_MORE_02");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_MONSTER_N_3");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_MONSTER_N_2");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_CRYPT_MONSTER08");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_CRYPT_MONSTER02");
	Wld_InsertNpc(Lesser_Skeleton,"NW_CRYPT_MONSTER04");
	Wld_InsertNpc(Lesser_Skeleton,"NW_CRYPT_MONSTER06");
	Wld_InsertNpc(Boar, " NW_FARM4_WOOD_NAVIGATION_09 " );
	Wld_InsertNpc(Wolf,"NW_CASTLEMINE_TROLL_05");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_ALLEE_08_N_2");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_ALLEE_08_N_5");
	Wld_InsertNpc(Scavenger,"NW_FARM3_BIGWOOD_02");
	Wld_InsertNpc(Lurker,"NW_FARM3_PATH_11_SMALLRIVER_02");
	Wld_InsertNpc(Scavenger,"NW_FARM3_PATH_11_SMALLRIVER_10");
	Wld_InsertNpc(Lurker,"NW_FARM3_PATH_11_SMALLRIVER_17");
	Wld_InsertNpc(Lurker,"NW_FARM3_PATH_11_SMALLRIVERMID_03");
	Wld_InsertNpc(Boar, " NW_FARM3_PATH_12_MONSTER_01 " );
	Wld_InsertNpc(Lurker,"NW_FARM3_MOUNTAINLAKE_MONSTER_01");
	Wld_InsertNpc(Keiler,"NW_BIGFARM_LAKE_03_MOVEMENT");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_LAKE_03_MOVEMENT3");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_BIGFARM_LAKE_03_MOVEMENT5");
	Wld_InsertNpc(Wolf,"NW_TAVERNE_TROLLAREA_MONSTER_02_01");
	Wld_InsertNpc(BDT_1065_Bandit_L,"NW_CASTLEMINE_HUT_01");
	Wld_InsertNpc(BDT_1066_Bandit_L,"NW_CASTLEMINE_HUT_01");
	Wld_InsertNpc(BDT_1067_Bandit_L,"NW_CASTLEMINE_HUT_01");
	Wld_InsertNpc(BDT_10313_Addon_RangerBandit_L,"NW_FARM4_WOOD_RANGERBANDITS_04");
	Wld_InsertNpc(BDT_10310_Addon_RangerBandit_M,"NW_BIGMILL_FARM3_RANGERBANDITS_04");
	Wld_InsertNpc(Warg,"NW_PASS_06");
	Wld_InsertNpc(orcdog,"NW_PASS_11");
	Wld_InsertNpc(Snapper,"NW_PASS_SECRET_16");
	Wld_InsertNpc(Gobbo_Green,"NW_PASS_GRAT_05");
	Wld_InsertNpc(skeleton_warrior,"FP_ROAM_MEDIUMFOREST_KAP3_05");
	Wld_InsertNpc(Zombie02,"FP_ROAM_MEDIUMFOREST_KAP3_02");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_09");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_11");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_28");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_29");
	Wld_InsertNpc(Giant_Bug,"FP_ROAM_CITYFOREST_KAP3_28");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_CITYFOREST_KAP3_06");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_10");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_11");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_12");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_14");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_15");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_FARM2_TO_TAVERN_09_MONSTER2");
	Wld_InsertNpc(Giant_Bug,"NW_FARM2_TO_TAVERN_09_MONSTER3");
	Wld_InsertNpc(Keiler,"NW_FOREST_PATH_79");
	Wld_InsertNpc(Keiler,"NW_FOREST_PATH_80_1");
	Wld_InsertNpc(Waran,"NW_FOREST_PATH_82");
	Wld_InsertNpc(Waran,"NW_FOREST_PATH_82_M");
	Wld_InsertNpc(Wolf,"NW_FOREST_PATH_66_M");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_FOREST_PATH_62_M");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_80_1_MOVEMENT8_M");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_80_1_MOVEMENTF");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_31_NAVIGATION3");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_31_NAVIGATION10");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT6");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT15");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT15");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_NAVIGATION16");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_NAVIGATION16");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT8_M3");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_04_16_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_04_16_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_04_16_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_04_4");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_NAVIGATION_M");
	Wld_InsertNpc(orcwarrior2,"NW_FOREST_PATH_31_NAVIGATION19");
	Wld_InsertNpc(orcdog,"NW_FOREST_PATH_18_MONSTER");
	Wld_InsertNpc(orcdog,"NW_FOREST_PATH_72_MONSTER23");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_66_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_66_MONSTER");
	Wld_InsertNpc(Keiler,"NW_FOREST_PATH_04_14_MONSTER");
	Wld_InsertNpc(Molerat,"NW_CITY_SMFOREST_03_M");
	Wld_InsertNpc(Minecrawler,"NW_MAGECAVE_27");
	Wld_InsertNpc(gobbo_mage,"NW_TROLLAREA_PATH_56");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_NW_TROLLAREA_RUINS_CAVE_03");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_NW_TROLLAREA_RUINS_CAVE_05");
	Wld_InsertNpc(Giant_Rat,"NW_TROLLAREA_PORTALTEMPEL_08");
	Wld_InsertNpc(Giant_Rat,"NW_TROLLAREA_PORTALTEMPEL_06");
	Wld_InsertNpc(Wolf,"NW_TROLLAREA_PATH_66_MONSTER");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_07");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PATH_71_MONSTER2");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PATH_15_MONSTER");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_RITUALPATH_04");
	Wld_InsertNpc(Skeleton,"NW_TROLLAREA_TROLLROCKCAVE_03");
	Wld_InsertNpc(Skeleton_Lord,"NW_TROLLAREA_TROLLROCKCAVE_07");
	Wld_InsertNpc(Gobbo_Black,"NW_TROLLAREA_TROLLLAKECAVE_08");
	Wld_InsertNpc(Gobbo_Green,"NW_TROLLAREA_TROLLLAKECAVE_08");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_06");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_04");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_11");
	Wld_InsertNpc(Lurker,"NW_TROLLAREA_PATH_72");
	Wld_InsertNpc(Waran,"NW_TROLLAREA_PATH_22_MONSTER");
	Wld_InsertNpc(Wolf,"NW_SHRINE_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_PATH_TO_MONASTER_AREA_01");
	Wld_InsertNpc(Gobbo_Green,"NW_BIGFARM_LAKE_MONSTER_05_01");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_MONSTER_N_1_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_TAVERNE_TROLLAREA_MONSTER_05_01M1");
	Wld_InsertNpc(Snapper,"NW_TROLLAREA_RUINS_36");
	Wld_InsertNpc(Zombie01,"NW_FARM4_WOOD_MONSTER_MORE_02");
	Wld_InsertNpc(skeleton_warrior,"NW_FARM4_WOOD_MONSTER_MORE_01");
	Wld_InsertNpc(Snapper,"NW_FARM4_WOOD_MONSTER_05");
	Wld_InsertNpc(Snapper,"NW_CASTLEMINE_TROLL_02");
	Wld_InsertNpc(Snapper,"NW_FARM3_PATH_11_SMALLRIVER_10");
	Wld_InsertNpc(Snapper,"NW_FARM3_BIGWOOD_03_C");
	Wld_InsertNpc(xardas_skeleton_guard_03,"NW_XARDAS_TOWER_IN1_19");
	Wld_InsertNpc(xardas_skeleton_guard_03,"NW_XARDAS_TOWER_IN1_22");
	Wld_InsertNpc(xardas_skeleton_guard_03,"NW_XARDAS_TOWER_IN1_23");
	Wld_InsertNpc(skeleton_dark,"NW_CITY_SMFOREST_BANDIT_04");
	Wld_InsertNpc(skeleton_dark,"NW_CRYPT_IN_03");
	Wld_InsertNpc(skeleton_dark,"NW_CRYPT_IN_01");
	Wld_InsertNpc(XARDAS_SKELETON_GUARD_05,"NW_XARDAS_TOWER_IN1_01");
	Wld_InsertNpc(skeleton_dark,"NW_TROLLAREA_TROLLROCKCAVE_08");
	Wld_InsertNpc(skeleton_dark,"NW_TROLLAREA_TROLLROCKCAVE_07");
	Wld_InsertNpc(Shadowbeast,"NW_FOREST_VINOSKELLEREL_01");
	Wld_InsertNpc(zombie_mod,"NW_CRYPT_IN_03");
	Wld_InsertNpc(zombie_mod,"NW_CRYPT_IN_03");
	Wld_InsertNpc(skeleton_dark,"NW_CRYPT_IN_03");
	Wld_InsertNpc(SkeletonMage,"NW_CRYPT_IN_03");
	Wld_InsertNpc(Giant_Rat,"NW_CITY_KANAL_01");
	Wld_InsertNpc(Shadowbeast,"NW_FOREST_PATH_62_ORNA");
	Wld_InsertNpc(SkeletonMage,"NW_FOREST_VINOSKELLEREL_01");
	Wld_InsertNpc(WoodGolem,"NW_TROLLAREA_RITUALPATH_01");
	Wld_InsertNpc(Skeleton,"NW_TROLLAREA_RUINS_28");
	Wld_InsertNpc(Shadowbeast,"FP_MAGICGOLEM");
	Wld_InsertNpc(bloodfly1,"FP_MAGICGOLEM");
	Wld_InsertNpc(bloodfly1,"FP_MAGICGOLEM");
	Wld_InsertNpc(bloodfly1,"FP_MAGICGOLEM");
	Wld_InsertNpc(Skeleton,"NW_FARM_WOOD_MPNSTER_MIRE_01");
	Wld_InsertNpc(zombie_mod,"NW_FARM_WOOD_MPNSTER_MIRE_01");
	Wld_InsertNpc(Skeleton,"NW_FARM_WOOD_MPNSTER_MIRE_01");
	Wld_InsertNpc(SkeletonMage,"NW_CRYPT_MONSTER08");
	Wld_InsertNpc(Skeleton,"NW_BIGMILL_MALAKSVERSTECK_02");
	Wld_InsertNpc(Skeleton,"NW_FARM2_TO_TAVERNCAVE1_02");
	Wld_InsertNpc(Skeleton,"NW_FARM2_TO_TAVERNCAVE1_03");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_TOWER_VALLEY_06_C");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_TOWER_VALLEY_06_B");
	Wld_InsertNpc(bloodfly1,"NW_FARM1_CONNECT_XARDAS");
	Wld_InsertNpc(Scavenger,"NW_FARM1_PATH_SPAWN_03");
	Wld_InsertNpc(SkeletonMage,"FP_ROAM_RITUALFOREST_CAVE_02");
	Wld_InsertNpc(Skeleton,"FP_ROAM_RITUALFOREST_CAVE_01");
	Wld_InsertNpc(Skeleton,"FP_ROAM_RITUALFOREST_CAVE_06");
	Wld_InsertNpc(Snapper,"FP_CAMPFIRE_NW_ATC_ORC_48");
	Wld_InsertNpc(Snapper,"FP_CAMPFIRE_NW_ATC_ORC_48");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_TROLLAREA_RUINS_32");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_TROLLAREA_RUINS_32");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_TROLLAREA_BRIDGE_05_04");
	Wld_InsertNpc(Shadowbeast,"FP_ROAM_NW_TROLLAREA_RIVERSIDECAVE_07_02");
	Wld_InsertNpc(Warg,"FP_ROAM_NW_TROLLAREA_RIVERSIDECAVE_01_02");
	Wld_InsertNpc(SkeletonMage,"EVT_CRYPT_ROOM_FINAL_SPAWN_04");
	Wld_InsertNpc(scavenger_old,"FP_ROAM_NW_TROLLAREA_PLANE_11_01");
	Wld_InsertNpc(scavenger_old,"FP_ROAM_NW_TROLLAREA_PLANE_11_01");
	Wld_InsertNpc(SkeletonMage,"EVT_CRYPT_ROOM_FINAL_SPAWN_03");
	Wld_InsertNpc(SkeletonMage,"EVT_CRYPT_ROOM_FINAL_SPAWN_05");
	Wld_InsertNpc(Troll,"FP_ROAM_CASTLEMILL_TROLL_05");
	Wld_InsertNpc(zombie_mod,"FP_GREATPEASANT_STPLATE_05");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_FARMS_PATH_11_SMALLRIVER_23");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_FARMS_PATH_11_SMALLRIVER_23");
	Wld_InsertNpc(Warg,"FP_ROAM_PASS_WOLF_12");
	Wld_InsertNpc(Snapper,"FP_STAND_NW_ATC_DJG_04");
	Wld_InsertNpc(Warg,"FP_START_NW_ABANDONEMINE_OW");
};

instance DIA_Xardas_FirstEXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_FirstEXIT_Condition;
	information = DIA_Xardas_FirstEXIT_Info;
	permanent = FALSE;
	description = " I'm leaving immediately! " ;
};

func int DIA_Xardas_FirstEXIT_Condition()
{
	if ( Npc_KnowsInfo ( other , DAY_Xardas_ALL ) && ( Capital <  3 )) .
	{
		return TRUE;
	};
};

func void DIA_Xardas_FirstEXIT_Info()
{
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_15_00 " );	// I'm leaving immediately!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_14_01 " );	// Good! One more thing. Try not to tell everyone that my tower is now outside the Valley of Mines. First of all, be careful with Firebenders!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_14_02 " );	// Since I've been away from them, the Circle of Fire thinks I'm dead - and that's a very good thing.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_14_03 " );	// And remember that the goals you are facing right now will require a lot of effort from you!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_14_04 " );	// Of course, your strength and capabilities have become much less than when you went to battle with the Sleeper.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_14_05 " );	// So I'm not quite sure - can you do it?
	Mob_CreateItems("NW_CHEST_49",ItMw_Rapier,1);
	REALPROTMAGIC = 0;
	REALPROTFIRE = 0;
	Wld_InsertNpc(dmt_1212_dagot,"NW_XARDAS_TOWER_IN1_28");
	Info_ClearChoices(DIA_Xardas_FirstEXIT);
	Info_AddChoice(DIA_Xardas_FirstEXIT, " What's all this talking about? (Difficulty: Legendary) " ,DIA_Xardas_FirstEXIT_Legend);
	Info_AddChoice(DIA_Xardas_FirstEXIT, " Of course I can do it. (Difficulty: hard) " ,DIA_Xardas_FirstEXIT_CantStopMe);
	Info_AddChoice(DIA_Xardas_FirstEXIT, " I have some doubts about this too. (Difficulty: Normal) " ,DIA_Xardas_FirstEXIT_DontKnow);
	Info_AddChoice(DIA_Xardas_FirstEXIT, " Yes, this is going to be tough. I need help! (Difficulty: Easy) " ,DIA_Xardas_FirstEXIT_NeedHelp);
};

func void DIA_Xardas_FirstEXIT_Legend()
{
	Snd_Play("DRAGON_WRATH_01");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_Legend_01_01 " );	// Why all this talk?
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_Legend_01_02 " );	// You know as well as I do that only I can deal with the threat looming over us.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_Legend_01_03 " );	// Otherwise, I wouldn't have spent so much time and effort trying to get me out of the Temple of the Sleeper.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_Legend_01_04 " );	// So you'd better leave all your doubts to someone else and let me get down to business!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_Legend_01_05 " );	// (doomed) Crazy! Are you in such a hurry to kill yourself?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_Legend_01_06 " );	// But you can't even imagine what awaits you after you leave my tower.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_Legend_01_07 " );	// It doesn't scare me.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_Legend_01_08 " );	// And that's too bad! Since a person who has lost fear is already doomed to death in advance.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_Legend_01_09 " );	// He knows no limits and does not represent a true threat from enemies.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_Legend_01_10 " );	// Stop lecturing me! I made my choice and you can hardly convince me otherwise.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_Legend_01_11 " );	// Good! May it be so...
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_09 " );	// And one more thing before you leave.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_10 " );	// There is someone here who would like to talk to you.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_CantStopMe_01_11 " );	// True? And who is it?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_12 " );	// You will learn this from him if you listen carefully.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_LastWordsMe_01_01 " );	// And remember - it doesn't matter who you were before! Your new journey begins here and now. And you decide your own fate...
	GivePack = TRUE;
	AI_StopProcessInfos(self);
	XP_PER_VICTORY = 10;
	NoHPForLevel = TRUE;
	SURPRISE = 0;
	SBMODE = 1;
	SLEEPDIS = 9;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = TRUE;
	CanChangeItem = TRUE ;
	Hero_Hunger = TRUE;
	Hero_Thirst = TRUE;
	Hero_Fatigue = TRUE;
	StatusDayNow = Wld_GetDay();
	AI_StopProcessInfos(self);
	B_Chapter Change( 1 , NEWWORLD_ZEN );
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	RealMode[2] = TRUE;

	if(CheckRealMode[1] == FALSE)
	{
		CheckRealMode[1] = TRUE;
	};

	Wld_InsertNpc(Oster,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Oster,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Oster,"NW_XARDAS_VALLEY_04");
	xardas_firstlock();
};

func void DIA_Xardas_FirstEXIT_CantStopMe()
{
	Snd_Play("DEM_AMBIENT");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_CantStopMe_01_01 " );	// Of course I can handle it. Nobody and nothing will stop me!
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_CantStopMe_01_02 " );	// The longer you delay me with your talk, the less time we have to fend off the threat from the dragons.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_03 " );	// Your self-confidence pleases and scares me at the same time!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_04 " );	// I hope you're right about your strengths. After all, your death will doom all the inhabitants of this island to death.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_CantStopMe_01_05 " );	// Don't worry! Otherwise, I wouldn't say so.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_09 " );	// And one more thing before you leave.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_10 " );	// There is someone here who would like to talk to you.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_CantStopMe_01_11 " );	// True? And who is it?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_CantStopMe_01_12 " );	// You will learn this from him if you listen carefully.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_LastWordsMe_01_01 " );	// And remember - it doesn't matter who you were before! Your new journey begins here and now. And you decide your own fate...
	GivePack = TRUE;
	AI_StopProcessInfos(self);
	Mob_CreateItems("XAR_CHEST",ItFo_Apple,3);
	Mob_CreateItems("XAR_CHEST",ItMi_Gold,20);
	XP_PER_VICTORY = 15;
	NoHPForLevel = TRUE;
	SURPRISE = 0;
	SBMODE = 1;
	SLEEPDIS = 9;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = TRUE;
	CanChangeItem = TRUE ;
	Hero_Hunger = TRUE;
	Hero_Thirst = TRUE;
	Hero_Fatigue = TRUE;
	StatusDayNow = Wld_GetDay();
	hero.attribute[ATR_MANA_MAX] = 20;
	hero.aivar[ REAL_MANA_MAX ] = 20 ;
	HeroRealMaxMana = 20;
	hero.attribute[ATR_MANA] = 20;
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_1H,4);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_2H,4);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_BOW,4);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_CROSSBOW,4);
	AI_StopProcessInfos(self);
	B_Chapter Change( 1 , NEWWORLD_ZEN );
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_PATH_FARM1_08_01");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_04");
	xardas_firstlock();
};

func void DIA_Xardas_FirstEXIT_DontKnow()
{
	Snd_Play("TRO_WARN");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_DontKnow_01_00 " );	// I also have some doubts about this.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_02 " );	// Good! I will help you regain some of your former strength.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_03 " );	// True, my supply of magical elixirs is somewhat limited. But everything I have is at your disposal.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_04 " );	// Here - take it and use it wisely!
	CreateInvItems(other,ItPo_Perm_Health,1);
	CreateInvItems(other,ItPo_Health_02,2);
	GivePack = TRUE;
	AI_Print( " Received some elixirs... " );
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_DontKnow_01_05 " );	// What about armor?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_06 " );	// Take these miner's pants. I don't have much at the moment.
	B_GiveInvItems(self,other,ITAR_PRISONEL,1);
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_08 " );	// And one more thing before you go...
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_09 " );	// There is someone here who would like to talk to you.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_DontKnow_01_10 " );	// True? And who is it?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_DontKnow_01_11 " );	// You will learn this from him if you listen carefully.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_LastWordsMe_01_01 " );	// And remember - it doesn't matter who you were before! Your new journey begins here and now. And you decide your own fate...
	AI_Print(concatText);
	AI_StopProcessInfos(self);
	XP_PER_VICTORY = 20;
	SBMODE = 2;
	SLEEPDIS = 24;
	SURPRISE = 10;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = TRUE;
	CanChangeItem = TRUE ;
	Mob_CreateItems("XAR_CHEST",ItFo_Apple,5);
	Mob_CreateItems("XAR_CHEST",ItMi_Gold,200);
	hero.attribute[ATR_STRENGTH] = 20;
	hero.aivar[REAL_STRENGTH] = 20;
	HeroRealStr = 20;
	hero.attribute[ATR_DEXTERITY] = 20;
	hero.aivar[REAL_DEXTERITY] = 20;
	HeroRealDex = 20;
	hero.attribute[ATR_MANA_MAX] = 30;
	hero.aivar[ REAL_MANA_MAX ] = 30 ;
	HeroRealMaxMana = 30;
	hero.attribute[ATR_MANA] = 30;
	hero.attribute[ATR_HITPOINTS_MAX] = 200;
	hero.attribute[ATR_HITPOINTS] = 200;
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_1H,9);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_2H,9);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_BOW,9);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_CROSSBOW,9);
	AI_StopProcessInfos(self);
	B_Chapter Change( 1 , NEWWORLD_ZEN );
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	Wld_InsertNpc(Molerat,"NW_XARDAS_PATH_FARM1_08_01");
	Wld_InsertNpc(Molerat,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Molerat,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Molerat,"NW_XARDAS_VALLEY_04");
};

func void DIA_Xardas_FirstEXIT_NeedHelp()
{
	Snd_Play("SHP_AMBIENT");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_NeedHelp_01_00 " );	// Yes, it won't be easy. I need help!
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_NeedHelp_01_01 " );	// I'm not even sure if I can even get to the city alive.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_02 " );	// Yes, you're right. For you now this is the most important task!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_03 " );	// There you can already get stronger and gain strength so as not to run away from every beast you meet.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_06 " );	// Here, take these elixirs and magical spell scrolls!
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_07 " );	// Use them to make your way to Khorinis.
	CreateInvItems(other,ItPo_Health_02,5);
	CreateInvItems(other,ItPo_Perm_Health,1);
	CreateInvItems(other,ItPo_Mana_02,5);
	CreateInvItems(other,ItSc_Firebolt,2);
	CreateInvItems(other,ItSc_Zap,2);
	GivePack = TRUE;
	AI_Print( " Received some elixirs and magic scrolls... " );
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_08 " );	// But don't you dare hide them for a rainy day! Your life is too valuable to risk it.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_09 " );	// And here's some more gold. It will definitely come in handy for you!
	B_GiveInvItems(self,other,ItMi_Gold,1000);
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_NeedHelp_01_10 " );	// What about armor?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_11 " );	// Take these miner's pants. I don't have much at the moment.
	B_GiveInvItems(self,other,ITAR_Prisoner,1);
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_NeedHelp_01_12 " );	// Well, thanks! Now I won't be lost.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_13 " );	// I really hope so... (sarcastically) One more thing before you go.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_14 " );	// There is someone here who would like to talk to you.
	AI_Output(other,self, " DIA_Xardas_FirstEXIT_NeedHelp_01_15 " );	// True? And who is it?
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_NeedHelp_01_16 " );	// You will learn this from him if you listen carefully.
	AI_Output(self,other, " DIA_Xardas_FirstEXIT_LastWordsMe_01_01 " );	// And remember - it doesn't matter who you were before! Your new journey begins here and now. And you decide your own fate...
	AI_StopProcessInfos(self);
	XP_PER_VICTORY = 25;
	SBMODE = 4;
	SLEEPDIS = 24;
	SURPRISE = 10;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = FALSE;
	CanChangeItem = TRUE ;
	Mob_CreateItems("XAR_CHEST",ItMi_Gold,200);
	hero.attribute[ATR_STRENGTH] = 30;
	hero.aivar[REAL_STRENGTH] = 30;
	HeroRealStr = 30;
	hero.attribute[ATR_DEXTERITY] = 30;
	HeroRealDex = 30;
	hero.aivar[REAL_DEXTERITY] = 30;
	hero.attribute[ATR_MANA_MAX] = 40;
	hero.aivar[ REAL_MANA_MAX ] = 40 ;
	HeroRealMaxMana = 40;
	hero.attribute[ATR_MANA] = 40;
	hero.attribute[ATR_HITPOINTS_MAX] = 300;
	hero.attribute[ATR_HITPOINTS] = 300;
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_1H,14);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_2H,14);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_BOW,14);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_CROSSBOW,14);
	AI_StopProcessInfos(self);
	B_Chapter Change( 1 , NEWWORLD_ZEN );
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_PATH_FARM1_08_01");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_VALLEY_04");
};

instance DIA_Xardas_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_EXIT_Condition;
	information = DIA_Xardas_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_EXIT_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Xardas_FirstEXIT ) && ( Capital <  3 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_NO_TALK(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_no_talk_condition;
	information = dia_xardas_no_talk_info;
	permanent = TRUE;
	important = TRUE;
};

func int dia_xardas_no_talk_condition()
{
	if((self.aivar[AIV_LastFightAgainstPlayer] == FIGHT_LOST) && Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void dia_xardas_no_talk_info()
{
	B_Say(self,other,"$SPAREME");
	B_Say(self,other,"$NEVERENTERROOMAGAIN");
	AI_StopProcessInfos(self);
};

DIA_XARDAS_DAGOT (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_dagot_condition;
	information = dia_xardas_dagot_info;
	permanent = FALSE;
	important = TRUE;
};

func int dia_xardas_dagot_condition()
{
	if((DAGOT_MEET == TRUE) && Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void dia_xardas_dagot_info()
{
	if(GUARDIAN_WAY == TRUE)
	{
		XARDAS_SPEAKDAGOT = TRUE;
		AI_Output(self,other, " DIA_Xardas_Dagot_01_00 " );	// So you did accept the Guardian's offer...
		AI_Output(self,other, " DIA_Xardas_Dagot_01_01 " );	// Perhaps your decision was hasty, but nothing can be changed now.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_02 " );	// Now you can't just go off this path.
		AI_Output(other,self, " DIA_Xardas_Dagot_01_03 " );	// The Guardian said that you, too, embarked on this path.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_04 " );	// Yes, it is.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_05 " );	// Before the Sleeper was defeated, it was the Guardians who then suggested to me a way to exorcise this demon and destroy the Barrier.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_06 " );	// That was the price for me accepting their offer - just like you did...
		AI_Output(self,other, " DIA_Xardas_Dagot_01_07 " );	// If I had refused then, maybe we wouldn't be talking to you now... Who knows what could have happened at all.
		AI_Output(other,self, " DIA_Xardas_Dagot_01_08 " );	// Dagoth said we'd meet again, and then he just disappeared!
		AI_Output(self,other, " DIA_Xardas_Dagot_01_09 " );	// Did you think he would be like a babysitter to you? To meet the Guardian is an honor that falls only to the elite.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_09A " );	// You banished the Sleeper and thus earned this honor! As for your next meeting...
		AI_Output(self,other, " DIA_Xardas_Dagot_01_10 " );	// If he said so, then it will be so... The time will come and you will meet him.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_11 " );	// In the meantime, leave your thoughts on this - now you have more important things to do...
		B_LogEntry( TOPIC_GUARDIANS , " Xardas said I'll meet the Guardian again, but only when the time is right. " );
		AI_StopProcessInfos(self);
		Npc_ExchangeRoutine(self,"Xar");
	}
	else if(GUARDIAN_WAY == FALSE)
	{
		AI_Output(self,other, " DIA_Xardas_Dagot_01_13 " );	// You refused to accept the Guardian's offer...
		AI_Output(self,other, " DIA_Xardas_Dagot_01_14 " );	// Perhaps your decision was hasty, but nothing can be changed now.
		AI_Output(other,self, " DIA_Xardas_Dagot_01_15 " );	// The Guardian said that you, too, embarked on this path.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_16 " );	// I can't tell you more than what the Keeper told you.
		AI_Output(self,other, " DIA_Xardas_Dagot_01_17 " );	// Quit thinking about it - you have more important things to do now...
		B_LogEntry( TOPIC_GUARDIANS , " Xardas advised me to forget about it for now. " );
		AI_StopProcessInfos(self);
		Npc_ExchangeRoutine(self,"Xar");
	};
};


var int addon_first;
var int modcheckv;

instance DIA_Xardas_Hello(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Hello_Condition;
	information = DIA_Xardas_Hello_Info;
	permanent = FALSE;
	important = TRUE;
};


func int DIA_Xardas_Hello_Condition()
{
	if(PrologCredits == TRUE)
	{
		return TRUE;
	};
};

func void DIA_Xardas_Hello_Info()
{
	self.name[ 0 ] = " Xardas " ;
	self.noFocus = FALSE;
	Mdl_ApplyOverlayMds(other,"PRE_START.MDS");
	Wld_SendTrigger("EVT_START_CAM");
	Snd_Play("RAVENS_EARTHQUAKE1");
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_01,StartHelpBug_01,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_02,StartHelpBug_02,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_03,StartHelpBug_03,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_04,StartHelpBug_04,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_05,StartHelpBug_05,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_01,StartHelpBug_01,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_02,StartHelpBug_02,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_03,StartHelpBug_03,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_04,StartHelpBug_04,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_05,StartHelpBug_05,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_Teleport_RING",hero,hero,0,0,0,FALSE);
	AI_PlayAni(hero,"T_STAND_2_HEROSUMMON");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",hero,hero,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_INCOVATION_WHITE",hero,hero,0,0,0,FALSE);
	Wld_PlayEffect("FX_EarthQuake",hero,hero,0,0,0,FALSE);
	Wld_PlayEffect("SFX_Circle",hero,hero,0,0,0,FALSE);
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_Wait(hero,1);
	AI_UnequipArmor(hero);
	CreateInvItems(other,ITAR_Her_M,1);
	AI_EquipArmor(other,ITAR_Her_M);
	AI_PlayAni(hero,"T_HEROSUMMON_2_STAND");
	AI_Wait(self,2);
	MODCHECKV = 201 ;
	FalkHunters = 3;
	CaptureCheat = TRUE;
	CrushBonus2HOn = TRUE ;
	DPSMeterOn = TRUE;
	CinemaMod = FALSE;
	CinemaModOneTime = FALSE;
	AI_Output(self,other, " DIA_Addon_Xardas_Hello_14_00 " );	// Finally! I thought that you and I would never meet again.
	AI_Output(other,self, " DIA_Addon_Xardas_Hello_15_01 " );	// I feel like I've been under a pile of rocks for three weeks.
	AI_Output(self,other, " DIA_Addon_Xardas_Hello_14_02 " );	// So it was. You survived only thanks to the magic of your armor.
	Mob_CreateItems("XAR_CHEST",itpo_anpois,1);
	AI_Output(self,other, " DIA_Addon_Xardas_Hello_14_03 " );	// I've already begun to fear that I won't be able to pull you out from under the ruins of the temple.
	AI_Output(self,other, " DIA_Addon_Xardas_Hello_14_04 " );	// But enough about that! Now you are here.
	AI_Output(self,other, " DIA_Addon_Xardas_Hello_14_05 " );	// And a new threat looms over us.
	Npc_ExchangeRoutine(self,"START");
	Info_ClearChoices(DIA_Xardas_Hello);
	Info_AddChoice(DIA_Xardas_Hello, " Well, at least we have enough time now. I did it! Sleeping... " ,DIA_Addon_Xardas_Hello_Dragons);
	Info_AddChoice(DIA_Xardas_Hello, " What is this new threat you're talking about? " ,DIA_Addon_Xardas_Hello_Man);
};

func void DIA_Addon_Xardas_Hello_Man()
{
	Npc_RemoveInvItems(hero,ITAR_OLDOREARMOR,1);
	B_RemoveNpcKill(StartHelpBug_01);
	B_RemoveNpcKill(StartHelpBug_02);
	B_RemoveNpcKill(StartHelpBug_03);
	B_RemoveNpcKill(StartHelpBug_04);
	B_RemoveNpcKill(StartHelpBug_05);
	AI_Output(other,self, " DIA_Addon_Xardas_AddonIntro_Add_01_01 " );	// What is this new threat?
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_02 " );	// One of the ancient artifacts of evil has been returned to this world!
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_03 " );	// They call it the Claw of Beliar! And, as far as I know, it can control countless legions of the dead.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_04 " );	// I hope I don't need to explain what will happen if he suddenly falls into the hands of the minions of the Dark God.
	AI_Output(other,self, " DIA_Addon_Xardas_AddonIntro_Add_01_05 " );	// And where is this artifact now?
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_06 " );	// Ancient records say that its last owner was the people of architects who lived on this island several millennia ago.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_07 " );	// All of them were faithful worshipers and followers of Adanos, the god of Water and Balance.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_08 " );	// I believe the item we're interested in might be hidden in one of their temples around here on the island.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_09 " );	// You need to find out, and as soon as possible.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_10 " );	// (abstractly) Recently, Waterbenders, who arrived from the Valley of Mines, became interested in the culture of architects.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_11 " );	// They even organized something like an expedition to their shrines.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonIntro_Add_01_12 " );	// Enlist their support! With their help, it will be easier for you to find the Claw.
	addon_first = TRUE ;
};

func void DIA_Addon_Xardas_Hello_Dragons()
{
	AI_Output(other,self, " DIA_Xardas_Hello_15_03 " );	// Well, at least we have enough time now. I did it! Sleeping...
	AI_Output(self,other, " DIA_Xardas_Hello_14_04 " );	// ...was exiled. You defeated him, yes, it is true - but it is not in our power to stop the war that is now flaring up.
	AI_Output(self,other, " DIA_Xardas_Hello_14_07 " );	// With his last, furious cry, the Sleeper set the armies of darkness in motion.
	AI_Output(self,other, " DIA_Xardas_Hello_14_08 " );	// This was an order to all creatures of darkness. A word of power that they all must obey.
	AI_Output(self,other, " DIA_Xardas_Hello_14_09 " );	// His last order was - GO! And they went. All. Even dragons!
	AI_Output(other,self, " DIA_Xardas_Hello_15_10 " );	// (surprised) Dragons?!
	AI_Output(self,other, " DIA_Xardas_Hello_14_11 " );	// These are creations of ancient power! I feel their presence - even here.
	AI_Output(self,other, " DIA_Xardas_Hello_14_12 " );	// And they gathered around them a whole army of lower beings.
	AI_Output(other,self, " DIA_Xardas_Hello_15_13 " );	// And where is this army now?
	AI_Output(self,other, " DIA_Xardas_Hello_14_14 " );	// The camp of this army is not far from here, in the Valley of Mines, near Khorinis. And she's ready to attack!

	if(Addon_zuerst == TRUE)
	{
		AI_Output(self,other, " DIA_Xardas_Hello_14_15 " );	// (thoughtfully) We don't have much time!
	}
	else
	{
		AI_Output(self,other, " DIA_Addon_Xardas_Hello_Dragons_14_06 " );	// But that's not all. There is something else that threatens us. I only recently found out about this.
		Info_ClearChoices(DIA_Xardas_Hello);
		Info_AddChoice(DIA_Xardas_Hello, " What other threat are you talking about? " ,DIA_Addon_Xardas_Hello_Man);
	};
};

instance DIA_Xardas_OtherGreatWeapon(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_OtherGreatWeapon_Condition;
	information = DIA_Xardas_OtherGreatWeapon_Info;
	permanent = FALSE;
	description = " What other weapon can help me deal with dragons, besides Urizel? " ;
};

func int DIA_Xardas_OtherGreatWeapon_Condition()
{
	if ((Npc_KnowsInfo(other,DAY_Xardas_ALL) ==  TRUE ) && (Capital >=  1 ))
	{
		return TRUE;
	};
};

func void DIA_Xardas_OtherGreatWeapon_Info()
{
	AI_Output(other,self, " DIA_Xardas_OtherGreatWeapon_01_00 " );	// And what weapon can help me deal with dragons besides Urizel?
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_01 " );	// There are quite a few artifacts in this world that can match the power of Urizel.
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_02 " );	// But I only know a few of them.
	AI_Output(other,self, " DIA_Xardas_OtherGreatWeapon_01_03 " );	// Can you tell me about it?
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_05 " );	// Good. The first artifact worth mentioning is the magical staff. It is also called the Extinguisher of Souls!
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_06 " );	// He possesses incredible strength, capable of mastering even the most powerful creatures of this world. Including dragons!
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_07 " );	// True, only a very strong and experienced mage can bend him to his will!
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_08 " );	// Otherwise, this artifact will become just a useless stick in inept hands.
	AI_Output(other,self, " DIA_Xardas_OtherGreatWeapon_01_09 " );	// Good. And where can I look for it?
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_10 " );	// If I had known, I would have had it a long time ago. You know, things like that don't go down the road.
	AI_Output(other,self, " DIA_Xardas_OtherGreatWeapon_01_13 " );	// I understand. Anything else?
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_14 " );	// The second artifact I've heard of is called Er'Hazir, which means Starfury in ancient language.
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_15 " );	// According to legend, this bow was created by Adanos himself, so that his chosen one could bring death to his enemies!
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_16 " );	// The arrows fired from it are endowed with a special magical power that can penetrate the strongest armor.
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_17 " );	// Once in your hands, this weapon would give us a tangible advantage in the fight against dragons.
	AI_Output(self,other, " DIA_Xardas_OtherGreatWeapon_01_19 " );	// However, I can't tell if it actually exists. You'll have to find out for yourself.
	AI_Output(other,self, " DIA_Xardas_OtherGreatWeapon_01_21 " );	// I didn't expect anything else.
};

instance DIA_Xardas_AWAY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_AWAY_Condition;
	information = DIA_Xardas_AWAY_Info;
	permanent = FALSE;
	description = " Then let's get out of here as fast as we can! " ;
};

func int DIA_Xardas_AWAY_Condition()
{
	if ( ! Npc_KnowsInfo(other,DAY_Xardas_ALL) &&  ! Npc_KnowsInfo(other,DAY_Xardas_FirstEXIT) && (Chapter <  3 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_AWAY_Info()
{
	Snd_Play("LevelUp");
	B_GivePlayerXP(50);
	AI_Output(other,self, " DIA_Xardas_AWAY_15_00 " );	// Then let's get out of here as fast as we can!
	AI_Output(self,other, " DIA_Xardas_AWAY_14_01 " );	// If we run away now, it will only delay our encounter with the dragons.
	AI_Output(self,other, " DIA_Xardas_AWAY_14_02 " );	// With the help of the soldiers and mages who live here, we can stop them before the army of darkness is fully formed.
	AI_Output(self,other, " DIA_Xardas_AWAY_14_03 " );	// We won't get a better chance for this.
	AI_NoticePrint(3000,4098,NAME_Addon_ScareBonus);
	RankPoints = RankPoints + 1;
	ScareBonus = TRUE;
};

instance DIA_Xardas_TODO (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_TODO_Condition;
	information = DIA_Xardas_TODO_Info;
	permanent = FALSE;
	description = " What can we do? " ;
};

func int DIA_Xardas_TODO_Condition()
{
	if (chapter <  3 )
	{
		return TRUE;
	};
};

func void DAY_Xardas_TODO_Info()
{
	AI_Output(other,self, " DIA_Xardas_TODO_15_00 " );	// What can we do?
	AI_Output(self,other, " DIA_Xardas_TODO_14_01 " );	// This time we can't handle it ourselves. Only the power of Innos can help us in the fight against these dragons.
	AI_Output(self,other, " DIA_Xardas_TODO_14_02 " );	// In the city of Khorinis, not far from here, a squad of paladins stopped.
	AI_Output(self,other, " DIA_Xardas_TODO_14_03 " );	// They have a powerful artifact that can help us defeat these dragons.
	AI_Output(self,other, " DIA_Xardas_TODO_14_04 " );	// They call it the 'Eye of Innos'. You must take possession of this artifact.
	AI_Output(self,other, " DIA_Xardas_TODO_14_05 " );	// Tell the paladins about the impending threat. You MUST convince their leader to support us!
	AI_Output(self,other, " DIA_Xardas_TODO_14_09 " );	// However, in order to defeat the dragons, you may need another artifact.
	AI_Output(self,other, " DIA_Xardas_TODO_14_11 " );	// That sword with which you slew the Sleeper! The eye will protect you from the flames of the dragons, but to slay them, you will need a truly deadly weapon!
	AI_Output(other,self, " DIA_Xardas_TODO_14_12 " );	// Urizel?
	AI_Output(self,other, " DIA_Xardas_TODO_14_13 " );	// Exactly.
	AI_Output(other,self, " DIA_Xardas_TODO_14_14 " );	// But he stayed in the Temple of the Sleeper!
	AI_Output(self,other, " DIA_Xardas_TODO_14_15 " );	// So you'll have to go back there.
	Log_CreateTopic(TOPIC_INNOSEYE,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_INNOSEYE,LOG_Running);
	B_LogEntry( TOPIC_INNOSEYE , " A group of paladins is stationed in the city of Khorinis. They wield a powerful artifact: the 'Eye of Innos'. His power should help us against the dragon threat. I must convince the paladins to support us in this cause. " );
	Log_CreateTopic(TOPIC_ORCTEMPLE,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_ORCTEMPLE,LOG_Running);
	B_LogEntry_Quiet( TOPIC_ORCTEMPLE , " Xardas said that in addition to the Eye of Innos, in the fight against the dragons, I might need the powerful ancient blade URIZEL, with which I once slew the Sleeper. I should visit the temple of the Sleeper at the earliest opportunity, where this legendary sword should have remained. " );
	Info_ClearChoices(DIA_Xardas_TODO);
};

instance DIA_Addon_Xardas_StonePlate(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 5;
	condition = DIA_Addon_Xardas_StonePlate_Condition;
	information = DIA_Addon_Xardas_StonePlate_Info;
	description = " What can you say about this stone tablet? " ;
};

func int DIA_Addon_Xardas_StonePlate_Condition()
{
	if(Npc_HasItems(other,ItWr_StonePlateCommon_Addon))
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_StonePlate_Info()
{
	B_GivePlayerXP(XP_Ambient);
	AI_Output(other,self, " DIA_Addon_Xardas_StonePlate_15_00 " );	// What can you say about this stone tablet?
	AI_Output(self,other, " DIA_Addon_Xardas_StonePlate_14_03 " );	// At first I suspected it was a magical artifact. But then I came to the conclusion that it has no value.
	AI_Output(self,other, " DIA_Addon_Xardas_StonePlate_14_04 " );	// I could not fully decipher the inscriptions on the tablet, but they seem to refer to the history of some ancient culture.
	AI_Output(self,other, " DIA_Addon_Xardas_StonePlate_14_05 " );	// If you want, you can take the tablet for yourself. She is of no use to me!
};

instance DIA_XARDAS_ORCTEMPLE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_orctemple_condition;
	information = dia_xardas_orctemple_info;
	permanent = FALSE;
	description = " I found strange things... " ;
};

func int dia_xardas_orctemple_condition()
{
	if((MIS_ORCTEMPLE == LOG_Running) && (ORCTEMPLEONETIME == TRUE) && (ORCTEMPLEGATEOPENED == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_orctemple_info()
{
	AI_Output(other,self, " DIA_Xardas_OrcTemple_15_00 " );	// I found strange things at the entrance to the Temple of the Sleeper.
	AI_Output(other,self, " DIA_Xardas_OrcTemple_15_01 " );	// Orc ghosts that do not react to anything and a tunnel closed by a stone slab deep into the mountain.
	AI_Output(self,other, " DIA_Xardas_OrcTemple_14_02 " );	// You came just in time. I just figured out this issue.
	AI_Output(self,other, " DIA_Xardas_OrcTemple_14_03 " );	// This tunnel is the road to the Temple of the Sleeper. Orcs fought their way in and cleared the rubble immediately after the fall of the Barrier.
	AI_Output(self,other, " DIA_Xardas_OrcTemple_14_04 " );	// But then for some reason they hurriedly left that place and closed the entrance. And for a long time I could not understand why.
	AI_Output(self,other, " DIA_Xardas_OrcTemple_14_05 " );	// But then I understood everything, seeing in this another cruel joke of Beliar.
	AI_Output(self,other, " DIA_Xardas_OrcTemple_14_06 " );	// The Dark God finds it amusing when his servants cut each other's throats to curry favor with him.
	AI_Output(self,other, " DIA_Xardas_OrcTemple_14_07 " );	// Looks like we'll have to deal with another serious enemy.
	B_GivePlayerXP(XP_Ambient);
	B_LogEntry( TOPIC_ORCTEMPLE , " Found lattice closes the passage to the Temple of the Sleeper. " );
};


instance DIA_XARDAS_ORCTEMPLE2(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_orctemple2_condition;
	information = dia_xardas_orctemple2_info;
	permanent = FALSE;
	description = " Who are you talking about? " ;
};


func int dia_xardas_orctemple2_condition()
{
	if ( Npc_KnowsInfo ( other , dia_xardas_orctemple ) && ( MY_ORCTEMPLE  == LOG_Running ))
	{
		return TRUE;
	};
};

func void dia_xardas_orctemple2_info()
{
	AI_Output(other,self, " DIA_Xardas_OrcTemple2_15_00 " );	// Who are you talking about?
	AI_Output(self,other, " DIA_Xardas_OrcTemple2_14_01 " );	// I believe this is one of Beliar's chosen ones. And I do not think that he will be inferior in strength to the dragons - Beliar chooses the strongest!
	AI_Output(self,other, " DIA_Xardas_OrcTemple2_14_02 " );	// I suspect that he is the new owner of Urizel.
	AI_Output(self,other, " DIA_Xardas_OrcTemple2_14_03 " );	// The Temple of the Sleeper is a great place for such creatures, and the demonic aura of this cursed place makes it even more powerful.
	AI_Output(self,other, " DIA_Xardas_OrcTemple2_14_04 " );	// Most likely, the orcs were not able to resist this evil. And having cleared the temple of rubble, they even saved him from unnecessary worries.
	AI_Output(self,other, " DIA_Xardas_OrcTemple2_14_05 " );	// The ghosts that you saw at the entrance will serve as a good deterrent to anyone who intends to encroach on his peace.
	AI_Output(self,other, " DIA_Xardas_OrcTemple2_14_06 " );	// In general, everything in this case suggests that you will once again have to go to this temple and find out what kind of evil lurks there.
	B_LogEntry( TOPIC_ORCTEMPLE , " Looks like I'll have to visit the Temple of the Sleeper again and find out what evil is hiding there. " );
};


instance DIA_XARDAS_ORCTEMPLEDOOR(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_orctempledoor_condition;
	information = dia_xardas_orctempledoor_info;
	permanent = FALSE;
	description = " How do I get to the Temple of the Sleeper? " ;
};


func int dia_xardas_orctempledoor_condition()
{
	if ( Npc_KnowsInfo ( other , dia_xardas_orctemple ) && ( ORCTEMPLEGATEOPEN  ==  FALSE ))
	{
		return TRUE;
	};
};

func void dia_xardas_orctempledoor_info()
{
	AI_Output(other,self, " DIA_Xardas_OrcTempleDoor_15_00 " );	// How do I get to the Temple of the Sleeper?
	AI_Output(other,self, " DIA_Xardas_OrcTempleDoor_15_01 " );	// There is no sign of a lever or switch near the grate.
	AI_Output(self,other, " DIA_Xardas_OrcTempleDoor_14_02 " );	// Most likely, the orcs cast a complex spell on it, and just like that it will not open.
	AI_Output(self,other, " DIA_Xardas_OrcTempleDoor_14_03 " );	// I'm afraid I can't help here. You'll have to find the solution yourself.
	AI_Output(self,other, " DIA_Xardas_OrcTempleDoor_14_04 " );	// It seems to me that the answer should be sought from the orcs.
	B_LogEntry( TOPIC_ORCTEMPLE , " Xardas can't tell me how to open the portcullis to enter the Temple of the Sleeper. Only orcs know the answer to that. " );
	ORCTEMPLEGATEINFO = TRUE;
};


instance DIA_XARDAS_DMST_DEAD(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_dmst_dead_condition;
	information = dia_xardas_dmst_dead_info;
	permanent = FALSE;
	description = " I've been to the Temple of the Sleeper. " ;
};


func int dia_xardas_dmst_dead_condition()
{
	if (( DARKMAGE_ISDEAD  ==  TRUE ) && ( XARDASKNOWSDEADMAGE  ==  FALSE ))
	{
		return TRUE;
	};
};

func void dia_xardas_dmst_dead_info()
{
	AI_Output(other,self, " DIA_Xardas_DMST_Dead_15_00 " );	// I was in the Temple of the Sleeper.
	AI_Output(self,other, " DIA_Xardas_DMST_Dead_14_03 " );	// Yes?! And who was it?
	AI_Output(other,self, " DIA_Xardas_DMST_Dead_15_04 " );	// Some sorcerer. He looked about the same as you. I mean clothes.
	AI_Output(other,self, " DIA_Xardas_DMST_Dead_15_04A " );	// And he had this sword with him - do you recognize it?
	AI_Output(self,other, " DIA_Xardas_DMST_Dead_14_05 " );	// Urizel? Excellent! It will come in handy for you again and again. So the necromancer... hmm... thanks to you, Beliar lost another loyal servant.
	AI_Output(self,other, " DIA_Xardas_DMST_Dead_14_06 " );	// This sorcerer... he was able to become the chosen one of Beliar. Perhaps this opens up some hidden possibilities for...
	AI_Output(self,other, " DIA_Xardas_DMST_Dead_14_07 " );	// Oh well... not about that now! (laughs slyly)
	B_GivePlayerXP(200);
	XARDASKNOWSDEADMAGE = TRUE;
};


instances of DIA_XARDAS_MAKERUNE (C_Info)
{
	npc = NONE_100_Xardas;
	condition = dia_xardas_makerune_condition;
	information = dia_xardas_makerune_info;
	important = FALSE;
	permanent = FALSE;
	description = " You said even a mage could use this sword. " ;
};


func int dia_xardas_makerune_condition()
{
	if ((Npc_HasItems(other,itmw_2h_urizel) >=  1 ) && ( XARDASKNOWSDEADMAGE  ==  TRUE ) && ( KNOWINFOURIZELRUNE  ==  FALSE ) && ((other.guild ==  GIL_KDF ) || (other.guild ==  GIL_GUR ) || ( other.guild ==  GIL_KDW ) || (other.guild ==  GIL_KDM )))
	{
		return TRUE;
	};
};

func void dia_xardas_makerune_info()
{
	AI_Output(other,self, " DIA_Xardas_MAKERUNE_15_01 " );	// You said that even a mage could use this sword.
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_02 " );	// Take a closer look at it. See that blue stone at the base of the blade?
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_03 " );	// It contains all of Urizel's magic power.
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_04 " );	// If I take it from there, I can create a magic rune with the same properties.
	AI_Output(other,self, " DIA_Xardas_MAKERUNE_15_05 " );	// Make a magical rune out of the sword?
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_06 " );	// In battle, her strength will not yield to that of Urizel!
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_07 " );	// I could do this for you, but you have to be absolutely sure you want it.
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_08 " );	// Think carefully, I won't be able to return the sword to its former power!
	AI_Output(self,other, " DIA_Xardas_MAKERUNE_14_09 " );	// So what's your choice?
	KNOWINFOURIZELRUNE = TRUE;
};


instance DIA_XARDAS_MAKERUNEDOIT(C_Info)
{
	npc = NONE_100_Xardas;
	condition = dia_xardas_makerunedoit_condition;
	information = dia_xardas_makerunedoit_info;
	important = FALSE;
	permanent = TRUE;
	description = " Take the stone from Urizel! " ;
};


func int dia_xardas_makerunedoit_condition()
{
	if((Npc_HasItems(other,itmw_2h_urizel) >= 1) && (XARDASKNOWSDEADMAGE == TRUE) && (KNOWINFOURIZELRUNE == TRUE) && ((other.guild == GIL_KDF) || (other.guild == GIL_GUR) || (other.guild == GIL_KDW) || (other.guild == GIL_KDM)))
	{
		return TRUE;
	};
};

func void dia_xardas_makerunedoit_info()
{
	AI_Output(other,self, " DIA_Xardas_MAKERUNEDOIT_15_01 " );	// Take the stone from Urizel!
	AI_Output(self,other, " DIA_Xardas_MAKERUNEDOIT_14_03 " );	// Is this your final decision? Do you really want me to take this stone?
	Info_ClearChoices(dia_xardas_makerunedoit);
	Info_AddChoice(dia_xardas_makerunedoit, " YES, do it! " ,dia_xardas_makerune_yes);
	Info_AddChoice(dia_xardas_makerunedoit, " NO, don't do that! " ,dia_xardas_makerune_no);
};

func void dia_xardas_makerune_yes()
{
	AI_Output(other,self, " DIA_Xardas_MAKERUNEDOIT_15_04 " );	// YES, do it!
	AI_Output(self,other, " DIA_Xardas_MAKERUNEDOIT_14_05 " );	// As you wish... Here, take an empty sword and a rune!
	AI_Output(self,other, " DIA_Xardas_MAKERUNEDOIT_14_06 " );	// But keep in mind that you can use the full power of this rune only in the battle with dragons.
	Npc_RemoveInvItem(other,itmw_2h_urizel);
	CreateInvItems(other,itmw_2h_urizel_nomagic,1);
	CreateInvItems(other,ItRu_BreathOfDeath,1);
	Info_ClearChoices(dia_xardas_makerunedoit);
};

func void dia_xardas_makerune_no()
{
	AI_Output(other,self, " DIA_Xardas_MAKERUNEDOIT_15_06 " );	// NO, don't do this!
	AI_Output(self,other, " DIA_Xardas_MAKERUNEDOIT_14_07 " );	// As you wish. Magic power will remain in this sword!
	Info_ClearChoices(dia_xardas_makerunedoit);
};


instances of DIA_Addon_Xardas_Portal (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Addon_Xardas_Portal_Condition;
	information = DIA_Addon_Xardas_Portal_Info;
	description = "The waterbenders have found a portal leading to an unexplored part of the island... " ;
};


func int DIA_Addon_Xardas_Portal_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Addon_Saturas_WhatsOrnament ) && ( Saturas_KlaueInsMeer ==  FALSE ) &&  ! C_ScHasBeliarsWeapon());
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_Portal_Info()
{
	AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_00 " );	// Waterbenders found a portal leading to an unexplored part of the island...
	AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_01 " );	// How interesting...
	AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_02 " );	// As soon as you know anything that can really help us, let me know!
	AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_03 " );	// Beliar's artifact might be hidden somewhere. You must find him!
};


instances DIA_Addon_Xardas_PortalAgain (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Addon_Xardas_PortalAgain_Condition;
	information = DIA_Addon_Xardas_PortalAgain_Info;
	permanent = FALSE;
	description = " About this unknown part of the island... " ;
};


func int DIA_Addon_Xardas_PortalAgain_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Addon_Xardas_Portal ) && ( Saturas_KlaueInsMeer ==  FALSE ) &&  ! C_ScHasBeliarsWeapon ());
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_PortalAgain_Info()
{
	AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_17 " );	// About this unknown part of the island...
	AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_18 " );	// I'm not interested in the details. Come back if you learn anything really useful.
};


instance DIA_Addon_Xardas_AddonSuccess(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Addon_Xardas_AddonSuccess_Condition;
	information = DIA_Addon_Xardas_AddonSuccess_Info;
	permanent = FALSE;
	description = " I have explored an unknown part of the island... " ;
};


func int DIA_Addon_Xardas_AddonSuccess_Condition()
{
	if((Saturas_KlaueInsMeer == TRUE) || C_ScHasBeliarsWeapon())
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_AddonSuccess_Info()
{
	AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_03 " );	// I explored an unknown part of the island...
	AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_04 " );	// And what did you find?
	AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_05 " );	// It all ended with the Claw of Beliar falling into my hands.
	AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_06 " );	// Beliar's Claw?! Where is he now? Do you have it with you?
	if(C_ScHasBeliarsWeapon())
	{
		AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_07");	//,  .
		AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_08 " );	// How interesting...
		AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_09 " );	// This weapon can help us a lot. But it is also very dangerous.
		AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_10 " );	// Be careful! And most importantly, don't lose the Claw!
		B_GivePlayerXP(XP_Ambient * 3);
	}
	else
	{
		AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_11 " );	// I don't have it anymore.
		AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_12 " );	// I gave it to the waterbenders to drown it in the sea.
		AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_13 " );	// Are you out of your mind?! Do you even realize what you gave?
		AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_14 " );	// This weapon could be of great service to us!
		AI_Output(other,self, " DIA_Addon_Xardas_AddonSuccess_15_15 " );	// I think I made the right choice.
		AI_Output(self,other, " DIA_Addon_Xardas_AddonSuccess_14_16 " );	// The ways of the gods are inscrutable...
	};
};


instance DIA_Xardas_ARTEFAKT (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_ARTEFAKT_Condition;
	information = DIA_Xardas_ARTEFAKT_Info;
	permanent = FALSE;
	description = " What is this 'Eye of Innos'? " ;
};


func int DIA_Xardas_ARTEFAKT_Condition()
{
	if ( Npc_KnowsInfo ( other , DAY_Xardas_ALL ) && ( Capital <  3 )) .
	{
		return TRUE;
	};
};

func void DIA_Xardas_ARTEFAKT_Info()
{
	AI_Output(other,self, " DIA_Xardas_ARTEFAKT_15_00 " );	// And what is this 'Eye of Innos'?
	AI_Output(self,other, " DIA_Xardas_ARTEFAKT_14_01 " );	// This is an amulet. Legends say that Innos himself put some of his power into this amulet.
	AI_Output(self,other, " DIA_Xardas_ARTEFAKT_14_02 " );	// He will restore some of your lost power and help us defeat the dragons.
	AI_Output(self,other, " DIA_Xardas_ARTEFAKT_14_03 " );	// It also has other hidden features. I will tell you more when you have this amulet in your hands.
};


instances of DIA_Xardas_PALADIN (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_PALADIN_Condition;
	information = DIA_Xardas_PALADIN_Info;
	permanent = FALSE;
	description = " Why should paladins give me this Eye of Innos? " ;
};


func int DIA_Xardas_PALADIN_Condition()
{
	if ( Npc_KnowsInfo ( other , DAY_Xardas_ALL ) && ( Capital <  3 )) .
	{
		return TRUE;
	};
};

func void DIA_Xardas_PALADIN_Info()
{
	AI_Output(other,self, " DIA_Xardas_PALADIN_15_00 " );	// Why should paladins give me this Eye of Innos?
	AI_Output(self,other, " DIA_Xardas_PALADIN_14_01 " );	// Because you are the one destined to wear it.
	AI_Output(other,self, " DIA_Xardas_PALADIN_15_02 " );	// How do you know this?
	AI_Output(self,other, " DIA_Xardas_PALADIN_14_03 " );	// There are several reasons to believe this. Here is the most important of them: you defeated the Sleeper. If the gods had not favored you, you would have been dead long ago.
	AI_Output(other,self, " DIA_Xardas_PALADIN_15_04 " );	// Let's assume you're right and I'm really destined to wear the Eye of Innos. And how do paladins know it's true?
	AI_Output(self,other, " DIA_Xardas_PALADIN_14_05 " );	// The eye itself chooses who can wear it. When you put it on, all paladin doubts will be dispelled.
};


instances of DIA_Xardas_Khorinis (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 4;
	condition = DIA_Xardas_Khorinis_Condition;
	information = DIA_Xardas_Khorinis_Info;
	permanent = FALSE;
	description = " How can I get to the city? " ;
};


func int DIA_Xardas_Khorinis_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Xardas_TODO ) && ( Lothar . aivar [ AIV_ TalkedToPlayer ] ==  FALSE ) && ( Chapter <  3 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_Khorinis_Info()
{
	AI_Output(other,self, " DIA_Xardas_Khorinis_15_00 " );	// How do I get to the city?
	AI_Output(self,other, " DIA_Xardas_Khorinis_14_01 " );	// Just follow the path that leads from here through the mountains. The city is big, you won't miss it.
	AI_Output(self,other, " DIA_Xardas_Khorinis_14_02 " );	// But be careful! The path to the city is full of dangers. And now you're not nearly as strong as you used to be.
};


instance DIA_Xardas_WhereEx(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 6;
	condition = DIA_Xardas_WhereEx_Condition;
	information = DIA_Xardas_WhereEx_Info;
	permanent = FALSE;
	description = " Where exactly are we now? " ;
};


func int DIA_Xardas_WhereEx_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Xardas_FirstEXIT ) && ( Capital <  3 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_WhereEx_Info()
{
	AI_Output(other,self, " DIA_Xardas_Add_15_00 " );	// Where exactly are we now?
	AI_Output(self,other, " DIA_Xardas_Add_14_01 " );	// As I said, not far from the city of Khorinis.
	AI_Output(self,other, " DIA_Xardas_Add_14_02 " );	// I built my tower here.
	AI_Output(other,self, " DIA_Xardas_Add_15_03 " );	// But it's only been a few days since we've been in the Valley of Mines...
	AI_Output(self,other, " DIA_Xardas_Add_14_04 " );	// The servants I called to build my tower did an amazing job...
	AI_Output(other,self, " DIA_Xardas_Add_15_05 " );	// Yes, it looks like it.
};


instance DIA_Xardas_EQUIPMENT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 7;
	condition = DIA_Xardas_EQUIPMENT_Condition;
	information = DIA_Xardas_EQUIPMENT_Info;
	permanent = FALSE;
	description = " Where can I find better equipment? " ;
};


func int DIA_Xardas_EQUIPMENT_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Xardas_FirstEXIT ) && ( Capital <  3 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_EQUIPMENT_Info()
{
	AI_Output(other,self, " DIA_Xardas_EQUIPMENT_15_00 " );	// Where can I find better gear?
	AI_Output(self,other, " DIA_Xardas_EQUIPMENT_14_01 " );	// The nearest place where you can get decent weapons and armor is the city of Khorinis.
	AI_Output(self,other, " DIA_Xardas_EQUIPMENT_14_02 " );	// But down in the valley, you can find healing herbs that will help you if you get hurt in battle.
	AI_Output(self,other, " DIA_Xardas_EQUIPMENT_14_03 " );	// See the lake to the right of my tower? From there, a secret passage leads into the valley.
};


instance DIA_Xardas_ABOUTLESTER(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 5;
	condition = DIA_Xardas_ABOUTLESTER_Condition;
	information = DIA_Xardas_ABOUTLESTER_Info;
	permanent = FALSE;
	description = " Have you spoken to Lester yet? " ;
};


func int DIA_Xardas_ABOUTLESTER_Condition()
{
	if((LesterGoXar == TRUE) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_ABOUTLESTER_Info()
{
	B_GivePlayerXP(XP_Ambient);
	AI_Output(other,self, " DIA_Xardas_ABOUTLESTER_15_00 " );	// Have you spoken to Lester yet?
	AI_Output(self,other, " DIA_Xardas_ABOUTLESTER_14_01 " );	// Yeah, I just bombarded him with questions. He was able to tell me a lot, but he is completely exhausted.
	AI_Output(self,other, " DIA_Xardas_ABOUTLESTER_14_02 " );	// It's almost a miracle that he managed to survive. I sent him to bed.
	AI_Output(other,self, " DIA_Xardas_ABOUTLESTER_15_03 " );	// What did he tell you?
	AI_Output(self,other, " DIA_Xardas_ABOUTLESTER_14_04 " );	// No good, I'm afraid. He saw not only the dragon, but also people in black hooded cloaks.
	AI_Output(other,self,"DIA_Xardas_ABOUTLESTER_15_05");	//?
	AI_Output(self,other, " DIA_Xardas_ABOUTLESTER_14_06 " );	// If these people exist, then their presence poses a certain threat.
	AI_Output(self,other, " DIA_Xardas_ABOUTLESTER_14_07 " );	// And I don't like it. Here, take my ring. It will protect you from magic.
	B_GiveInvItems(self,other,ItRi_Prot_Mage_01,1);
};


DIA_Xardas_FirstPal (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 10;
	condition = DIA_Xardas_FirstPal_Condition;
	information = DIA_Xardas_FirstPal_Info;
	permanent = FALSE;
	description = " I was in the city... " ;
};


func int DIA_Xardas_FirstPal_Condition()
{
	if ((Lothar.aivar[AIV_TalkedToPlayer] ==  TRUE ) && (LordHagen.aivar[AIV_TalkedToPlayer] ==  FALSE ) && (other.guild ==  GIL_NONE ))
	{
		return TRUE;
	};
};

func void DIA_Xardas_FirstPal_Info()
{
	B_GivePlayerXP(XP_Ambient);
	AI_Output(other,self, " DIA_Xardas_FirstPal_15_00 " );	// I was in the city...
	AI_Output(self,other, " DIA_Xardas_FirstPal_14_01 " );	// And? Were you able to speak to the paladin leader?
	AI_Output(other,self, " DIA_Xardas_FirstPal_15_02 " );	// They won't let me in...
	AI_Output(self,other, " DIA_Xardas_FirstPal_14_03 " );	// Nonsense! There must be a way to see him.
	AI_Output(self,other, " DIA_Xardas_FirstPal_14_04 " );	// If all else fails, join a monastery and become a mage.
	AI_Output(self,other, " DIA_Xardas_FirstPal_14_05 " );	// It's probably a morally dubious undertaking, but it will get you what you need.
	AI_Output(self,other, " DIA_Xardas_FirstPal_14_06 " );	// If you're a mage, he'll have to face you.
};


instance DIA_Xardas_Next (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = DIA_Xardas_Next_Condition;
	information = DIA_Xardas_Next_Info;
	permanent = FALSE;
	description = " So what do we do next? " ;
};


func int DIA_Xardas_Next_Condition()
{
	if ( Npc_KnowsInfo ( other , DIA_Xardas_FirstEXIT ) && ( Capital <  3 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_Next_Info()
{
	AI_Output(other,self, " DIA_Xardas_Weiter_15_00 " );	// And what do we do next?
	AI_Output(self,other, " DIA_Xardas_Weiter_14_01 " );	// We must act according to our plan. There is no other way.
	AI_Output(self,other, " DIA_Xardas_Weiter_14_02 " );	// You must get the Eye of Innos, and I will continue to search for answers.
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_KdfSecret(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 9;
	condition = DIA_Xardas_KdfSecret_Condition;
	information = DIA_Xardas_KdfSecret_Info;
	permanent = FALSE;
	description = " Why shouldn't the Circle of Fire know about you? " ;
};


func int DIA_Xardas_KdfSecret_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT))
	{
		return TRUE;
	};
};

func void DIA_Xardas_KdfSecret_Info()
{
	AI_Output(other,self, " DIA_Xardas_KdfSecret_15_00 " );	// Why shouldn't the Circle of Fire know about you?
	AI_Output(self,other, " DIA_Xardas_KdfSecret_14_01 " );	// I was once the highest member of the Circle. Even then, I suspected that demonic magic might be the key to this magical barrier.
	AI_Output(self,other, " DIA_Xardas_KdfSecret_14_02 " );	// But there was no way I could convince the rest of the Circle to follow this path.
	AI_Output(self,other, " DIA_Xardas_KdfSecret_14_03 " );	// That's why I left the Circle to study black magic.
	AI_Output(self,other, " DIA_Xardas_KdfSecret_14_04 " );	// This is a crime that in the eyes of the Fire Mages, (stingingly) 'Initiates of Innos', always so 'Good' and 'Virtuous', will never be justified.
	AI_Output(self,other, " DIA_Xardas_KdfSecret_14_05 " );	// They're sure I'm still alive, but they have no idea where to look for me - which is good.
};


instance DIA_Xardas_KAP3_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP3_EXIT_Condition;
	information = DIA_Xardas_KAP3_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};


func int DIA_Xardas_KAP3_EXIT_Condition()
{
	if (chapter ==  3 )
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP3_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


DIA_Xardas_BACKFROMOW (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 31;
	condition = DIA_Xardas_BACKFROMOW_Condition;
	information = DIA_Xardas_BACKFROMOW_Info;
	description = " I have returned from the Valley of Mines. " ;
};


func int DIA_Xardas_BACKFROMOW_Condition()
{
	if (chapter ==  3 )
	{
		return TRUE;
	};
};

func void DIA_Xardas_BACKFROMOW_Info()
{
	AI_Output(other,self, " DIA_Xardas_BACKFROMOW_15_00 " );	// I've returned from the Valley of Mines.
	AI_Output(self,other, " DIA_Xardas_BACKFROMOW_14_01 " );	// Long overdue. And what did you see there?
	AI_Output(other,self, " DIA_Xardas_BACKFROMOW_15_02 " );	// You were right. Everything is teeming with enemies there, even an apple has nowhere to fall.
	AI_Output(other,self, " DIA_Xardas_BACKFROMOW_15_03 " );	// Orcs besiege the castle, and dragons devastate everything around.
	AI_Output(other,self, " DIA_Xardas_BACKFROMOW_15_04 " );	// It won't be long before they attack Khorinis, if I'm not mistaken.
	B_GivePlayerXP(XP_Ambient);
};


instance DIA_Xardas_DMTSINDDA(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 32;
	condition = DIA_Xardas_DMTSINDDA_Condition;
	information = DIA_Xardas_DMTSINDDA_Info;
	description = " What the hell happened here? " ;
};


func int DIA_Xardas_DMTSINDDA_Condition()
{
	if ((Capital ==  3 ) && Npc_KnowsInfo(other,DIA_Xardas_BACKFROMOW))
	{
		return TRUE;
	};
};

func void DIA_Xardas_DMTSINDDA_Info()
{
	if(Npc_KnowsInfo(other,DIA_Lester_BACKINTOWN))
	{
		AI_Output(other,self, " DIA_Xardas_DMTSINDDA_15_00 " );	// Lester said you wanted to see me as soon as possible.
	};

	AI_Output(other,self, " DIA_Xardas_DMTSINDDA_15_01 " );	// What the hell happened here?
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_14_02 " );	// The enemy has found out who you really are and is planning to take the Eye of Innos.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_14_03 " );	// He recognized this threat. This forced him to come out of the shadows and decide on an open attack.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_14_04 " );	// The game of hide and seek is over. Yesterday no one knew what the enemy's attack would be. But now it's becoming too obvious.
	XarMeetPsi = TRUE;
	B_LogEntry( TOPIC_INNOSEYE , "The enemy now knows I'm looking for the Eye of Innos. I need to find it quickly before it's too late. " );
	Info_ClearChoices(DIA_Xardas_DMTSINDDA);
	Info_AddChoice(DIA_Xardas_DMTSINDDA, " I was attacked by mages in black robes. " ,DIA_Xardas_DMTSINDDA_DMT);
	Info_AddChoice(DIA_Xardas_DMTSINDDA, " I have obtained the proof that Lord Hagen required of me. " ,DIA_Xardas_DMTSINDDA_Beweis);
};

func void DIA_Xardas_DMTSINDDA_DMT()
{
	AI_Output(other,self, " DIA_Xardas_DMTSINDDA_DMT_15_00 " );	// I was attacked by mages in black robes.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_14_01 " );	// The enemy has many faces. The Dark Wanderers are one of them! They are the ones who prepare the foothold for the enemy.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_14_02 " );	// They've taken up positions in strategic places, and now they're just waiting for an opportunity to close the trap.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_14_03 " );	// Stay away from them! They are powerful magicians and they will try to stop you at all costs.

	if(hero.guild == GIL_KDF)
	{
		Log_CreateTopic(TOPIC_DEMENTOREN,LOG_MISSION);
		Log_SetTopicStatus(TOPIC_DEMENTOREN,LOG_Running);
		B_LogEntry( TOPIC_DEMENTOREN , " Xardas knows who these people in black robes are. They are called dark wanderers and they are very dangerous. " );
	};
};

func void DIA_Xardas_DMTSINDDA_proof()
{
	AI_Output(other,self, " DIA_Xardas_DMTSINDDA_Beweis_15_00 " );	// I finally got the proof that Lord Hagen demanded of me.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_Beweis_14_01 " );	// What else is proof?
	AI_Output(other,self, " DIA_Xardas_DMTSINDDA_Beweis_15_02 " );	// I received a letter from Garond, leader of the paladins in the Valley of Mines. In it, he asks for reinforcements.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_Beweis_14_03 " );	// That should be enough to convince a war veteran. Excellent.
	Info_AddChoice(DIA_Xardas_DMTSINDDA, " And what's our next step? " ,DIA_Xardas_DMTSINDDA_DMT_WhatToDo);
	B_GivePlayerXP(XP_Ambient);
};

func void DIA_Xardas_DMTSINDDA_DMT_WhatToDo()
{
	AI_Output(other,self, " DIA_Xardas_DMTSINDDA_DMT_WhatToDo_15_00 " );	// And what's our next step?
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_01 " );	// Go and take the letter from Garond to Lord Hagen, and get him to let you take the Eye of Innos.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_02 " );	// Then go to the monastery and talk to Pirokar. He should give you the Eye.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_03 " );	// Nothing is more important right now than securing this artifact.
	AI_Output(self,other, " DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_04 " );	// Go before it's too late. The enemy will also try to put their paws on him.
	B_LogEntry( TOPIC_INNOSEYE , " The eye is located in the firebenders' monastery. I hope Lord Hagen grants me access to it when I bring him a letter from Lord Garond. Archmage Pyrocar will not allow me to wear this amulet without Hagen's approval. " );
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(PC_Psionic,"XardasTow");
};


instance DIA_Xardas_INNOSEYEBROKEN(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 33;
	condition = DIA_Xardas_INNOSEYEBROKEN_Condition;
	information = DIA_Xardas_INNOSEYEBROKEN_Info;
	description = " Innos ' Eye has been destroyed. " ;
};


func int DIA_Xardas_INNOSEYEBROKEN_Condition()
{
	if ((Capital ==  3 ) && Npc_KnowsInfo(other,DIA_Xardas_DMTSINDDA) && (Npc_HasItems(hero,ItMy_InnosEye_Broken_Mis) >=  1 )) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_INNOSEYEBROKEN_Info()
{
	AI_Output(other,self, " DIA_Xardas_INNOSEYEBROKEN_15_00 " );	// Innos' eye has been destroyed.
	AI_Output(self,other, " DIA_Xardas_INNOSEYEBROKEN_14_01 " );	// What are you talking about? Destroyed!
	AI_Output(other,self, " DIA_Xardas_INNOSEYEBROKEN_15_02 " );	// I found it in the northern forests - unfortunately, I could only find fragments.
	AI_Output(self,other, " DIA_Xardas_INNOSEYEBROKEN_14_03 " );	// This was our only chance to face these dragons. And we failed it!
	MIS_SCKnowsInnosEyeIsBroken = TRUE;
	B_GivePlayerXP(XP_Ambient);
	Info_ClearChoices(DIA_Xardas_INNOSEYEBROKEN);
	Info_AddChoice(DIA_Xardas_INNOSEYEBROKEN, " What now? " ,DIA_Xardas_INNOSEYEBROKEN_wasnun);
};

func void DIA_Xardas_INNOSEYEBROKEN_wasnun()
{
	AI_Output(other,self, " DIA_Xardas_INNOSEYEBROKEN_wasnun_15_00 " );	// And now what?
	AI_Output(self,other, " DIA_Xardas_INNOSEYEBROKEN_wasnun_14_01 " );	// This is a painful blow. We must readjust. I have to retire and weigh everything.
	AI_Output(self,other, " DIA_Xardas_INNOSEYEBROKEN_wasnun_14_02 " );	// In the meantime, you go to the city and talk to Vatras, the Water Mage. Perhaps he knows what to do.
	B_LogEntry( TOPIC_INNOSEYE , " Xardas was not very pleased with the destruction of the Eye of Innos. The water mage Vatras in the city of Khorinis may be our only hope. " );
	MIS_Xardas_GoToVatrasInnoseye = LOG_Running;
};


instance DIA_Xardas_RITUALREQUEST(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 34;
	condition = DIA_Xardas_RITUALREQUEST_Condition;
	information = DIA_Xardas_RITUALREQUEST_Info;
	description = " Vatras sent me to you. " ;
};


func int DIA_Xardas_RITUALREQUEST_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_Running) && Npc_KnowsInfo(other,DIA_Xardas_INNOSEYEBROKEN) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RITUALREQUEST_Info()
{
	AI_Output(other,self, " DIA_Xardas_RITUALREQUEST_15_00 " );	// Vatras sent me to you.
	AI_Output(self,other, " DIA_Xardas_RITUALREQUEST_14_01 " );	// This is good. What did he tell you?
	AI_Output(other,self, " DIA_Xardas_RITUALREQUEST_15_02 " );	// He said something about a reversible fire circle ritual.
	AI_Output(self,other, " DIA_Xardas_RITUALREQUEST_14_03 " );	// Old rascal...(laughs) I already know what he wants to do. You came to invite me to him.
	AI_Output(other,self, " DIA_Xardas_RITUALREQUEST_15_04 " );	// So it is. When will you hit the road?
	if((hero.guild == GIL_KDF) || (hero.guild == GIL_DJG) || (hero.guild == GIL_PAL) || (hero.guild == GIL_GUR) || (hero.guild == GIL_TPL) || (hero.guild == GIL_KDW) || (hero.guild == GIL_KDM))
	{
		AI_Output(self,other, " DIA_Xardas_RITUALREQUEST_14_05 " );	// Don't keep Vatras waiting. I'm leaving immediately. And you must complete your task, and then join me again.
		AI_StopProcessInfos(self);
		B_LogEntry( TOPIC_INNOSEYE , " Xardas has agreed to participate in the ritual in the Circle of the Sun. " );
		B_GivePlayerXP(XP_Ambient);
		Npc_ExchangeRoutine(self,"RitualInnosEyeRepair");
		Xardas_GoesToRitualInnosEye = TRUE;
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_RITUALREQUEST_14_06 " );	// I need to make sure you're ready to fight back against the dragons.
		AI_Output(self,other, " DIA_Xardas_RITUALREQUEST_14_07 " );	// And you don't make that impression yet!
		B_LogEntry( TOPIC_INNOSEYE , " Xardas will not appear at the Circle of the Sun ritual until he is confident that I can handle the dragons. " );
	};
	B_GivePlayerXP(XP_Ambient);
};


instance DIA_Xardas_WHYNOTNOW (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 34;
	condition = DIA_Xardas_WHYNOTNOW_Condition;
	information = DIA_Xardas_WHYNOTNOW_Info;
	description = " Why don't you go meet Vatras RIGHT NOW? " ;
};


func int DIA_Xardas_WHYNOTNOW_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_RITUALREQUEST) && (Xardas_GoesToRitualInnosEye == FALSE) && ((hero.guild == GIL_MIL) || (hero.guild == GIL_SLD) || (hero.guild == GIL_SEK) || (hero.guild == GIL_NDW) || (hero.guild == GIL_NDM)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_WHYNOTNOW_Info()
{
	AI_Output(other,self, " DIA_Xardas_WARUMNICHTJETZT_15_00 " );	// Why don't you go meet Vatras RIGHT NOW?
	AI_Output(other,self, " DIA_Xardas_WARUMNICHTJETZT_15_01 " );	// Sometimes I just don't understand you.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_14_02 " );	// (annoyed) Don't you dare talk to me like that. If not for me, your good-for-nothing body would still rot in this temple.
	Info_AddChoice(DIA_Xardas_WARUMNICHTJETZT, " Don't worry! Just tell me what I need to do. " ,DIA_Xardas_WARUMNICHTJETZT_wastun);
	Info_AddChoice(DIA_Xardas_WARUMNICHTJETZT, " Then at least tell me why you hesitate. " ,DIA_Xardas_WARUMNICHTJETZT_grund);
};

func void DIA_Xardas_WHYNOTNOW_reason()
{
	AI_Output(other,self, " DIA_Xardas_WARUMNICHTJETZT_grund_15_00 " );	// Then at least explain to me why you hesitate.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_grund_14_01 " );	// Ever since I moved away from the Firebenders, I've tried to stay away from them.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_grund_14_02 " );	// And I'm not going to change this habit, unless I really have a choice.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_grund_14_03 " );	// But before I stand before the reproachful eyes of these mages, I first want to make sure that you have any chance against the dragons.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_grund_14_04 " );	// With your miserable gear, though, you won't get very far. Come back when you're strong enough.
	AI_StopProcessInfos(self);
};

func void DIA_Xardas_WHYNOTNOW_wastun()
{
	AI_Output(other,self, " DIA_Xardas_WARUMNICHTJETZT_wastun_15_00 " );	// Don't worry! Just tell me what I need to do.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_wastun_14_01 " );	// You're still too weak to fight dragons. With this gear, you don't stand a chance.
	AI_Output(self,other, " DIA_Xardas_WARUMNICHTJETZT_wastun_14_02 " );	// Don't come back to me until you're completely ready. That's when I'll go and join Vatras.
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_READY (C_Info)
{
	npc = NONE_100_Xardas;
	condition = DIA_Xardas_READY_Condition;
	information = DIA_Xardas_READY_Info;
	description = " I'm ready to fight dragons. " ;
};

func int DIA_Xardas_READY_Condition()
{
	if((Xardas_GoesToRitualInnosEye == FALSE) && Npc_KnowsInfo(other,DIA_Xardas_RITUALREQUEST) && ((hero.guild == GIL_DJG) || (hero.guild == GIL_PAL) || (hero.guild == GIL_TPL) || (hero.guild == GIL_GUR) || (hero.guild == GIL_KDW) || (hero.guild == GIL_KDM) || (hero.guild == GIL_KDF)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_READY_Info()
{
	AI_Output(other,self, " DIA_Xardas_BEREIT_15_00 " );	// I'm ready to fight dragons.
	AI_Output(self,other, " DIA_Xardas_BEREIT_14_01 " );	// Then let's not waste time. I immediately go to the Circle of the Sun. And you complete your tasks. I will meet you there.
	AI_StopProcessInfos(self);
	B_LogEntry( TOPIC_INNOSEYE , " Xardas has agreed to participate in the ritual in the Circle of the Sun. " );
	B_GivePlayerXP(XP_Ambient);
	Npc_ExchangeRoutine(self,"RitualInnosEyeRepair");
	Xardas_GoesToRitualInnosEye = TRUE;
};


instance DIA_Xardas_BINGSPANNT (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 35;
	condition = DIA_Xardas_BINGESPANNT_Condition;
	information = DIA_Xardas_BINGESPANNT_Info;
	permanent = TRUE;
	description = " Will this conversion ritual work? " ;
};


func int DIA_Xardas_BINGESPANNT_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_Running) && (Kapitel == 3) && (Xardas_GoesToRitualInnosEye == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_BINGESPANNT_Info()
{
	AI_Output(other,self, " DIA_Xardas_BINGESPANNT_15_00 " );	// Will this conversion ritual work?
	AI_Output(self,other, " DIA_Xardas_BINGESPANNT_14_01 " );	// I'm not entirely sure. It depends on what exactly Vatras is going to do.
};


instance DIA_Xardas_PYROWILL NOT (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 37;
	condition = DIA_Xardas_PYROWILLNICHT_Condition;
	information = DIA_Xardas_PYROWILLNOT_Info;
	description = " Pyrocar refuses to take part in the ritual. " ;
};


func int DIA_Xardas_PYROWILLNICHT_Condition()
{
	if((Pyrokar_DeniesInnosEyeRitual == TRUE) && Npc_KnowsInfo(other,DIA_Xardas_RITUALREQUEST) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_PYROWILLNOT_Info()
{
	AI_Output(other,self, " DIA_Xardas_PYROWILLNICHT_15_00 " );	// The pyrocar refuses to take part in the ritual.
	AI_Output(other,self, " DIA_Xardas_PYROWILLNICHT_15_01 " );	// First he wants proof that he can trust you.
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_02 " );	// Oh, really! Pyrocar. How interesting.
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_03 " );	// This old weirdo is getting completely unbearable. But I think I have something that will help you.
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_04 " );	// When I left the Order of the Fire Mages, I took a few things with me from the monastery.
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_06 " );	// I didn't want paladins or firebenders to turn my tower upside down and find these things.
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_07 " );	// So I hid them in a safe place where mages would never think to look for them.
	AI_Output(other,self, " DIA_Xardas_PYROWILLNICHT_15_08 " );	// And where is it?
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_09 " );	// Some of them are in a locked chest at Sekoba's farm.
	Sekob_RoomFree = TRUE;
	AI_Output(other,self, " DIA_Xardas_PYROWILLNICHT_15_10 " );	// Do you trust this Sekob?
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_11 " );	// No. But you can buy him and he won't ask stupid questions. Also, this chest is locked. Here is the key.
	CreateInvItems(self,ItKe_CHEST_SEKOB_XARDASBOOK_MIS,1);
	B_GiveInvItems(self,other,ItKe_CHEST_SEKOB_XARDASBOOK_MIS,1);
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_12 " );	// There, among other things, there is a very old book. When Pirokar sees this book, he will understand that it is from me.
	AI_Output(self,other, " DIA_Xardas_PYROWILLNICHT_14_13 " );	// I don't need her anymore. Therefore, let it serve at least such a purpose.
	B_LogEntry( TOPIC_INNOSEYE , " Xardas gave me the key to the chest at Sekoba's farm. I must take the book in it to Pyrokar. " );
};


instance DIA_Xardas_RitualInnosEyeRepairImportant(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 36;
	condition = DIA_Xardas_RitualInnosEyeRepairImportant_Condition;
	information = DIA_Xardas_RitualInnosEyeRepairImportant_Info;
	important = TRUE;
};


func int DIA_Xardas_RitualInnosEyeRepairImportant_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_SUCCESS) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RitualInnosEyeRepairImportant_Info()
{
	AI_Output(self,other, " DIA_Xardas_Add_14_06 " );	// Now that the Eye of Innos has been restored, you must face the dragons!
	AI_Output(self,other, " DIA_Xardas_Add_14_07 " );	// They all serve Beliar, god of darkness.
	AI_Output(self,other, " DIA_Xardas_Add_14_08 " );	// But there must also be an earth power that controls them. Now it has become obvious to me.
	AI_Output(self,other, " DIA_Xardas_Add_14_09 " );	// Find the source of this power.
	AI_Output(self,other, " DIA_Xardas_Add_14_10 " );	// And as soon as you figure it out, come back to me right away!
	Info_ClearChoices(DIA_Xardas_RitualInnosEyeRepairImportant);
	Info_AddChoice(DIA_Xardas_RitualInnosEyeRepairImportant,Dialog_End,DIA_Xardas_RitualInnosEyeRepairImportant_next);
};

func void DIA_Xardas_RitualInnosEyeRepairImportant_next()
{
	AI_StopProcessInfos(self);
	B_StartOtherRoutine(Xardas,"Start");
	B_StartOtherRoutine(Vatras,"Start");
};


DIA_Xardas_WASNUN (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 36;
	condition = DIA_Xardas_WASNUN_Condition;
	information = DIA_Xardas_WASNUN_Info;
	permanent = TRUE;
	description = " The eye of Innos has been restored. What's next? " ;
};


func int DIA_Xardas_WASNUN_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_SUCCESS) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_WASNUN_Info()
{
	AI_Output(other,self, " DIA_Xardas_WASNUN_15_00 " );	// Innos' eye restored. What's next?
	AI_Output(self,other, " DIA_Xardas_WASNUN_14_01 " );	// Don't forget to put it on when you finally face the dragons.
	AI_Output(self,other, " DIA_Xardas_WASNUN_14_04 " );	// And remember that you may need Urizel to fight these darkspawn.
	AI_Output(self,other, " DIA_Xardas_WASNUN_14_05 " );	// The power of this sword is undoubtedly a great help in the work that lies ahead of you.
	AI_Output(self,other, " DIA_Xardas_WASNUN_14_06 " );	// That's all I wanted to tell you.

	if(MIS_ReadyforChapter4 == TRUE)
	{
		AI_Output(self,other, " DIA_Xardas_WASNUN_14_02 " );	// Don't waste time. Go to the Valley of Mines and kill those dragons.
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_WASNUN_14_03 " );	// Go to Pyrokar and have him explain to you how to use the Eye.
	};
};

instance DIA_Xardas_KAP4_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP4_EXIT_Condition;
	information = DIA_Xardas_KAP4_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_KAP4_EXIT_Condition()
{
	if (chapter ==  4 )
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP4_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

DIA_Xardas_PERM4 (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 40;
	condition = DIA_Xardas_PERM4_Condition;
	information = DIA_Xardas_PERM4_Info;
	permanent = TRUE;
	description = " What's new? " ;
};

func int DIA_Xardas_PERM4_Condition()
{
	if (chapter ==  4 )
	{
		return TRUE;
	};
};

func void DIA_Xardas_PERM4_Info()
{
	AI_Output(other,self, " DIA_Xardas_PERM4_15_00 " );	// What's new?
	AI_Output(self,other, " DIA_Xardas_PERM4_14_01 " );	// The dark wanderers haven't left yet! They won't stop until they finish you.
	AI_Output(self,other, " DIA_Xardas_PERM4_14_02 " );	// Kill the dragons in the Valley of Mines and find out who is behind these attacks. Otherwise, their strength will only grow even more.
};

instance DIA_Xardas_KAP5_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP5_EXIT_Condition;
	information = DIA_Xardas_KAP5_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_KAP5_EXIT_Condition()
{
	if (chapter ==  5 )
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP5_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_KAP6_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP6_EXIT_Condition;
	information = DIA_Xardas_KAP6_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_KAP6_EXIT_Condition()
{
	if (chapter ==  6 )
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP6_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_PRETEACH (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_preteach_condition;
	information = dia_xardas_preteach_info;
	description = " Now can I learn Necromancer magic? " ;
};

func int dia_xardas_preteach_condition()
{
	if(hero.guild == GIL_KDM)
	{
		return TRUE;
	};
};

func void dia_xardas_preteach_info()
{
	AI_Output(other,self, " DIA_Xardas_PreTeach_15_00 " );	// Now can I learn necromancer magic?
	AI_Output(self,other, " DIA_Xardas_PreTeach_05_01 " );	// Teaching you how to create runes of dark magic is not a problem. But this will require you to know magic circles.
	AI_Output(self,other, " DIA_Xardas_PreTeach_05_02 " );	// I can teach you this if you have enough experience.
	AI_Output(self,other, " DIA_Xardas_PreTeach_05_03 " );	// Truly, the magic of darkness is one of the most powerful and destructive magics of all that exist in this world.
	AI_Output(self,other, " DIA_Xardas_PreTeach_05_04 " );	// Remember this, and try to use this knowledge wisely!
	XARDAS_TEACHRUNES = TRUE;
	XARDAS_TACHCIRCLE = TRUE ;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry( TOPIC_ADDON_DMTTEACHER , " Xardas will teach me how to create necromancer runes and help me learn magic circles. " );
};


instance DIA_XARDAS_SACTANOME (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_sactanome_condition;
	information = dia_xardas_sactanome_info;
	permanent = FALSE;
	description = " What else can you teach me? " ;
};


func int dia_xardas_sactanome_condition()
{
	if (( hero . guild ==  GIL_KDM ) && Npc_KnowsInfo ( other , dia_xardas_preteach ))
	{
		return TRUE;
	};
};

func void dia_xardas_sactanome_info()
{
	AI_Output(other,self, " DIA_Xardas_SactaNome_01_00 " );	// What else can you teach me?
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_01 " );	// There are many secrets that you did not know.
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_02 " );	// But you must understand that some secret knowledge of dark magic is fraught with great danger.
	AI_Output(other,self, " DIA_Xardas_SactaNome_01_04 " );	// What is this secret knowledge?
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_05 " );	// One of these mysteries is the art of Sakta Nomen!
	AI_Output(other,self, " DIA_Xardas_SactaNome_01_06 " );	// Sakta Nomen?
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_07 " );	// In the language of demons, this means 'Blood Offering', which in itself already reflects the essence of this art.
	AI_Output(other,self, " DIA_Xardas_SactaNome_01_08 " );	// Can you be more specific?
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_09 " );	// Sakta Nomen will allow you to use magical runes and scrolls of dark magic even if you don't have enough mana.
	AI_Output(other,self, " DIA_Xardas_SactaNome_01_10 " );	// But how?
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_11 " );	// Due to your life energy! Each spell cast will take away your strength until your magical energy reserves are restored sufficiently.
	AI_Output(self,other, " DIA_Xardas_SactaNome_01_13 " );	// Therefore, you should use this ability only when circumstances really require it. Otherwise, she can easily kill you!
	AI_Output(other,self, " DIA_Xardas_SactaNome_01_16 " );	// Okay, I got it.
	XARDAS_TEACHSACTANOME = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry( TOPIC_ADDON_DMTTEACHER , " Xardas will teach me the art of Sakta Nomen, which means 'Blood Sacrifice' in demon language. With this ability, I can use dark runes and scrolls at the expense of my life force, in case my magical energy is not enough to cast the spell . " );
};


instance DIA_XARDAS_TEACHSACTANOME(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 998;
	condition = dia_xardas_teachsactanome_condition;
	information = dia_xardas_teachsactanome_info;
	permanent = TRUE;
	description = " Teach me the art of Sakta Nomen! (Exp: 50LP, Cost: 50000 gold) " ;
};


func int dia_xardas_teachsactanome_condition()
{
	if ((hero.guild ==  GIL_KDM ) && ( XARDAS_TEACHSACTANOME  ==  TRUE ) && ( XARDAS_KNOWSSACTANOME  ==  FALSE ))
	{
		return TRUE;
	};
};

func void dia_xardas_teachsactanome_info()
{
	AI_Output(other,self, " DIA_Xardas_TeachSactaNome_01_00 " );	// Teach me the art of Sakta Nomen!
	AI_Output(self,other, " DIA_Xardas_TeachSactaNome_01_01 " );	// Are you really sure about this?
	Info_ClearChoices(dia_xardas_teachsactanome);
	Info_AddChoice(dia_xardas_teachsactanome, " Not yet. " ,dia_xardas_teachsactanome_no);
	Info_AddChoice(dia_xardas_teachsactanome,", .",dia_xardas_teachsactanome_yes);
};

func void dia_xardas_teachsactanome_no()
{
	AI_Output(other,self, " DIA_Xardas_TeachSactaNome_No_01_00 " );	// Not yet.
	AI_Output(self,other, " DIA_Xardas_TeachSactaNome_No_01_01 " );	// Okay, whatever you say.
	Info_ClearChoices(dia_xardas_teachsactanome);
};

func void dia_xardas_teachsactanome_yes()
{
	if((Npc_HasItems(other,ItMi_Gold) >= 50000) && (other.lp >= 50))
	{
		AI_Print(PRINT_SACTANOME);
		Snd_Play("MFX_FEAR_CAST");
		Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
		Wld_PlayEffect("FX_EarthQuake",self,self,0,0,0,FALSE);
		Wld_PlayEffect("SFX_Circle",self,self,0,0,0,FALSE);
		AI_Output(self,other, " DIA_Xardas_TeachSactaNome_Yes_01_01 " );	// Then know the true power of dark magic, and may your sacrifice not be in vain...
		AI_PlayAni(self,"T_PRACTICEMAGIC5");
		AI_Output(self,other, " DIA_Xardas_TeachSactaNome_Yes_01_02 " );	// SAVE SHADAR NOMEN TAR MADAR SATAG!
		AI_PlayAni(self,"T_PRACTICEMAGIC5");
		AI_Output(self,other, " DIA_Xardas_TeachSactaNome_Yes_01_03 " );	// Use the knowledge you have gained wisely, and may the crimson Darkness guide your path!
		other.lp = other.lp - 50;
		RankPoints = RankPoints + 50;
		Npc_RemoveInvItems(other,ItMi_Gold,50000);
		XARDAS_KNOWSSACTANOME = TRUE;
		Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
		B_LogEntry( TOPIC_ADDON_DMTTEACHER , " I have learned the art of Sakta Nomen. " );
		Info_ClearChoices(dia_xardas_teachsactanome);
		Info_ClearChoices(dia_xardas_teachsactanome);
	}
	else if(other.lp < 50)
	{
		AI_Output(self,other, " DIA_Xardas_TeachSactaNome_01_05 " );	// You're not ready to master this knowledge yet!
		Info_ClearChoices(dia_xardas_teachsactanome);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_TeachSactaNome_01_08 " );	// You don't have enough gold!
		Info_ClearChoices(dia_xardas_teachsactanome);
	};
};


instance DIA_XARDAS_EXPLAINCIRCLES(C_Info)
{
	npc = NONE_100_Xardas;
	condition = dia_xardas_explaincircles_condition;
	information = dia_xardas_explaincircles_info;
	permanent = FALSE;
	description = " Explain to me what is the meaning of Magic Circles? " ;
};


func int dia_xardas_explaincircles_condition()
{
	if (( hero . guild ==  GIL_KDM ) && Npc_KnowsInfo ( other , dia_xardas_preteach ))
	{
		return TRUE;
	};
};

func void dia_xardas_explaincircles_info()
{
	AI_Output(other,self, " DIA_Xardas_EXPLAINCIRCLES_Info_15_01 " );	// Explain to me what the meaning of magic circles is?
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_02 " );	// Circles represent your understanding of magic.
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_03 " );	// They indicate your level of knowledge and ability to learn new spells.
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_04 " );	// Before you can enter the next Circle, you must fully master the previous one.
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_05 " );	// It will take long hours of study and a lot more experience to reach the higher Circles.
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_06 " );	// But every time your efforts will be rewarded with new powerful spells of Darkness.
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_07 " );	// They will become part of your life and will always be with you. Make them part of you.
	AI_Output(self,other, " DIA_Xardas_EXPLAINCIRCLES_Info_14_08 " );	// Know yourself - and you will discover the immeasurable power of dark magic!
	EXPLAINCIRCLEMEAN = TRUE;
};


instance DIA_XARDAS_RUNEN (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_runen_condition;
	information = dia_xardas_runes_info;
	permanent = TRUE;
	description = " Teach me how to make runes. " ;
};


func int dia_xardas_runen_condition()
{
	if(XARDAS_TEACHRUNES == TRUE)
	{
		return TRUE;
	};
};

func void dia_xardas_runes_info()
{
	AI_Output(other,self, " DIA_Parlan_TEACH_15_00 " );	// Train me!
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);
	if((Npc_GetTalentSkill(other,NPC_TALENT_DEMONOLOG) == 1) && (PLAYER_TALENT_RUNES[SPL_SummonDemon] == FALSE))
	{
		Info_AddChoice(dia_xardas_runen, " Demonologist Rune " , dia_xardas_runen_dem);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 6)
	{
		Info_AddChoice(dia_xardas_runen, " 6 Circle of Magic " ,dia_xardas_runen_6);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 5)
	{
		Info_AddChoice(dia_xardas_runen, " 5 Circle of Magic " ,dia_xardas_runen_5);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 4)
	{
		Info_AddChoice(dia_xardas_runen, " 4 Circle of Magic " ,dia_xardas_runen_4);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 3)
	{
		Info_AddChoice(dia_xardas_runen, " 3 Circle of Magic " ,dia_xardas_runen_3);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 2)
	{
		Info_AddChoice(dia_xardas_runen, " 2 Circle of Magic " ,dia_xardas_runen_2);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 1)
	{
		Info_AddChoice(dia_xardas_runen, " 1 Circle of Magic " ,dia_xardas_runen_1);
	};
};

func void dia_xardas_runes_back()
{
	Info_ClearChoices(dia_xardas_runen);
};

func void dia_xardas_runen_dem()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);
	if((PLAYER_TALENT_RUNES[SPL_SummonDemon] == FALSE) && (XARDASTEACHCASTDEMON == TRUE))
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonDemon,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonDemon)),dia_xardas_runen_circle_4_spl_summondemon);
	};
};

func void dia_xardas_runen_1()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);

	if(PLAYER_TALENT_RUNES[SPL_Deathbolt] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Deathbolt,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Deathbolt)),dia_xardas_runen_circle_1_spl_deathbolt);
	};
	if(PLAYER_TALENT_RUNES[SPL_SummonGoblinSkeleton] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonGoblinSkeleton,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonGoblinSkeleton)),dia_xardas_runen_circle_1_spl_summongoblinskeleton);
	};
	if(PLAYER_TALENT_RUNES[SPL_Rage] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Rage,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Rage)),dia_xardas_runen_circle_1_spl_Rage);
	};
};

func void dia_xardas_runen_2()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);

	if(PLAYER_TALENT_RUNES[SPL_ManaForLife] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_ManaForLife,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_ManaForLife)),dia_xardas_runen_circle_2_spl_suckenergy);
	};
	if(PLAYER_TALENT_RUNES[SPL_SummonZombie] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonZombie,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonZombie)),dia_xardas_runen_circle_2_spl_summonzombie);
	};
	if(PLAYER_TALENT_RUNES[SPL_Lacerate] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Lacerate,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Lacerate)),dia_xardas_runen_circle_2_spl_Lacerate);
	};
};

func void dia_xardas_runen_3()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);

	if(PLAYER_TALENT_RUNES[SPL_Swarm] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Swarm,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Swarm)),dia_xardas_runen_circle_3_spl_swarm);
	};
	if(PLAYER_TALENT_RUNES[SPL_SummonSkeleton] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonSkeleton,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonSkeleton)),dia_xardas_runen_circle_3_spl_summonskeleton);
	};
	if(PLAYER_TALENT_RUNES[SPL_Energyball] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_BeliarsRage,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Energyball)),dia_xardas_runen_circle_3_spl_energyball);
	};
};

func void dia_xardas_runen_4()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);

	if(PLAYER_TALENT_RUNES[SPL_Deathball] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Deathball,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Deathball)),dia_xardas_runen_circle_4_spl_deathball);
	};
};

func void dia_xardas_runen_5()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);

	if(PLAYER_TALENT_RUNES[SPL_ArmyOfDarkness] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_ArmyOfDarkness,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_ArmyOfDarkness)),dia_xardas_runen_circle_5_spl_armyofdarkness);
	};
};

func void dia_xardas_runen_6()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runes,Dialog_Back,dia_xardas_runes_back);

	if(PLAYER_TALENT_RUNES[SPL_MassDeath] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(" ",B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_MassDeath)),dia_xardas_runen_circle_6_spl_massdeath);
	};
	if(PLAYER_TALENT_RUNES[SPL_Skull] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Skull,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Skull)),dia_xardas_runen_circle_6_spl_skull);
	};
};

func void dia_xardas_runen_circle_1_spl_Rage()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Rage);
};

func void dia_xardas_runen_circle_2_spl_Lacerate()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Lacerate);
};

func void dia_xardas_runen_circle_1_spl_deathbolt()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Deathbolt);
};

func void dia_xardas_runen_circle_1_spl_summongoblinskeleton()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonGoblinSkeleton);
};

func void dia_xardas_runen_circle_2_spl_suckenergy()
{
	B_TeachPlayerTalentRunes(self,other,SPL_ManaForLife);
};

func void dia_xardas_runen_circle_2_spl_summonzombie()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonZombie);
};

func void dia_xardas_runen_circle_3_spl_swarm()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Swarm);
};

func void dia_xardas_runen_circle_3_spl_summonskeleton()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonSkeleton);
};

func void dia_xardas_runen_circle_3_spl_energyball()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Energyball);
};

func void dia_xardas_runen_circle_4_spl_summondemon()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonDemon);
};

func void dia_xardas_runen_circle_4_spl_deathball()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Deathball);
};

func void dia_xardas_runen_circle_5_spl_armyofdarkness()
{
	B_TeachPlayerTalentRunes(self,other,SPL_ArmyOfDarkness);
};

func void dia_xardas_runen_circle_6_spl_massdeath()
{
	B_TeachPlayerTalentRunes(self,other,SPL_MassDeath);
};

func void dia_xardas_runen_circle_6_spl_skull()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Skull);
};


var int dia_xardas_trade_onetime;

instances of DIA_XARDAS_CANTRADE (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_cantrade_condition;
	information = dia_xardas_cantrade_info;
	permanent = FALSE;
	description = " Where can I get Shadow Spell Scrolls? " ;
};


func int dia_xardas_cantrade_condition()
{
	if((XARDAS_TEACHRUNES == TRUE) && (DIA_XARDAS_TRADE_ONETIME == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_cantrade_info()
{
	DIA_XARDAS_TRADE_ONETIME = TRUE;
	AI_Output(other,self, " DIA_Xardas_CanTrade_01_01 " );	// Where can I get the scrolls of dark magic spells?
	AI_Output(self,other, " DIA_Xardas_CanTrade_01_02 " );	// Good question... You really need magic scrolls to make some runes.
	AI_Output(self,other, " DIA_Xardas_CanTrade_01_03 " );	// Some of them you might not be able to find from other mages or merchants.
	AI_Output(self,other, " DIA_Xardas_CanTrade_01_04 " );	// But I still have a few rare instances left.
};


instance DIA_XARDAS_TRADE (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_trade_condition;
	information = dia_xardas_trade_info;
	trade = TRUE;
	permanent = TRUE;
	description = " Show me your magical scrolls. " ;
};


func int dia_xardas_trade_condition()
{
	if((XARDAS_TEACHRUNES == TRUE) && (DIA_XARDAS_TRADE_ONETIME == TRUE))
	{
		return TRUE;
	};
	if((CHOOSEDARK == TRUE) && ((hero.guild == GIL_KDF) || (hero.guild == GIL_KDW) || (hero.guild == GIL_KDM) || (hero.guild == GIL_GUR)))
	{
		return TRUE;
	};
};

func void dia_xardas_trade_info()
{
	AI_Output(other,self, " DIA_Xardas_Trade_01_01 " );	// Show me your magical scrolls.
	B_GiveTradeInv(self);
};


instance DIA_XARDAS_CIRCLE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_circle_condition;
	information = dia_xardas_circle_info;
	permanent = TRUE;
	description = " I want to learn the essence of magic. " ;
};

func int dia_xardas_circle_condition()
{
	if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) <= 6) && (XARDAS_TEACHCIRCLE == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_circle_info()
{
	AI_Output(other,self, " DIA_Xardas_CIRCLE_15_00 " );	// I want to understand the essence of magic.
	Info_ClearChoices(DIA_Xardas_CIRCLE);
	Info_AddChoice(DIA_Xardas_CIRCLE,Dialog_Back,DIA_Xardas_CIRCLE_Back);

	if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) < 1) && (Kapitel >= 1))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE, " 1 Circle of Magic (Training Points: 20) " ,DIA_Xardas_CIRCLE_1);
	}
	else if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) == 1) && (Kapitel >= 2))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE, " 2 Circle of Magic (Training Points: 30) " ,DIA_Xardas_CIRCLE_2);
	}
	else if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) == 2) && (Kapitel >= 3))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE, " 3 Circle of Magic (Training Points: 40) " ,DIA_Xardas_CIRCLE_3);
	}
	else if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) == 3) && (MIS_ReadyforChapter4 == TRUE))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE, " 4 Circle of Magic (Training Points: 60) " ,DIA_Xardas_CIRCLE_4);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_31 " );	// It's not time yet! Come back later.
	};
};

func void DIA_Xardas_CIRCLE_Back()
{
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_1()
{
	if(B_TeachMagicCircle(self,other,1))
	{
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_01 " );	// By joining the First Circle, you will learn how to use magical runes.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_02 " );	// Each rune contains the structure of a special magic spell.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_03 " );	// By using your own magical power, you can release the rune's magic.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_04 " );	// But unlike scrolls, which are essentially magic formulas, rune magic maintains the structure of the spell at all times.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_05 " );	// Each rune contains a magical power that you can take away at any time.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_06 " );	// Just like with the scroll, the moment you use a rune, your own magic power is consumed.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_07 " );	// With each new Circle you will learn more and more about runes.
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_2()
{
	if(B_TeachMagicCircle(self,other,2))
	{
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_09 " );	// You've already learned to understand runes. It's time to deepen your knowledge.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_10 " );	// As you enter the Second Circle, you will learn the basics of more powerful spells.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_11 " );	// But in order to know the true secrets of magic, you have a lot to learn.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_12 " );	// You already know that you can use any rune countless times, but only until you use up your own magic power.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_13 " );	// But before you do anything, think about whether it makes sense. You have the power to sow death and destruction with ease.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_14 " );	// But a true magician uses it only when necessary.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_15 " );	// Learn to assess the situation, and you will know the true power of the runes.
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_3()
{
	if(B_TeachMagicCircle(self,other,3))
	{
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_16 " );	// The Third Circle is one of the most important stages in the life of every magician. When you reach it, you complete your search.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_17 " );	// You have already crossed a significant stage on the path of magic. You have learned how to use runes.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_18 " );	// This knowledge will serve as the basis for the next step. Use runes carefully.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_19 " );	// You can use them or not. But you must make a choice.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_20 " );	// Once you've made your choice, use your power without hesitation.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_21 " );	// Find your way, and then you will know the power of decision.
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_4()
{
	if(B_TeachMagicCircle(self,other,4))
	{
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_22 " );	// You have completed the first three Circles. It's time for you to learn the secrets of magic.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_23 " );	// The basis of rune magic is stone. A magical stone mined from magical ore.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_24 " );	// This is the same ore that is mined in the mines. In the temples, she is endowed with magical formulas, and there the runes turn into tools of our power.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_25 " );	// You now have all the knowledge that the temples have accumulated.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_27 " );	// Learn magic and you will discover the secret of power.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_28 " );	// And one more thing. Entering the fourth circle of magic - you are honored to wear the vestments of higher dark magicians.
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_29 " );	// Few have been able to do this. Now you are one of the chosen ones of the God of Darkness!
		AI_Output(self,other, " DIA_Xardas_CIRCLE_14_30 " );	// Here, take this robe and magical staff in recognition of your status.
		CreateInvItems(other,ItMW_Addon_Stab03,1);
		CreateInvItems(self,itar_dmt_h,1);
		B_GiveInvItems(self,other,itar_dmt_h,1);
		NEKR_H_ROBA = TRUE ;
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

DIA_XARDAS_PRETEACH_MANA (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_preteach_mana_condition;
	information = dia_xardas_preteach_mana_info;
	permanent = FALSE;
	description = " Can you help me increase my magic power? " ;
};

func int dia_xardas_preteach_mana_condition()
{
	if ((other.guild ==  GIL_KDM ) && Npc_KnowsInfo(other,dia_xardas_preteach))
	{
		return TRUE;
	};
};

func void dia_xardas_preteach_mana_info()
{
	AI_Output(other,self, " DIA_Xardas_PreTeach_Mana_15_00 " );	// Can you increase magic power?
	AI_Output(self,other, " DIA_Xardas_PreTeach_Mana_05_01 " );	// Naturally. But you should know something about it.
	AI_Output(self,other, " DIA_Xardas_PreTeach_Mana_05_03 " );	// Magical energy or, more simply, mana is a fundamental moment for any magician or wizard.
	AI_Output(self,other, " DIA_Xardas_PreTeach_Mana_05_04 " );	// We use it to cast magical spells using the power of runes. But it is not unlimited!
	AI_Output(self,other, " DIA_Xardas_PreTeach_Mana_05_05 " );	// Therefore, you must understand that in addition to increasing your magical abilities, you must also learn how to use magical energy wisely and only when necessary.
	AI_Output(self,other, " DIA_Xardas_PreTeach_Mana_05_06 " );	// Only then can you become a truly great mage of Darkness!
	XARDAS_TEACHMANA = TRUE;
};

DIA_XARDAS_TEACH_MANA (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 10;
	condition = dia_xardas_teach_mana_condition;
	information = dia_xardas_teach_mana_info;
	permanent = TRUE;
	description = " I want to increase my magical energy. " ;
};

func int dia_xardas_teach_mana_condition()
{
	if((other.guild == GIL_KDM) && (XARDAS_TEACHMANA == TRUE) && ((other.attribute[ATR_MANA_MAX] < T_MEGA) || (VATRAS_TEACHREGENMANA == FALSE))) 
	{
		return TRUE;
	};
};

func void dia_xardas_teach_mana_info()
{
	AI_Output(other,self, " DIA_Xardas_TEACH_MANA_15_00 " );	// I want to increase my magical energy.
	AI_Output(self,other, " DIA_Xardas_TEACH_MANA_15_01 " );	// I can help you with this. How you use it is up to you.
	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);

	if ((Chapter >=  2 ) && ( BACK_TEACREGEN  ==  FALSE ))
	{
		Info_AddChoice(DIA_Xardas_TEACH_MANA, " Mana Regen (Training Points: 15) " ,DIA_Xardas_TEACH_MANA_Regen);
	};
};

func void dia_xardas_teach_mana_back()
{
	if(other.attribute[ATR_MANA_MAX] >= T_MEGA)
	{
		AI_Output(self,other, " DIA_Xardas_TEACH_MANA_05_00 " );	// I can't help you with this anymore.
		AI_Output(self,other, " DIA_Xardas_TEACH_MANA_05_01 " );	// You're at your limits!
	};

	Info_ClearChoices(dia_xardas_teach_mana);
};

func void DIA_Xardas_TEACH_MANA_Rain()
{
	var int cost;
	var int money;

	AI_Output(other,self, " DIA_Vatras_Teach_regen_15_05 " );	// Teach me mana regeneration.

	cost = 15 ;

	if(hero.lp < kosten)
	{
		AI_Print(PRINT_NotEnoughLearnPoints);
		AI_StopProcessInfos(self);
	}
	else
	{
		hero.lp = hero.lp - kosten;
		RankPoints = RankPoints + cost;
		AI_Print( " Training: Mana Regeneration " );
		VATRAS_TEACHREGENMANA = TRUE ;
		Snd_Play("LevelUP");
	};

	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);
};

func void dia_xardas_teach_mana_1()
{
	B_TeachAttributePoints(self,other,ATR_MANA_MAX,1,T_MEGA);
	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);

	if ((Chapter >=  2 ) && (hero.guild ==  GIL_KDM ) && ( BACK_TEACHREGENMANA  ==  FALSE ))
	{
		Info_AddChoice(DIA_Xardas_TEACH_MANA, " Mana Regen (Training Points: 20) " ,DIA_Xardas_TEACH_MANA_Regen);
	};
};

func void dia_xardas_teach_mana_5()
{
	B_TeachAttributePoints(self,other,ATR_MANA_MAX,5,T_MEGA);
	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);

	if ((Chapter >=  2 ) && (hero.guild ==  GIL_KDM ) && ( BACK_TEACHREGENMANA  ==  FALSE ))
	{
		Info_AddChoice(DIA_Xardas_TEACH_MANA, " Mana Regen (Training Points: 20) " ,DIA_Xardas_TEACH_MANA_Regen);
	};
};


instance DIA_XARDAS_TELLABOUTKREOL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_tellaboutkreol_condition;
	information = dia_xardas_tellaboutkreol_info;
	permanent = FALSE;
	description = " Do you know Lang's Demon language? " ;
};


func int dia_xardas_tellaboutkreol_condition()
{
	if(Npc_KnowsInfo(other,dmt_1214_tegon_hello))
	{
		return TRUE;
	};
};

func void dia_xardas_tellaboutkreol_info()
{
	AI_Output(other,self, " DIA_Xardas_TellAboutKreol_01_00 " );	// Do you know Lang's Demon language?
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_01 " );	// WHAT? How did you know about this ancient language?
	AI_Output(other,self, " DIA_Xardas_TellAboutKreol_01_02 " );	// Guardian Tegon said that...
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_03 " );	// (interrupting) You don't have to continue! Everything became clear to me...
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_04 " );	// If I understand correctly, in order to pass the keeper's test, you need to learn this language.
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_05 " );	// And he probably also asked you to familiarize yourself with the ancient records that are here in the upper hall of my tower.
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_06 " );	// You might even think that I can teach it to you...
	AI_Output(other,self, " DIA_Xardas_TellAboutKreol_01_07 " );	// That's what I wanted to ask you.
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_08 " );	// Alas, I can't do it. My knowledge of Lang's demon language is very meager and unlikely to help you in your trial.
	AI_Output(other,self, " DIA_Xardas_TellAboutKreol_01_11 " );	// But the Keeper said you'd help me solve this problem!
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_12 " );	// But he didn't say that I'll be the one to teach you this language. You need to find someone who perfectly owns this knowledge!
	AI_Output(other,self, " DIA_Xardas_TellAboutKreol_01_15 " );	// And do you have someone in mind?
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_18 " );	// Yes. His name is Creole... He is a necromancer and a very powerful sorcerer. In terms of strength, he will not yield even to the Guardians!
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_19 " );	// Creole is a true follower of the Dark God, and he can even be called one of Beliar's chosen ones!
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_22 " );	// However, he won't teach you without a good reason. You will have to impress him.
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_23 " );	// I can't tell you exactly how, but I'm sure it won't be easy.
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_24 " );	// Creole has a very cool temper, so try to be nice to him. Otherwise, he will easily make something completely indecent out of you ... (laughs)
	AI_Output(other,self, " DIA_Xardas_TellAboutKreol_01_25 " );	// Where can I find this... Creole?
	AI_Output(self,other, " DIA_Xardas_TellAboutKreol_01_26 " );	// It seems that not so long ago he settled somewhere in the Valley of Mines. Try to start looking for him there.
	XARDASTELLABOUTKREOL = TRUE;
	Log_CreateTopic(TOPIC_FINDKREOL,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_FINDKREOL,LOG_Running);
	MIS_FINDKREOL = LOG_Running;
	B_LogEntry( TOPIC_FINDKREOL , " Xardas told me about the powerful necromancer Kreol. It seems that only he can teach me the language of demons. Xardas believes that Kreol found his home somewhere in the Valley of Mines. " );
	Log_AddEntry( TOPIC_FINDKREOL , " Xardas also warned that Creole has a very tough temper. I should be nicer to him if I meet him - otherwise it could end very badly for me. " );
};


instance DIA_XARDAS_TELLABOUTRESURECT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_tellaboutresurect_condition;
	information = dia_xardas_tellaboutresurect_info;
	permanent = TRUE;
	description = " I have one question. " ;
};

func int dia_xardas_tellaboutresurect_condition()
{
	if (( MIS_VIPERNUGGETS  == LOG_Running) && (Npc_HasItems(other,itat_skeletonbonealef) >=  1 ) && (AlefRitualTell ==  FALSE )) ;
	{
		return TRUE;
	};
};

func void dia_xardas_tellaboutresurect_info()
{
	AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_00 " );	// I have one question.

	if(Wld_IsTime(9,0,21,0) == TRUE)
	{
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_01 " );	// Well, then ask if there is.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_02 " );	// Hmm... Xardas, you are a necromancer and master the art of summoning the dead.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_03 " );	// Any necromancer has this ability. Wait, and why should I tell you about this?
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_04 " );	// I need to talk to one person and beat some information out of him.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_05 " );	// But the problem is that this person has long been dead.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_07 " );	// And what do you want from me?
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_08 " );	// Is there any way you can bring him back to life so I can talk to him?
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_09 " );	// Nonsense! No one can revive an already dead person, not even a necromancer.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_11 " );	// I can turn his rotten flesh into a zombie servant. But I'm afraid you won't get anything out of it.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_12 " );	// There's not much left of his flesh now, just a couple of bones.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_13 " );	// A couple of bones, you say?
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_17 " );	// There is one ritual - the ritual of summoning the soul of the deceased. It is not the easiest, very dangerous and will require a lot of magical energy.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_18 " );	// But if you really really need it...
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_20 " );	// Hmmm... well, good! But in order to carry out this ritual, I need one thing.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_21 " );	// Which one?
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_22 " );	// I need the remains of the one whose soul we will summon. The same bones will do!
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_23 " );	// Just don't bring the whole skeleton here! One small bone is enough for me.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_25 " );	// I've already grabbed one copy just in case.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_26 " );	// Yes? Hmmm... and you are prudent! Show her to me.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_27 " );	// Here, take this.
		B_GiveInvItems(other,self,itat_skeletonbonealef,1);
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_29 " );	// Now can we start the ritual?
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_30 " );	// Yes, of course. But I want to warn you right away: this ritual, so to speak, has some very unpleasant side effects.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_32 " );	// First, you'll only have five minutes to talk to your soul. After that, she will become free from the spell's spell.
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_33 " );	// And if she refuses to talk to me, let alone answer my questions?
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_34 " );	// She will not be able to do this - otherwise she will never know peace anywhere else. So feel free to ask your questions!
		AI_Output(other,self, " DIA_Xardas_TellAboutResurect_01_35 " );	// And secondly? What will happen after that?
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_36 " );	// I think the summoned soul will not be very happy to be disturbed and will probably try to kill the person who dared to disturb her peace.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_46 " );	// Therefore, think carefully before you decide to implement what you have planned.
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_47 " );	// So what do you say?
		AlefRitualTell = TRUE;
		B_LogEntry( TOPIC_VIPERNUGGETS , " It turned out not to be as bad as I thought. Xardas is ready to help me by performing a soul summoning ritual and summoning the soul of Aleph to our world. He also warned me that this is a very dangerous ritual. I will only have five minutes, to ask the soul questions that interest me - after that I will lose control over the soul. And then it will try to kill me. " );
		Info_ClearChoices(dia_xardas_tellaboutresurect);
		Info_AddChoice(dia_xardas_tellaboutresurect, " No. Wait a minute! " ,dia_xardas_tellaboutresurect_answer1);
		Info_AddChoice(dia_xardas_tellaboutresurect, " Let's start the ritual! " ,dia_xardas_tellaboutresurect_answer2);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_TellAboutResurect_01_99 " );	// All questions tomorrow! Now I'm tired and I want to rest...
		AI_StopProcessInfos(self);
	};
};

func void dia_xardas_tellaboutresurect_answer1()
{
	AI_Output(other,self, " DIA_Xardas_TellAboutResurect_Answer1_01_00 " );	// No. Wait a minute!
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer1_01_01 " );	// Good. As you say.
	Info_ClearChoices(dia_xardas_tellaboutresurect);
};

func void dia_xardas_tellaboutresurect_answer2()
{
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer2_01_0A " );	// Then let's not waste time!
	AI_SetWalkMode(self,NPC_WALK);
	AI_GotoWP(self,"NW_XARDAS_ALEFCAST");
	AI_AlignToWP(self);
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer2_01_00 " );	// In the name of the Dark God, I call upon you...
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer2_01_01 " );	// Retreat light... Come darkness!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer2_01_02 " );	// Pave the way... Let the Soul pass!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC3");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer2_01_03 " );	// SHAKAN TAR MADAR! Come to my call...!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC2");
	AI_TurnToNPC(self,other);
	Info_ClearChoices(dia_xardas_tellaboutresurect);
	Info_AddChoice(dia_xardas_tellaboutresurect,"...",dia_xardas_tellaboutresurect_answer3);
};

func void dia_xardas_tellaboutresurect_answer3()
{
	Snd_Play("MFX_FEAR_CAST");
	Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
	Wld_PlayEffect("FX_EarthQuake",self,self,0,0,0,FALSE);
	Wld_PlayEffect("SFX_Circle",self,self,0,0,0,FALSE);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer3_01_00 " );	// That's it! The soul is already here.
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer3_01_01 " );	// Remember what I told you and don't waste your time.
	Wld_InsertNpc(alef_soul,"NW_XARDAS_SOUL");
	ALEFRESURECTRITUAL = TRUE;
	Info_ClearChoices(dia_xardas_tellaboutresurect);
	Info_AddChoice(dia_xardas_tellaboutresurect, " . " ,dia_xardas_tellaboutresurect_answer5);
};

func void dia_xardas_tellaboutresurect_answer5()
{
	AI_Output(other,self,"DIA_Xardas_TellAboutResurect_Answer5_01_00");	//.
	AI_Output(self,other, " DIA_Xardas_TellAboutResurect_Answer5_01_01 " );	// (weakens) Hurry up...
	AI_Output(other,self, " DIA_Xardas_TellAboutResurect_Answer5_01_02 " );	// What's wrong with you?!
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer5_01_03");	//... ...
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"DRAINED");
};


instance DIA_XARDAS_RESURECTALEF (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_resurectalef_condition;
	information = dia_xardas_resurectalef_info;
	permanent = TRUE;
	description = " I'm ready to perform the ritual. " ;
};

func int dia_xardas_resurectalef_condition()
{
	if((AlefRitualTell == TRUE) && (ALEFRESURECTRITUAL == FALSE) && (MIS_VIPERNUGGETS == LOG_Running))
	{
		return TRUE;
	};
};

func void dia_xardas_resurectalef_info()
{
	AI_Output(other,self, " DIA_Xardas_ResurectAlef_01_00 " );	// About the ritual...

	if(Wld_IsTime(9,0,21,0) == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_ResurectAlef_01_01");	//?
		AI_Output(other,self, " DIA_Xardas_ResurectAlef_01_02 " );	// Let's call this soul. I'm ready.
		AI_Output(self,other, " DIA_Xardas_ResurectAlef_01_03 " );	// Are you sure about this?
		Info_ClearChoices(dia_xardas_tellaboutresurect);
		Info_AddChoice(dia_xardas_resurectalef, " No. I changed my mind! " ,dia_xardas_resurectalef_answer1);
		Info_AddChoice(dia_xardas_resurrectalef, " Yes, you! " ,dia_xardas_resurrectalef_answer2);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_ResurectAlef_01_99 " );	// Let's talk about it tomorrow! Now I want to rest...
		AI_StopProcessInfos(self);
	};
};

func void dia_xardas_resurectalef_answer1()
{
	AI_Output(other,self, " DIA_Xardas_ResurectAlef_Answer1_01_00 " );	// Wait. I'm not ready yet!
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer1_01_01 " );	// Good. As you say.
	Info_ClearChoices(dia_xardas_resurectalef);
};

func void dia_xardas_resurectalef_answer2()
{
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer2_01_0A " );	// Then let's not waste time!
	AI_SetWalkMode(self,NPC_WALK);
	AI_GotoWP(self,"NW_XARDAS_ALEFCAST");
	AI_AlignToWP(self);
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer2_01_00 " );	// In the name of the Dark God, I call upon you...
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer2_01_01 " );	// Retreat light... Come darkness!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer2_01_02 " );	// Pave the way... Let the Soul pass!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC3");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer2_01_03 " );	// SHAKAN TAR MADAR! Come to my call...!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC2");
	AI_UseMob(self,"BOOK",-1);
	AI_TurnToNPC(self,other);
	Info_ClearChoices(dia_xardas_resurectalef);
	Info_AddChoice(dia_xardas_resurectalef, " ... " ,dia_xardas_resurectalef_answer3);
};

func void dia_xardas_resurectalef_answer3()
{
	Snd_Play("MFX_FEAR_CAST");
	Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
	Wld_PlayEffect("FX_EarthQuake",self,self,0,0,0,FALSE);
	Wld_PlayEffect("SFX_Circle",self,self,0,0,0,FALSE);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer3_01_00 " );	// That's it! The soul is already here.
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer3_01_01 " );	// Remember what I told you and don't waste your time.
	Wld_InsertNpc(alef_soul,"NW_XARDAS_SOUL");
	ALEFRESURECTRITUAL = TRUE;
	Info_ClearChoices(dia_xardas_resurectalef);
	Info_AddChoice(dia_xardas_resurectalef, " . " ,dia_xardas_resurectalef_answer4);
};

func void dia_xardas_resurectalef_answer4()
{
	AI_Output(other, self, " DIA_Xardas_ResurectAlef_Answer4_01_00 " );	// Good
	AI_Output(self,other, " DIA_Xardas_ResurectAlef_Answer4_01_01 " );	// (weakens) Hurry up...
	AI_Output(other,self, " DIA_Xardas_ResurectAlef_Answer4_01_02 " );	// What's wrong with you?!
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer4_01_03");	//... ...
	Npc_ExchangeRoutine(self,"DRAINED");
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_FINDDARKSOUL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_finddarksoul_condition;
	information = dia_xardas_finddarksoul_info;
	permanent = FALSE;
	description = " Do the words of Mora Ulartu mean anything to you? " ;
};


func int dia_xardas_finddarksoul_condition()
{
	if((TASKFINDDARKSOUL == TRUE) && (MIS_GOLDDRAGONPORTAL == LOG_Running) && (TELLABOUTDS == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_finddarksoul_info()
{
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_00 " );	// Do Mora Ulartu's words mean anything to you?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_01 " );	// Hmmm... You never cease to amaze me... how did you know about this?
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_02 " );	// It's not that important, trust me. Can you tell me about this spell?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_03 " );	// Hmm... (surprised) Well, I don't know much myself, but I'll try to briefly explain its essence to you...
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_05 " );	// As far as I know Mora Ulartu is a very ancient powerful spell. It is sometimes also called the Dungeon of Souls.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_06 " );	// It came from those time immemorial, when humanity was just beginning its journey in this world.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_07 " );	// It is not known exactly how this spell got into this world, but, apparently, Beliar himself had a hand in this!
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_08 " );	// I don't think I need to explain to you why this spell is needed - its name speaks for itself.
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_09 " );	// Tell me, how can I get Mora Ulartu?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_10 " );	// (surprised) Why are you doing this?
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_14 " );	// I need this spell to capture the soul of one demon.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_15 " );	// Ha! How long have you been into demon hunting? (laughs) This is, you know, extremely dangerous business!
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_17 " );	// Well, if you really want to mess with it - be your way.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_18 " );	// True, I'm afraid my help will not be so significant in this matter. I will say right away - I do not have this spell.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_19 " );	// But maybe I can give you a hint where you should start looking.
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_20 " );	// I feel like this won't be easy!
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_23 " );	// Mora Ulartu is not just a spell. This is Beliar's gift to those who, in his opinion, are worthy of owning this secret knowledge!
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_24 " );	// And I don't think he will consider you worthy!
	if(other.guild == GIL_KDF)
	{
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_25 " );	// Besides, you're a firebender, servant of Innos!
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_26 " );	// I'm afraid you don't stand a chance!
		CHANCEGETDARKSOUL = 1;
	}
	else if(other.guild == GIL_PAL)
	{
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_27 " );	// Plus, you're a paladin of Innos!
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_28 " );	// I'm afraid your chances are negligible.
		CHANCEGETDARKSOUL = 5;
	}
	else if(other.guild == GIL_KDW)
	{
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_29 " );	// Plus, you're a waterbender, servant of Adanos!
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_30 " );	// Though there isn't much enmity between him and Beliar, I don't think it's worth counting on much.
		CHANCEGETDARKSOUL = 25;
	}
	else if(other.guild == GIL_KDM)
	{
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_31 " );	// Although, on the other hand, the fact that you are a dark magician is definitely a plus in this matter.
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_32 " );	// But I don't think you should count on it too much anyway.
		CHANCEGETDARKSOUL = 50;
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_33 " );	// Although on the other hand - you did not make a vow to other gods!
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_34 " );	// Perhaps this can be your advantage in this matter... (thoughtfully)
		CHANCEGETDARKSOUL = 75;
	};
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_35 " );	// You should try anyway.
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_36 " );	// And what do I need to do in order for Beliar to grant me Mora Ulartu?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_37 " );	// You need to offer the Dark God something special in exchange for his gift...
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_40 " );	// Perhaps your soul could interest him - but I think this option is not beneficial for you yourself ... (laughs)
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_42 " );	// I think there's one more thing Beliar would like to have.
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_43 " );	// Which one?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_46 " );	// There is one very powerful artifact - the Triramar Amulet.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_47 " );	// I don't know exactly who created it - but I'm guessing it was Beliar himself!
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_48 " );	// How else to explain that from the time of its creation until the last moment, the artifact was in one of the temples dedicated to the Dark God.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_49 " );	// True, now the situation has changed somewhat. About half a century ago, the paladins destroyed this temple.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_52 " );	// They didn't ignore the artifact itself. Unable to destroy it, they safely hid it from prying eyes.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_53 " );	// And the power of Innos helped them resist the wrath of Beliar, who wanted to return him to himself.
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_54 " );	// What's so special about it?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_55 " );	// One of the four essences of the Dark God is hidden in it. For those who served Beliar, this artifact was the source of their power...
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_57 " );	// ...and for the Dark God, he was an integral part of himself!
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_58 " );	// Are you saying that if the Dark God gets this amulet back, he will give me...
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_59 " );	// (interrupting) As I said, this can only interest Beliar. Beliar is cunning and cunning!
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_61 " );	// Of course, he will be glad to have this artifact back, but his gratitude may end there.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_63 " );	// In addition, if the paladins find out about this, you yourself will understand what threatens you.
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_65 " );	// Where do paladins store this artifact?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_66 " );	// They hid it somewhere on the island, I guess. But it is unlikely that it is kept in the city or in the monastery.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_68 " );	// Most likely, this place is securely hidden from prying eyes, and it is almost impossible to get there.
	if(Npc_KnowsInfo(other,dia_pal_199_ritter_firstwarn) || Npc_KnowsInfo(other,dia_pal_199_ritter_hagen))
	{
		AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_69 " );	// Maybe they keep it in the royal fort Azgan?
		AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_70 " );	// I don't think so. It's too crowded!
	};
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_74 " );	// And how do you know all this yourself?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_75 " );	// I'm a former firebender! This never happens without them knowing!
	AI_Output(other,self, " DIA_Xardas_FindDarkSoul_01_76 " );	// What should I do if I do find a way to get this amulet?
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_77 " );	// Say a prayer to Beliar and lay the amulet at the foot of his altar. And after that, ask him to grant you Mora Ulartu.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_81 " );	// And one more thing... keep me posted. If you know anything about the amulet, let me know.
	AI_Output(self,other, " DIA_Xardas_FindDarkSoul_01_85 " );	// Now you can go.
	TELLABOUTDS = TRUE;
	XARDASLINE = TRUE;
	Wld_InsertNpc(pal_187_melhior,"NW_CITY_HABOUR_MELHIOR");
	B_LogEntry( TOPIC_GOLDDRAGONPORTAL , " Xardas told me about Mora Ulartu's ancient spell, the Dungeon of Souls. This spell can only be cast by Beliar himself, and my chances of doing so are not very high. However, Xardas told me how it is possible to get the favor of the Dark God. To do this, I it is necessary to get a certain Amulet of Triramar - a powerful artifact in which Beliar invested part of his divine power, captured by the paladins during the destruction of one of the temples of the Dark God. But where the paladins hide this artifact, I will have to find out myself. " );
	Log_AddEntry( TOPIC_GOLDDRAGONPORTAL , " If I manage to get the artifact, I should offer a prayer to the Dark God, place the amulet on his altar and ask Beliar to grant me the spell I need. And hope that he hears my request. " );
};


instance DIA_XARDAS_FINDETLU (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_findetlu_condition;
	information = dia_xardas_findetlu_info;
	permanent = FALSE;
	description = " I found out where the paladins hide the Amulet of Triramar. " ;
};


func int dia_xardas_findetlu_condition()
{
	if((ETLUBEGINS == TRUE) && Npc_KnowsInfo(other,dia_xardas_finddarksoul) && (BEONETLU == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_findetlu_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_FindEtlu_01_00 " );	// I found out where the paladins hide the Amulet of Triramar.
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_01 " );	// And where is it?
	AI_Output(other,self, " DIA_Xardas_FindEtlu_01_02 " );	// On the island of Etlu.
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_03 " );	// Etlu? (thoughtfully) Yes, they hid it well.
	AI_Output(other,self, " DIA_Xardas_FindEtlu_01_04 " );	// I also learned how to get there.
	AI_Output(other,self, " DIA_Xardas_FindEtlu_01_05 " );	// Here in Khorinis there is a magical portal that leads straight to this island.
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_06 " );	// Portal? Where did he come from?
	AI_Output(other,self, " DIA_Xardas_FindEtlu_01_07 " );	// It was built by the paladins.
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_08 " );	// M-yes...(laughs) Irony of fate! Then you just have to find this portal.
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_13 " );	// But like I said, the paladins on the island won't welcome your visit.
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_15 " );	// This is a restricted area! And anyone who dares to break this rule and show up there without an invitation, only one thing awaits ...
	if(hero.guild == GIL_PAL)
	{
		AI_Output(self,other, " DIA_Xardas_FindEtlu_01_18 " );	// Even though you're a paladin!
		AI_Output(self,other, " DIA_Xardas_FindEtlu_01_19 " );	// There, on the island, your status won't save you anymore!
	}
	else if(hero.guild == GIL_KDF)
	{
		AI_Output(self,other, " DIA_Xardas_FindEtlu_01_20 " );	// Even though you're a Firebender!
		AI_Output(self,other, " DIA_Xardas_FindEtlu_01_21 " );	// There, on the island, your status won't save you anymore!
	}
	else  if (hero.guild ==  GIL_KDW )
	{
		AI_Output(self,other, " DIA_Xardas_FindEtlu_01_22 " );	// Even though you're a Waterbender!
		AI_Output(self,other, " DIA_Xardas_FindEtlu_01_23 " );	// There, on the island, your status won't save you anymore!
	};
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_24 " );	// Before you go there, prepare well. A tough fight awaits you!
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_25 " );	// Paladins will fight to the death protecting this artifact!
	AI_Output(self,other, " DIA_Xardas_FindEtlu_01_27 " );	// And don't you dare wear that amulet! You just don't have the strength to resist his might.
	B_LogEntry( TOPIC_GOLDDRAGONPORTAL , " Xardas said don't expect a warm welcome on the island. Looks like I'll have to cut my way with my sword. Also, don't try to put on the amulet, otherwise it will just kill me. " );
};


instance DIA_XARDAS_ASKABOUTPEACEWAY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_askaboutpeaceway_condition;
	information = dia_xardas_askaboutpeaceway_info;
	permanent = FALSE;
	description = " One more question. " ;
};


func int dia_xardas_askaboutpeaceway_condition()
{
	if ( Npc_KnowsInfo ( other , dia_xardas_found ) && ( MEHASTRIRAVAR  ==  FALSE ) && ( ASKABOUTPEACEWAY  ==  FALSE ))
	{
		return TRUE;
	};
};

func void dia_xardas_askaboutpeaceway_info()
{
	AI_Output(other,self, " DIA_Xardas_AskAboutPeaceWay_01_00 " );	// One more question.
	AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_01 " );	// And which one?
	AI_Output(other,self, " DIA_Xardas_AskAboutPeaceWay_01_03 " );	// Is there any other way to get this amulet from the paladins?
	AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_04 " );	// Like I said, I don't know.
	if((other.guild == GIL_PAL) || (other.guild == GIL_KDF))
	{
		AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_05 " );	// Perhaps, if I were you, I would try to ask for help from the owner of the amulet - Beliar!
		if(other.guild == GIL_PAL)
		{
			AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_06 " );	// But you are the paladin of Innos! He probably won't help you.
		}
		else
		{
			AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_07 " );	// But you're a fire mage! He probably won't help you.
		};
		AI_Output(other,self, " DIA_Xardas_AskAboutPeaceWay_01_08 " );	// Got it.
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_09 " );	// However, if I were you, I would try to ask the owner of the amulet for help.
		AI_Output(other,self, " DIA_Xardas_AskAboutPeaceWay_01_10 " );	// You mean Beliar?
		AI_Output(self,other, " DIA_Xardas_AskAboutPeaceWay_01_11 " );	// Exactly! Turn to him with a prayer and perhaps you will have a chance.
		AI_Output(other,self, " DIA_Xardas_AskAboutPeaceWay_01_12 " );	// I'll try.
		B_LogEntry( TOPIC_GOLDDRAGONPORTAL , " I asked Xardas if there was another way to take the amulet from the paladins without causing a massacre. He advised me to contact Beliar himself. I hope he hears my pleas. " );
	};
	ASKABOUTPEACEWAY = TRUE;
};


instances DIA_XARDAS_FINDAMULET (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_findamulet_condition;
	information = dia_xardas_findamulet_info;
	permanent = FALSE;
	description = " I got the Triramar Amulet! " ;
};


func int dia_xardas_findamulet_condition()
{
	if ((Npc_HasItems(other,itmi_triramar) >=  1 ) && Npc_KnowsInfo(other,dia_xardas_finddarksoul))
	{
		return TRUE;
	};
};

func void dia_xardas_findamulet_info()
{
	B_GivePlayerXP(200);

	if(Npc_HasItems(other,ITKE_SI_SIGN) >= 1)
	{
		Npc_RemoveInvItems(other,ITKE_SI_SIGN,1);
	};
	if(Npc_HasItems(other,ITKE_HAGEN_SECRETKEY) >= 1)
	{
		Npc_RemoveInvItems(other,ITKE_HAGEN_SECRETKEY,1);
	};

	AI_Output(other,self, " DIA_Xardas_FindAmulet_01_00 " );	// I got the Triramar Amulet!
	AI_Output(self,other, " DIA_Xardas_FindAmulet_01_01 " );	// WHAT?! Have you succeeded?
	AI_Output(self,other, " DIA_Xardas_FindAmulet_01_03 " );	// You never cease to amaze me. It's time for me to get used to it though.

	if(CountPalmora >= 5)
	{
		AI_Output(self,other, " DIA_Xardas_FindAmulet_01_04 " );	// I hope you are not tormented by the advice that because of this amulet you had to send so many people to the next world?
		AI_Output(self,other, " DIA_Xardas_FindAmulet_01_08 " );	// You may have made a mistake... okay, stop talking.
	};

	AI_Output(self,other, " DIA_Xardas_FindAmulet_01_09 " );	// Now, in order to get Mora Ulartu, you just have to perform the ceremony of offering a gift to Beliar.
	AI_Output(self,other, " DIA_Xardas_FindAmulet_01_10 " );	// Go to the nearest altar of the Dark God, lay the amulet at its base and ask for the Dungeon of Souls!
	AI_Output(self,other, " DIA_Xardas_FindAmulet_01_11 " );	// You'll find one of these altars on the top floor of my tower.
	AI_Output(self,other, " DIA_Xardas_FindAmulet_01_12 " );	// And remember - the Dark God is cunning and cunning! Do not think that if you give him this amulet, you will definitely receive your reward!
	AI_Output(other,self, " DIA_Xardas_FindAmulet_01_14 " );	// I hope all my efforts don't go to waste!
	) ; _ _ _ _ _
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_GETSUPERBELIARWEAPON(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_getsuperbeliarweapon_condition;
	information = dia_xardas_getsuperbeliarweapon_info;
	permanent = FALSE;
	description = " The dark god gave me Mora Ulartu! " ;
};


func int dia_xardas_getsuperbeliarweapon_condition()
{
	if ((Npc_HasItems(hero,true_moral) >=  1 ) && Npc_KnowsInfo(hero, dia_xardas_finddarksoul))
	{
		return TRUE;
	};
};

func void dia_xardas_getsuperbeliarweapon_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_GetSuperBeliarWeapon_01_00 " );	// The dark god gave me Mora Ulartu!
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_01 " );	// WHAT?! (sighs) Sometimes it seems to me that nothing is impossible for you at all...
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_07 " );	// You now have a powerful artifact in your hands that grants you the Soul Catcher ability!
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_08");	// ?
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_09 " );	// Yes! Very few people have this knowledge...
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_12 " );	// Basically, these are demons and similar creatures that inherited this ability at birth, or were given this knowledge. True, not all, but only the most powerful of them!
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_13 " );	// For people, this knowledge is practically inaccessible... although, as it turned out, there are exceptions.
	AI_Output(other,self, " DIA_Xardas_GetSuperBeliarWeapon_01_14 " );	// But why do we need souls?
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_15 " );	// You yourself still do not realize what you own now...
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_16 " );	// The soul is the most valuable thing a living being has! It is the source of our magical power, which we use to create magic.
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_17 " );	// In addition, the soul of a living being has a number of other unusual properties. But I don't know much about them.
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_19 " );	// That's why this substance is so highly valued - it's the key to limitless power!
	AI_Output(other,self, " DIA_Xardas_GetSuperBeliarWeapon_01_20 " );	// Explain how to use all this knowledge?
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_21 " );	// It's not that hard. You have Mora Ulartu - this is quite enough to prevent the soul from slipping away after the death of its owner ...
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_22 " );	// However, you can't use her power.
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_24 " );	// People don't know how to handle them the way the same demons do, for example - to devour them, thereby increasing their strength and power.
	AI_Output(other,self, " DIA_Xardas_GetSuperBeliarWeapon_01_25 " );	// Then what should I do with them?
	AI_Output(self,other, " DIA_Xardas_GetSuperBeliarWeapon_01_26 " );	// Perhaps the Dark God will accept the souls you captured as a gift. And in return, you can ask him for something of value.
	AI_Output(other,self, " DIA_Xardas_GetSuperBeliarWeapon_01_29 " );	// Okay, I'm clear.
	KNOWSHOWDEALSOULS = TRUE;
	Log_CreateTopic(TOPIC_SUPERBELIARWEAPON_UPG,LOG_NOTE);
	B_LogEntry( TOPIC_SUPERBELIARWEAPON_UPG , " The Mora Ulartu rune I received gave me the Soul Catcher ability, with which I can captivate and capture the souls of any creature. I can present the collected souls as a gift to the Dark God, not forgetting to beg something from him for myself useful. " );
};


DIA_XARDAS_GETSUPERSOUL (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_getsupersoul_condition;
	information = dia_xardas_getsupersoul_info;
	permanent = FALSE;
	description = " I have the soul of the archdemon S'anyak! " ;
};


func int dia_xardas_getsupersoul_condition()
{
	if ((Npc_HasItems(hero,itmi_stonesoul_senyak) >=  1 ) && ( TELLCANSUPERBELIERWEAPON  ==  FALSE ) && ( KNOWSHOWDEALSOULS  ==  TRUE ))
	{
		return TRUE;
	};
};

func void dia_xardas_getsupersoul_info()
{
	B_GivePlayerXP(300);
	AI_Output(other,self, " DIA_Xardas_GetSuperSoul_01_00 " );	// I have the soul of the archdemon S'enyak!
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_01 " );	// S'anyaka?! Hmmm... (snickeringly) You didn't waste your time, did you?
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_02 " );	// In your hands is truly a real treasure!
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_05 " );	// An archdemon's soul is unlike any other. Her magic power is huge and you will simply not be able to cope with it.
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_06 " );	// You'll need some powerful magical artifact. By investing the magical core of the soul into it, you can increase its power!
	AI_Output(other,self, " DIA_Xardas_GetSuperSoul_01_08 " );	// And what should this item be?
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_09 " );	// To begin with, it must have the magical essence of creation, because only the structure of such artifacts allows one to enclose the magical power of the soul in them.
	AI_Output(other,self, " DIA_Xardas_GetSuperSoul_01_10 " );	// How about Beliar's Claw?
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_11 " );	// Claw? I think he would be perfect for this. After all, he was created by magic - the dark magic of Beliar!
	AI_Output(other,self, " DIA_Xardas_GetSuperSoul_01_14 " );	// How do I then transfer the soul of the archdemon to this artifact?
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_15 " );	// Any magical altar of the Dark God will do. His aura will allow you to perform the soul transfer ritual.
	AI_Output(self,other, " DIA_Xardas_GetSuperSoul_01_17 " );	// All you need is the favor of Beliar himself!
	TELLCANSUPERBELIARWEAPON = TRUE;
	B_LogEntry( TOPIC_SUPERBELIARWEAPON_UPG , " In order to use the power of the imprisoned soul of the archdemon S'enyak, I need an artifact that can absorb its power. The Claw of Beliar is best for this. be kind to me. " );
};


instance DIA_XARDAS_GOBLINBRINGSCROLL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_goblinbringscroll_condition;
	information = dia_xardas_goblinbringscroll_info;
	permanent = FALSE;
	description = " I need a scroll of banishment. " ;
};


func int dia_xardas_goblinbringscroll_condition()
{
	if((MIS_GOBLINAWAY == LOG_Running) && (XARDASGOBLINREADYAWAY == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_goblinbringscroll_info()
{
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_01_00 " );	// I need a scroll of banishment.
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_01_01 " );	// Do you have one?
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_01_02 " );	// This is a dangerous spell, and I won't give it to you without explanation!
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_01_03 " );	// Why do you need this scroll?
	Info_ClearChoices(dia_xardas_goblinbringscroll);
	Info_AddChoice(dia_xardas_goblinbringscroll, " I can't tell you about this. " ,dia_xardas_goblinbringscroll_ok);
	Info_AddChoice(dia_xardas_goblinbringscroll, " I need him for our cause. " ,dia_xardas_goblinbringscroll_no_1);
	Info_AddChoice(dia_xardas_goblinbringscroll, " To exorcise one strange creature. " ,dia_xardas_goblinbringscroll_no_2);
	Info_AddChoice(dia_xardas_goblinbringscroll, " This is for my friend Mad. " ,dia_xardas_goblinbringscroll_no_3);
};

func void dia_xardas_goblinbringscroll_ok()
{
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_Ok_01_00 " );	// I can't tell you about it.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_Ok_01_01 " );	// In that case, I won't help you!
};

func void dia_xardas_goblinbringscroll_no_1()
{
	B_GivePlayerXP(50);
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_No_1_01_00 " );	// I need it for our common cause.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_1_01_01 " );	// Nonsense! I know what we need for our business!
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_1_01_02 " );	// And I see no reason why I should give you this scroll.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_1_01_03 " );	// Now go do what needs to be done. (angrily) And don't you dare bother me any more!
	B_LogEntry( TOPIC_GOBLINAWAY , " Xardas refused to give me the scroll of banishment. " );
	AI_StopProcessInfos(self);
};

func void dia_xardas_goblinbringscroll_no_2()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_No_2_01_00 " );	// To banish one strange creature.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_01 " );	// What other creature?! What are you talking about?
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_No_2_01_02 " );	// One goblin! Imagine, he also turned out to be a speaker.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_03 " );	// Yes? I think I know what you're talking about.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_04 " );	// Did you meet him near my old tower in the Valley of Mines?
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_No_2_01_05 " );	// Exactly! And how did you know about it?
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_06 " );	// (sarcastically) Guessed! But let's not waste time discussing any nonsense.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_07 " );	// Okay, I'll give you this scroll, and only because I should have done it myself a long time ago!
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_09 " );	// I somehow forgot about this... but you will correct my mistake.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_10 " );	// Though this scavenger spawn should have been punished for running away from me first!
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_11 " );	// But this happens - the summoned beings are not always obedient to the voice of their master.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_12 " );	// Here, hold the scroll, and remember that it can only be used once and in close proximity to the summoned creature.
	B_GiveInvItems(self,other,itwr_xardasgoblinscroll,1);
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_2_01_13 " );	// Now go and try not to distract me with any more trifles!
	B_LogEntry( TOPIC_GOBLINAWAY , " Xardas gave me the scroll of banishment. Time to get back to the goblin. " );
	AI_StopProcessInfos(self);
};

func void dia_xardas_goblinbringscroll_no_3()
{
	B_GivePlayerXP(50);
	AI_Output(other,self, " DIA_Xardas_GoblinBringScroll_No_3_01_01 " );	// This is for my friend Mad. I met him in the Colony.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_3_01_02 " );	// I think you're lying.
	AI_Output(self,other, " DIA_Xardas_GoblinBringScroll_No_3_01_08 " );	// Better go and do what you gotta do. And don't you dare distract me over trifles!
	B_LogEntry( TOPIC_GOBLINAWAY , " Xardas refused to give me the scroll of banishment. " );
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_CANBENECROM (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_canbenecrom_condition;
	information = dia_xardas_canbenecrom_info;
	permanent = FALSE;
	description = " Can you enlighten me on the mysteries of dark magic? " ;
};


func int day_xardas_canbenecrom_condition()
{
	if((TELLABOUTOTHERGUILD == TRUE) && (hero.guild == GIL_NONE))
	{
		return TRUE;
	};
};

func void dia_xardas_canbenecrom_info()
{
	AI_Output(other,self, " DIA_Xardas_CanBeNecrom_01_00 " );	// Can you enlighten me on the mysteries of dark magic?
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_01 " );	// Hmmm...(thoughtfully) Your request surprises me a little!
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_03 " );	// I didn't even expect to hear such a question from you.
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_04 " );	// Of course, I understand your desire to become a magician and master the power of magical runes.
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_05 " );	// But for this there are much easier ways than the path of the necromancer and the demon caster.
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_06 " );	// Few people dare to enter it - after all, it is incredibly difficult and dangerous!
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_07 " );	// And besides, the path of the dark magician is the path of complete loneliness... (gloomy)
	AI_Output(other,self, " DIA_Xardas_CanBeNecrom_01_08 " );	// It doesn't scare me.
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_10 " );	// But are there few representatives of other deities on the island? How about the same magicians of Water or Fire?
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_11 " );	// Because they can also give you what you're looking for.
	AI_Output(other,self, " DIA_Xardas_CanBeNecrom_01_14 " );	// I feel that darkness is my abode. That is where my purpose lies!
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_15 " );	// (thoughtfully) Hmmm...
	AI_Output(other,self, " DIA_Xardas_CanBeNecrom_01_17 " );	// So will you help me become a necromancer?
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_18 " );	// Well, good! However, I can't make that decision right away.
	AI_Output(self,other, " DIA_Xardas_CanBeNecrom_01_21 " );	// I need time to think about this...
	HARDASTIMERBENDM = Wld_GetDay();
	MIS_BECOMEKDM = LOG_Running;
	Log_CreateTopic(TOPIC_BECOMEKDM,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_BECOMEKDM,LOG_Running);
	B_LogEntry( TOPIC_BECOMEKDM , " I asked Xardas to accept me as a dark mage and teach me the secrets of necromancer magic. Xardas replied that he needed to think about this issue for a few days. " );
};


instance DIA_XARDAS_CANBENECROMOK ( C_Info ) ;
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_canbenecromok_condition;
	information = dia_xardas_canbenecromok_info;
	permanent = FALSE;
	description = " Have you thought about my request? " ;
};

func int dia_xardas_canbenecromok_condition()
{
	where int daynow;
	daynow = Wld_GetDay();
	if (( XARDASTIMERBENDM  <= (daynow -  2 )) && ( MY_BECOMEDM  == LOG_Running ) && ( XARDAS_NDM  ==  FALSE ) && ( hero . guild ==  GIL_NONE ))
	{
		return TRUE;
	};
};

func void dia_xardas_canbenecromok_info()
{
	AI_Output(other,self, " DIA_Xardas_CanBeNecromOk_01_00 " );	// Have you thought about my request?
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_01_03 " );	// I agree to accept you as my apprentice and teach you the secrets of Dark magic.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_01_04 " );	// However, you should understand that once you make this decision, you can't just change your choice.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_01_05 " );	// Therefore, you must be fully aware of the correctness of your actions.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_01_06 " );	// So, are you ready to make a vow to the Dark God and dedicate your life to studying the magic of Darkness?
	B_LogEntry( TOPIC_BECOMEKDM , " Xardas agrees to take me as his apprentice and teach me dark magic. " );
	Info_ClearChoices(dia_xardas_canbenecromok);
	Info_AddChoice(dia_xardas_canbenecromok, " Ok, I'm ready. " ,dia_xardas_canbenecromok_yes);
	Info_AddChoice(dia_xardas_canbenecromok, " I need to think. " ,dia_xardas_canbenecromok_no);
};

func void dia_xardas_canbenecromok_yes()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_CanBeNecromOk_Yes_01_00 " );	// I'm ready.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_01 " );	// So be it!
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_02 " );	// By the power given to me by Beliar, I accept you into the ranks of the followers of his sacred cult.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_03 " );	// (grimly) And may the crimson Darkness guard your path and your soul.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_04 " );	// That's it! Now you are part of the darkness and your life is inseparably connected with it.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_05 " );	// But you must understand that this still does not make you a full-fledged dark magician!
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_06 " );	// You still have a lot to learn and a lot to learn.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_07 " );	// For now, accept this robe of a disciple of Darkness as a sign that you now belong to our Circle.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_08 " );	// And one more thing. Since you are now my student, accept this ring.
	B_GiveInvItems(self,other,ITRI_XARDASPLACE,1);
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_Yes_01_09 " );	// It will allow you to get to this tower faster than you can imagine.

	if(CanTeachTownMaster == FALSE)
	{
		CanTeachTownMaster = TRUE;
		MIS_PathFromDown = LOG_SUCCESS;
		Log_SetTopicStatus(TOPIC_PathFromDown,LOG_SUCCESS);
	};

	other.guild = GIL_NDM;
	CheckHeroGuild[0] = TRUE;
	Snd_Play("LEVELUP");
	B_GiveInvItems(self,other,itar_ndm_l,1);
	SLD_recording = LOG_OBSOLETE ;
	KDF_Recording = LOG_OBSOLETE ;
	MIL_recording = LOG_OBSOLETE ;
	MIS_PSICAMPJOIN = LOG_OBSOLETE;
	MIS_BECOMEKDW = LOG_OBSOLETE;

	Log_SetTopicStatus(TOPIC_BecomeMIL,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_BecomeSLD,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_BecomeKdF,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_PSICAMPJOIN,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_BECOMEKDW,LOG_OBSOLETE);

	if(MIS_SLDRESPEKT == LOG_Running)
	{
		MIS_SLDRESPEKT = LOG_OBSOLETE;
		Log_SetTopicStatus(TOPIC_SLDRespekt,LOG_OBSOLETE);
	};

	XARDAS_NDM = TRUE;
	B_LogEntry( TOPIC_BECOMEKDM , " Xardas has accepted me as a disciple of the dark mages. " );
	Info_ClearChoices(dia_xardas_canbenecromok);
};

func void dia_xardas_canbenecromok_no()
{
	AI_Output(other,self, " DIA_Xardas_CanBeNecromOk_No_01_00 " );	// I need to think.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOk_No_01_01 " );	// Good! I'm not rushing you to answer. This is a responsible step!
	Info_ClearChoices(dia_xardas_canbenecromok);
};


instance DIA_XARDAS_CANBENECROMOCONCE (C_Info);
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_canbenecromokonce_condition;
	information = dia_xardas_canbenecromoconce_info;
	permanent = TRUE;
	description = " I want to take the path of the Dark Mage. " ;
};


func int day_xardas_canbenecromokonce_condition()
{
	if ( Npc_KnowsInfo ( hero , dia_xardas_canbenecromok ) && ( MY_BECOMEKDM  == LOG_Running ) && ( XARDAS_NDM  ==  FALSE ) && ( hero . guild ==  GIL_NONE ))
	{
		return TRUE;
	};
};

func void dia_xardas_canbenecromokonce_info()
{
	AI_Output(other,self, " DIA_Xardas_CanBeNecromOkOnce_01_00 " );	// I want to take the path of the Dark Magician.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_01_01 " );	// Are you ready to make a vow to the Dark God and devote your life to studying the magic of Darkness?
	Info_ClearChoices(dia_xardas_canbenecromoconce);
	Info_AddChoice(dia_xardas_canbenecromokonce, " male, female. " ,dia_xardas_canbenecromokonce_yes);
	Info_AddChoice(dia_xardas_canbenecromokonce, " I need to think. " ,dia_xardas_canbenecromokonce_no);
};

func void dia_xardas_canbenecromokonce_yes()
{
	if(hero.level >= 10)
	{
		B_GivePlayerXP(200);
		AI_Output(other,self, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_00 " );	// I'm ready.
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_01 " );	// So be it!
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_02 " );	// By the power given to me by Beliar, I accept you into the ranks of the followers of his sacred cult.
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_03 " );	// (grimly) And may the crimson Darkness guard your path and your soul.
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_04 " );	// That's it! Now you are part of the darkness and your life is inseparably connected with it.
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_05 " );	// But you must understand that this still does not make you a full-fledged dark magician!
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_06 " );	// You still have a lot to learn and a lot to learn.
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_07 " );	// For now, accept this robe of a disciple of Darkness as a sign that you now belong to our Circle.
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_08 " );	// And one more thing. Since you are now my student, accept this ring.
		B_GiveInvItems(self,other,ITRI_XARDASPLACE,1);
		AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_Yes_01_09 " );	// It will allow you to get to this tower faster than you can imagine.

		if(CanTeachTownMaster == FALSE)
		{
			CanTeachTownMaster = TRUE;
			MIS_PathFromDown = LOG_SUCCESS;
			Log_SetTopicStatus(TOPIC_PathFromDown,LOG_SUCCESS);
		};

		other.guild = GIL_NDM;
		CheckHeroGuild[0] = TRUE;
		Snd_Play("LEVELUP");
		B_GiveInvItems(self,other,itar_ndm_l,1);
		SLD_recording = LOG_OBSOLETE ;
		KDF_Recording = LOG_OBSOLETE ;
		MIL_recording = LOG_OBSOLETE ;
		MIS_PSICAMPJOIN = LOG_OBSOLETE;
		MIS_BECOMEKDW = LOG_OBSOLETE;

		Log_SetTopicStatus(TOPIC_BecomeMIL,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_BecomeSLD,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_BecomeKdF,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_PSICAMPJOIN,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_BECOMEKDW,LOG_OBSOLETE);

		XARDAS_NDM = TRUE;
		B_LogEntry( TOPIC_BECOMEKDM , " Xardas has accepted me as a disciple of the dark mages. " );
		Info_ClearChoices(dia_xardas_canbenecromoconce);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_No_Level_00_01 " );	// But first you need to gain experience - I don't have time to explain elementary things to you.
		B_LogEntry( TOPIC_BECOMEKDM , " To become a student of Xardas, I need to gain experience (requires a hero level of at least 10. " );
	};
};

func void dia_xardas_canbenecromokonce_no()
{
	AI_Output(other,self, " DIA_Xardas_CanBeNecromOkOnce_No_01_00 " );	// I need to think.
	AI_Output(self,other, " DIA_Xardas_CanBeNecromOkOnce_No_01_01 " );	// Good! I'm not rushing you to answer. This is a responsible step!
	Info_ClearChoices(dia_xardas_canbenecromoconce);
};


instance DIA_XARDAS_NDM_HOWKDM(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_howkdm_condition;
	information = dia_xardas_ndm_howkdm_info;
	permanent = FALSE;
	description = " How can I become a true dark magician? " ;
};


func int dia_xardas_ndm_howkdm_condition()
{
	if((MIS_BECOMEKDM == LOG_Running) && (XARDAS_NDM == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_howkdm_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_HowKDM_01_00 " );	// How can I become a true dark magician?
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_03 " );	// The path you've chosen isn't just about being able to wear an acolyte's robes or a necromancer's robes.
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_04 " );	// This is an opportunity to gain knowledge that leads to near-limitless power!
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_07 " );	// A lot depends on how strong your spirit is and how great your wisdom is!
	AI_Output(other,self, " DIA_Xardas_NDM_HowKDM_01_08 " );	// What do you mean?
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_09 " );	// For an unprepared person, this knowledge can drive you crazy or just kill you!
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_10 " );	// And I don't want the same to happen to you.
	AI_Output(other,self, " DIA_Xardas_NDM_HowKDM_01_11 " );	// So, it turns out that I'm not ready yet?
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_12 " );	// Yes, your spirit is still weak and not ready to take on such a heavy burden.
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_13 " );	// In order to become a true magician of Darkness, you will have to spend a long time in diligent training, strengthening your spirit and mind.
	AI_Output(self,other, " DIA_Xardas_NDM_HowKDM_01_14 " );	// And only after that you can become someone who can rightfully call himself a necromancer!
	B_LogEntry( TOPIC_BECOMEKDM , " In order for Xardas to initiate me as a dark mage, I need to strengthen my spiritual power. " );
};

var int XarOneTimeDM;

DIA_XARDAS_NDM_MANA (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_mana_condition;
	information = dia_xardas_ndm_mana_info;
	permanent = TRUE;
	description = " Am I worthy to become a dark mage? " ;
};

func int dia_xardas_ndm_mana_condition()
{
	if ( Npc_KnowsInfo ( hero , dia_xardas_ndm_howkdm ) && ( MIS_RECOGNIZED  == LOG_Running ) && ( XARDAS_ACCEPTED  ==  FALSE ))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_mana_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Mana_01_00 " );	// Am I worthy to become a dark magician?
	AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_01 " );	// Possibly. Now I will look into your soul and we will know the answer.

	if((other.attribute[ATR_MANA_MAX] >= 75) && (ATR_INTELLECT >= 30))
	{
		B_GivePlayerXP(300);
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_03 " );	// Hmmm... (looks closely)
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_04 " );	// YES! I feel great spiritual power in you. And your mind is ready for the test of Darkness.
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_07 " );	// Now I can initiate you into the secrets of the magic of Darkness and elevate you to the status of a Necromancer.
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_08 " );	// Congratulations, you are admitted to the circle of the elite!
		B_LogEntry( TOPIC_BECOMEKDM , " Xardas believes I am now worthy of becoming a necromancer. " );
		XARDAS_AGREEDBEKDM = TRUE;
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_09 " );	// Hmmm... (looks closely)
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_10 " );	// No, you're not worthy yet.
		AI_Output(self,other, " DIA_Xardas_NDM_Mana_01_11 " );	// So don't waste my time.

		if(XarOneTimeDM == FALSE)
		{
			B_LogEntry( TOPIC_BECOMEKDM , " According to Xardas, I still lack something - either mana or knowledge. Or maybe it's just too early for me to comprehend dark magic. (Requirement: magical energy of at least 75 units, intelligence of at least 30 units) " );
			XarOneTimeDM = TRUE;
		};

		AI_StopProcessInfos(self);
	};
};

instance DIA_Xardas_NDM_LastStand(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_NDM_LastStand_condition;
	information = DIA_Xardas_NDM_LastStand_info;
	permanent = FALSE;
	description = " Now will you initiate me into dark mages? " ;
};

func int DIA_Xardas_NDM_LastStand_condition()
{
	if ( Npc_KnowsInfo ( hero , dia_xardas_ndm_howkdm ) && ( MIS_ACCOUNT  == LOG_Running ) && ( XARDAS_ACCEPT  ==  TRUE ))
	{
		return TRUE;
	};
};

func void DIA_Xardas_NDM_LastStand_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_LastStand_01_01 " );	// Now you will initiate me into dark magicians?
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_01_02 " );	// Yes... I think you're ready for the rite of passage.
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_01_03 " );	// But according to ancient custom, each student must first pass a severe test. And you are no exception.
	AI_Output(other,self, " DIA_Xardas_NDM_LastStand_01_04 " );	// What should I do?
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_01_05 " );	// You must kill the most innocent firebender acolyte.
	AI_Output(other,self, " DIA_Xardas_NDM_LastStand_01_06 " );	// What?! Is there no other way?
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_01_07 " );	// No and cannot be. You yourself must understand whose death the Dark God most desires.
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_01_08 " );	// Beliar gives his patronage and power only to those who completely give their soul to his service.
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_01_09 " );	// Do what I told you, and you will gain the power of the crimson darkness of Beliar!
	MIS_Xardas_LastStand_Done = LOG_Running;
	Log_CreateTopic(TOPIC_XARDAS_DEMON,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDAS_DEMON,LOG_Running);
	B_LogEntry( TOPIC_XARDAS_DEMON , " Xardas will initiate me into the dark mages only after I pass the final test. In order to earn Beliar's favor, I must find and kill the most innocent fire mage acolyte. According to Xardas, there is no other way. " );
};


instance DIA_Xardas_NDM_LastStand_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_NDM_LastStand_Done_condition;
	information = DIA_Xardas_NDM_LastStand_Done_info;
	permanent = FALSE;
	description = " I killed a Firebender acolyte! " ;
};

func int DIA_Xardas_NDM_LastStand_Done_condition()
{
	if((MIS_Xardas_LastStand_Done == LOG_Running) && (OpolosIsDead == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_NDM_LastStand_Done_info()
{
	B_GivePlayerXP(1000);
	AI_Output(other,self, " DIA_Xardas_NDM_LastStand_Done_01_01 " );	// I killed a fire mage acolyte!
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_Done_01_02 " );	// Good. Thus, you proved that you are completely on the side of Beliar.
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_Done_01_03 " );	// I'm sure the Dark God himself will be extremely pleased with you!
	AI_Output(self,other, " DIA_Xardas_NDM_LastStand_Done_01_04 " );	// And now, as I promised, I can accept you into the circle of necromancers and demon casters at any time!
	MIS_Xardas_LastStand_Done = LOG_SUCCESS;
	B_LogEntry( TOPIC_XARDAS_DEMON , " I've passed the last test, and now I can finally become a dark mage. " );
	Log_SetTopicStatus(TOPIC_XARDAS_DEMON,LOG_SUCCESS);
};

DIA_XARDAS_MAKEMEKDM (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_makemekdm_condition;
	information = dia_xardas_makemekdm_info;
	permanent = TRUE;
	description = " Initiate me into dark mages! " ;
};

func int dia_xardas_makemekdm_condition()
{
	if((MIS_BECOMEKDM == LOG_Running) && (XARDAS_AGREEDBEKDM == TRUE) && (other.guild == GIL_NDM) && (MIS_Xardas_LastStand_Done == LOG_SUCCESS))
	{
		return TRUE;
	};
};

func void dia_xardas_makemekdm_info()
{
	hero.guild = GIL_KDM;
	CheckHeroGuild[0] = TRUE;
	Mdl_ApplyOverlayMds(hero,"Humans_Mage.mds");
	AI_Output(other,self, " DIA_Xardas_MakeMeKDM_01_00 " );	// Initiate me into dark mages!
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_01 " );	// (imperiously) Good! You have proven yourself worthy of this honor.
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_02 " );	// From now on, you belong to the Sacred Circle of dark magicians - necromancers and demon casters.
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_03 " );	// Here! Accept this robe from me in recognition of your status.
	CreateInvItems(self,itar_dmt_l,1);
	B_GiveInvItems(self,other,itar_dmt_l,1);
	MIS_BECOMEKDM = LOG_SUCCESS;
	BELIARPRAYCOUNT = BELIARPRAYCOUNT + 30;
	Snd_Play("GUILD_INV");
	Log_SetTopicStatus(TOPIC_BECOMEKDM,LOG_SUCCESS);
	B_LogEntry( TOPIC_BECOMEKDM , " I have acquired the status of a dark magician - a necromancer and demon caster. My path is now inextricably linked with Darkness! " );
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_04 " );	// And this magical staff. Only we, the magicians of Darkness, have been granted the honor of possessing it and wielding its power!
	CreateInvItems(self,ITMW_2H_KMR_BLACKSTAFF_01,1);
	B_GiveInvItems(self,other,ITMW_2H_KMR_BLACKSTAFF_01,1);
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_05 " );	// Now your fate is inextricably linked with the crimson darkness of Beliar! Remember this.
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_06 " );	// Draw your strength from her and absorb her wisdom like mother's milk.
	AI_Output(self,other, " DIA_Xardas_MakeMeKDM_01_07 " );	// And may she keep your way!
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_NDM_ABOUTDARKMAGIC(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_aboutdarkmagic_condition;
	information = dia_xardas_ndm_aboutdarkmagic_info;
	permanent = TRUE;
	description = " Tell me about Shadow magic. " ;
};


func int dia_xardas_ndm_aboutdarkmagic_condition()
{
	if((XARDAS_NDM == TRUE) && (XARDASMENTIONABOUTDEMONOLOG == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_aboutdarkmagic_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_AboutDarkMagic_01_00 " );	// Tell me about the magic of the Dark.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_04 " );	// Beliar's magic is one of the most sinister and destructive magics of all that exist in this world!
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_05 " );	// After all, in its power of destruction, no other can be compared with it.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_06 " );	// And its only purpose is to enslave and destroy!
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_10 " );	// But you must understand that only an experienced magician can wield such power.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_11 " );	// She will most likely just kill the newcomer... Dark magic is insidious, just like Beliar himself.
	if(other.guild == GIL_KDM)
	{
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_13 " );	// That's not all.
		AI_Output(other,self, " DIA_Xardas_NDM_AboutDarkMagic_01_14 " );	// What else?
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_15 " );	// With the advantages that the study of dark magic opens up for you, one cannot but note one more of its features.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_17 " );	// Only the magic of dark runes will allow you to summon various creatures of Darkness to yourself.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_18 " );	// But this also has its difficulties.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_20 " );	// The creatures you have summoned may sometimes simply refuse to obey you.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_22 " );	// You may be too weak to command them.
		AI_Output(other,self, " DIA_Xardas_NDM_AboutDarkMagic_01_23 " );	// And then what?
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_24 " );	// If this happens, then most likely they will just try to kill you.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_28 " );	// Creatures of Darkness are very strong and dangerous. Not to mention demons.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_33 " );	// Remember one very important thing - the key to success in this business lies in your power.
		AI_Output(other,self, " DIA_Xardas_NDM_AboutDarkMagic_01_34 " );	// What does this mean?
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_35 " );	// This means that the more experienced you become, the more chances you'll have to bend the creature you've summoned to your will.
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_36 " );	// And, accordingly, the more it will serve you!
		XARDASMENTIONABOUTDEMONOLOG = TRUE;
	}
	else
	{
		AI_Output(other,self, " DIA_Xardas_NDM_AboutDarkMagic_01_38 " );	// Got it. Anything else?
		AI_Output(self,other, " DIA_Xardas_NDM_AboutDarkMagic_01_39 " );	// No, that's all. The rest you will learn when you yourself become a dark magician.
	};
};


instance DIA_XARDAS_NDM_ABOUTDEMONOLOG(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_aboutdemonolog_condition;
	information = dia_xardas_ndm_aboutdemonolog_info;
	permanent = TRUE;
	description = " Tell me about demons. " ;
};


func int dia_xardas_ndm_aboutdemonolog_condition()
{
	if ((hero.guild ==  GIL_KDM ) && ( XARDASTELLABOUTDEMONOLOGY  ==  TRUE ) && ( XARDASTELLABOUTDEMONOLOGY  ==  FALSE ))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_aboutdemonolog_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_AboutDemonolog_01_00 " );	// Tell me about demons.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_01 " );	// Good. Demons are a separate type of dark creatures and the most terrible creatures of Beliar!
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_04 " );	// They are the most dangerous creatures that can be found in our world, not counting the dragons.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_08 " );	// Demons are highly immune to magic, and it is extremely difficult to bend them to your will!
	AI_Output(other,self, " DIA_Xardas_NDM_AboutDemonolog_01_09 " );	// Is there a way to fix this?
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_10 " );	// For this, there is a separate area of knowledge in dark magic - demonology.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_12 " );	// After studying it, you will discover the ability to summon these terrible creatures into this world.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_13 " );	// And besides, knowledge of demonology will allow you to learn how to create a rune that will help you with this.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_14 " );	// However, you can only use her power once. After that, the power of the rune will dry up.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_17 " );	// Later, knowledge of demonology will allow you to summon higher demons!
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_18 " );	// They are an order of magnitude stronger than their normal counterparts, and this gives a lot more advantages.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_19 " );	// However, bending them to your will will also be much more difficult!
	AI_Output(other,self, " DIA_Xardas_NDM_AboutDemonolog_01_20 " );	// Can you teach me demonology?
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_21 " );	// Since you are a dark magician, I will explain to you the basic principles of demonology and teach you how to create a rune to summon these creatures.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_22 " );	// True, you can only master her power when you discover the fourth circle of magic.
	AI_Output(self,other, " DIA_Xardas_NDM_AboutDemonolog_01_23 " );	// And of course, in order to comprehend all this knowledge, you will need to have enough experience.
	XARDASTELLABOUTDEMONOLOG = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry( TOPIC_ADDON_DMTTEACHER , " Xardas will be able to teach me the art of demonology, the knowledge of which will give me the ability to summon demons to me. " );
};


instance DIA_XARDAS_NDM_TACHDEMONOLOG (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 997;
	condition = dia_xardas_ndm_teachdemonolog_condition;
	information = dia_xardas_ndm_teachdemenolog_info;
	permanent = TRUE;
	description = " Teach me the art of demonology. " ;
};


func int dia_xardas_ndm_teachdemenolog_condition()
{
	if((hero.guild == GIL_KDM) && (XARDASTELLABOUTDEMONOLOG == TRUE) && ((XARDASTEACHCASTDEMON_SIMPLE == FALSE) || (XARDASTEACHCASTDEMON_LORD == FALSE)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_teachdemolog_info()
{
	AI_Output(other,self, " DIA_Hokurn_Teach_15_00 " );	// Let's start training.
	AI_Output(self,other, " DIA_Xardas_NDM_TeachDemonolog_01_01 " );	// If you think you're ready for this, I'll teach you everything I know myself.
	Info_ClearChoices(dia_xardas_ndm_teachdemolog);
	Info_AddChoice(dia_xardas_ndm_teachdemolog,Dialog_Back,dia_xardas_ndm_teachdemolog_back);

	if((XARDASTEACHCASTDEMON_SIMPLE == FALSE) && (XARDASTEACHCASTDEMON_LORD == FALSE))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog( "  . " ,B_GetLearnCostTalent(other, NPC_TALENT_DEMONOLOG , 1 )),dia_xardas_ndm_teachdemenolog_simple);
	};
	if((XARDASTEACHCASTDEMON_SIMPLE == TRUE) && (XARDASTEACHCASTDEMON_LORD == FALSE) && (	DemonologSkill[0] >= 3))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog( " Learn high demonology. " ,B_GetLearnCostTalent(other, NPC_TALENT_DEMONOLOG , 1 )),dia_xardas_ndm_teachdemonolog_high);
	};
};

func void dia_xardas_ndm_teachdemolog_back()
{
	if(XARDASTEACHCASTDEMON_LORD == TRUE)
	{
		AI_Output(self,other, " DIA_Xardas_NDM_TeachDemonolog_BACK_01_00 " );	// Now it's up to you to summon the highest demons themselves.
		AI_Output(self,other, " DIA_Xardas_NDM_TeachDemonolog_BACK_01_01 " );	// But be careful! Remember that subduing these creatures is incredibly difficult.
		AI_Output(self,other, " DIA_Xardas_NDM_TeachDemonolog_BACK_01_02 " );	// A mistake in this case is tantamount to certain death.
	};
	Info_ClearChoices(dia_xardas_ndm_teachdemolog);
};

func void dia_xardas_ndm_teachdemolog_simple()
{
	if(b_teachdemonologtalent(self,other,NPC_TALENT_DEMONOLOG))
	{
		XARDASTEACHCASTDEMON_SIMPLE = TRUE;
	};
	Info_ClearChoices(dia_xardas_ndm_teachdemolog);
	Info_AddChoice(dia_xardas_ndm_teachdemolog,Dialog_Back,dia_xardas_ndm_teachdemolog_back);

	if((XARDASTEACHCASTDEMON_SIMPLE == FALSE) && (XARDASTEACHCASTDEMON_LORD == FALSE))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog( "  . " ,B_GetLearnCostTalent(other, NPC_TALENT_DEMONOLOG , 1 )),dia_xardas_ndm_teachdemenolog_simple);
	};
	if((XARDASTEACHCASTDEMON_SIMPLE == TRUE) && (XARDASTEACHCASTDEMON_LORD == FALSE) && (	DemonologSkill[0] >= 3))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog( " Learn high demonology. " ,B_GetLearnCostTalent(other, NPC_TALENT_DEMONOLOG , 1 )),dia_xardas_ndm_teachdemonolog_high);
	};
};

func void dia_xardas_ndm_teachdemonolog_high()
{
	if(b_teachdemonologtalent(self,other,NPC_TALENT_DEMONOLOG))
	{
		AI_Output(self,other, " DIA_Xardas_NDM_TeachDemonolog_High_01_00 " );	// Know the power given to you and true power will be revealed to you!
		XARDASTEACHCASTDEMON_LORD = TRUE;
	};
	Info_ClearChoices(dia_xardas_ndm_teachdemolog);
	Info_AddChoice(dia_xardas_ndm_teachdemolog,Dialog_Back,dia_xardas_ndm_teachdemolog_back);
};


instance DIA_XARDAS_NDM_PROOF(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_proof_condition;
	information = dia_xardas_ndm_proof_info;
	permanent = FALSE;
	description = " How else can I prove to you that I am worthy of becoming a Dark Mage? " ;
};


func int dia_xardas_ndm_proof_condition()
{
	if(Npc_KnowsInfo(hero,dia_xardas_ndm_howkdm) && (MIS_BECOMEKDM == LOG_Running))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_proof_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Proof_01_00 " );	// How else can I prove to you that I am worthy of becoming a mage of Darkness?
	AI_Output(self,other, " DIA_Xardas_NDM_Proof_01_01 " );	// Only the strength of your spirit can make you worthy of this honor.
	AI_Output(self,other, " DIA_Xardas_NDM_Proof_01_02 " );	// Besides, I don't have any need to test what you're capable of.
	AI_Output(self,other, " DIA_Xardas_NDM_Proof_01_03 " );	// You already proved it to me.
};


instance DIA_XARDAS_NDM_TASKS(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_condition;
	information = dia_xardas_ndm_tasks_info;
	permanent = FALSE;
	description = " Do you have any errands for me? " ;
};


func int dia_xardas_ndm_tasks_condition()
{
	if ((hero.guild ==  GIL_KDM ) || (Npc_KnowsInfo(hero,dia_xardas_ndm_howkdm) && ( MY_BECOMEDM  == LOG_Running)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_01_00 " );	// Do you have any errands for me?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_01 " );	// Hmmm... Since you're my apprentice now, I actually have a couple of simple errands for you.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_02 " );	// However, you must remember that the main thing is the threat from the dragons. This is your main goal!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_03 " );	// Okay, now about the task itself...
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_04 " );	// For experimentation, I need a large number of different ingredients, most of which you will not find in a simple trading shop.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_05 " );	// I don't have much free time to look for them myself. And I want you to bring me these very ingredients.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_06 " );	// As a necromancer, I'm most interested in human remains - dead flesh, bones and skulls. The latter is particularly preferred.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_07 " );	// But the most valuable thing for me is the heart of a demon! It will be the hardest to get.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_01_08 " );	// If you happen to have any of the above, feel free to bring it to me.
	XARDASTASKSBEGUN = TRUE;
	XARDASBUYBONES = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry( TOPIC_ADDON_DMTTEACHER , " Xardas needs ingredients for his experiments. He is mainly interested in human remains - dead flesh, bones, skulls and hearts of demons. " );
};


DIA_XARDAS_BUYBONES (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 600;
	condition = dia_xardas_buybones_condition;
	information = dia_xardas_buybones_info;
	permanent = TRUE;
	description = " I have some ingredients you need... " ;
};


func int dia_xardas_buybones_condition()
{
	if(XARDASBUYBONES == TRUE)
	{
		if ((Npc_HasItems(hero,ItMi_Skull) >  0 ) || (Npc_HasItems(hero,ItMi_Plazma) >  0 ) || (Npc_HasItems(hero,ItAt_GoblinBone) >  0 ) || (Npc_HasItems(hero,ItAt_SkeletonBone) >  0 ) || (Npc_HasItems(hero,itmi_zombiecorpse) >  0 ) || (Npc_HasItems(hero,ItAt_DemonHeart) >  0 ))
		{
			return TRUE;
		};
	};
};

func void dia_xardas_buybones_info()
{
	var int countexp;
	var int goldplus;
	AI_Output(other,self, " DIA_Xardas_BuyBones_01_00 " );	// I have some of the ingredients you need...
	AI_Output(self,other, " DIA_Xardas_BuyBones_01_01 " );	// Great! Then let's take a look at them.

	if(Npc_HasItems(other,ItAt_GoblinBone) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItAt_GoblinBone);
		B_GiveInvItems(other,self,ItAt_GoblinBone,Npc_HasItems(other,ItAt_GoblinBone));
		Npc_RemoveInvItems(self,ItAt_GoblinBone,Npc_HasItems(self,ItAt_GoblinBone));
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_02 " );	// Hmmm... looks like goblin bones.
		AI_Output(other,self, " DIA_Xardas_BuyBones_01_03 " );	// Will they be useful to you?
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_04 " );	// Quite. Although it's not quite what I expected.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 6);
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_08 " );	// What else did you bring me?
	};
	if(Npc_HasItems(other,ItAt_SkeletonBone) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItAt_SkeletonBone);
		B_GiveInvItems(other,self,ItAt_SkeletonBone,Npc_HasItems(other,ItAt_SkeletonBone));
		Npc_RemoveInvItems(self,ItAt_SkeletonBone,Npc_HasItems(self,ItAt_SkeletonBone));
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_09 " );	// Well, well... it looks like the bones of a skeleton. Quite good!
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_10 " );	// Although, of course, you could bring a little more of them.
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_12 " );	// Okay, I think this should be enough for the first time.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 8);
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_16 " );	// Anything else?
	};
	if(Npc_HasItems(other,itmi_zombiecorpse) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,itmi_zombiecorpse);
		B_GiveInvItems(other,self,itmi_zombiecorpse,Npc_HasItems(other,itmi_zombiecorpse));
		Npc_RemoveInvItems(self,itmi_zombiecorpse,Npc_HasItems(self,itmi_zombiecorpse));
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_33 " );	// Dead flesh is a very valuable ingredient.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 15);
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_36 " );	// What else do we have here?
	};
	if(Npc_HasItems(other,ItMi_Plazma) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItMi_Plazma);
		B_GiveInvItems(other,self,ItMi_Plazma,Npc_HasItems(other,ItMi_Plazma));
		Npc_RemoveInvItems(self,ItMi_Plazma,Npc_HasItems(self,ItMi_Plazma));
		AI_Output(other,self, " DIA_Xardas_HarmUndead_Done_01_01 " );	// I brought you ectoplasm.
		AI_Output(self,other, " DIA_Xardas_HarmUndead_Done_01_02 " );	// (pretty) Not bad, very good!
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 50);
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_08 " );	// What else did you bring me?
	};
	if(Npc_HasItems(other,ItMi_Skull) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItMi_Skull);
		B_GiveInvItems(other,self,ItMi_Skull,Npc_HasItems(other,ItMi_Skull));
		Npc_RemoveInvItems(self,ItMi_Skull,Npc_HasItems(self,ItMi_Skull));
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_17 " );	// Hmmm... I see your search was not in vain. The skull is a fairly rare ingredient.
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_19 " );	// Your efforts will be appreciated.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 250);
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_21 " );	// What else do you have?
	};
	if(Npc_HasItems(other,ItAt_DemonHeart) > 0)
	{
		AI_Wait(self,1);
		GOLDPLUSDEM = Npc_HasItems(other,ItAt_DemonHeart);
		B_GiveInvItems(other,self,ItAt_DemonHeart,Npc_HasItems(other,ItAt_DemonHeart));
		Npc_RemoveInvItems(self,ItAt_DemonHeart,Npc_HasItems(self,ItAt_DemonHeart));
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_22 " );	// Incredible!
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_25 " );	// Demon heart is the most valuable ingredient you could bring.
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_26 " );	// You did a great job and deserve a special award.
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_27 " );	// So, the choice is yours...
		Info_ClearChoices(dia_xardas_buybones);
		Info_AddChoice(dia_xardas_buybones, " Increase magical energy. " ,dia_xardas_buybones_mana);
		Info_AddChoice(dia_xardas_buybones, " Increase life energy. " ,dia_xardas_buybones_life);
		Info_AddChoice(dia_xardas_buybones, " Take gold. " ,dia_xardas_buybones_gold);
	}
	else
	{
		if(countexp > 0)
		{
			B_GivePlayerXP(countexp);
		};
		AI_Output(other,self, " DIA_Xardas_BuyBones_01_28 " );	// That's all.
		AI_Output(self,other, " DIA_Xardas_BuyBones_01_29 " );	// Good! Come back when you have more of the ingredients I need.
	};
};

func void dia_xardas_buybones_mana()
{
	B_RaiseAttribute_Bonus(other,ATR_MANA_MAX,GOLDPLUSDEM * 2);
	AI_Output(other,self, " DIA_Xardas_BuyBones_Mana_01_00 " );	// As you say.
	Info_ClearChoices(dia_xardas_buybones);
};

func void dia_xardas_buybones_life()
{
	B_RaiseAttribute_Bonus(other,ATR_HITPOINTS_MAX,GOLDPLUSDEM * 5);
	AI_Output(other,self, " DIA_Xardas_BuyBones_Life_01_00 " );	// As you say.
	Info_ClearChoices(dia_xardas_buybones);
};

func void dia_xardas_buybones_gold()
{
	B_GiveInvItems(self,other,ItMi_Gold,GOLDPLUSDEM * 300);
	AI_Output(other,self, " DIA_Xardas_BuyBones_Gold_01_00 " );	// As you say.
	Info_ClearChoices(dia_xardas_buybones);
};


instance DIA_XARDAS_NDM_TASKS_ONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_condition;
	information = dia_xardas_ndm_tasks_one_info;
	permanent = FALSE;
	description = " What are the errands? " ;
};


func int dia_xardas_ndm_tasks_one_condition()
{
	if(XARDASTASKSBEGUN == TRUE)
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_01_00 " );	// What are the orders?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_01 " );	// Not too hard to start with. As you know, I used to be in the Order of the Fire Mages.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_01_02 " );	// Yes, you talked about it.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_03 " );	// So, in those days, as a servant of Innos, I was engaged in one very curious study from the point of view of magic.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_04 " );	// At that time, I achieved serious success in this. But, unfortunately, he did not have time to finish the job.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_05 " );	// And when I left the order, I had to leave all the records related to these experiments in the monastery. Which I later regretted a lot.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_01_06 " );	// But why didn't you take them with you right away?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_07 " );	// Then I did not imagine that someday I would need them so much.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_08 " );	// I want these records back! Go to the monastery and take them from there.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_01_09 " );	// Okay, I'll try.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_10 " );	// No 'trying'! (seriously) Just do it...
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_01_11 " );	// Well, since I have no choice, tell me - where exactly to look for them?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_12 " );	// Part of the documents was kept in the monastery library. Getting there will not be easy - only the Fire Mages themselves have the keys to it.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_13 " );	// (smirking) But I'm sure you can come up with something.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_14 " );	// The rest of the notes are probably gathering dust in my old cell. And I still have the key with me - here, take it.
	B_GiveInvItems(self,other,ItKe_KDFPlayer,1);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_01_15 " );	// Are you sure about this? For so many years, they could have been hidden anywhere.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_16 " );	// I don't think so. Pyrokar and other mages felt that these studies were a waste of time.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_17 " );	// For them, these documents were never of much value. And hardly anything has changed since then.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_01_18 " );	// Okay, go ahead and get me these papers.
	Mob_CreateItems("BOOKSHELF_CONT_7",itwr_xardasdocs_2,1);
	Mob_CreateItems("BOOKSHELF_CONT_10",itwr_xardasdocs_1,1);
	MIS_XARDASNDMTASKSONE = LOG_Running;
	Log_CreateTopic(TOPIC_XARDASNDMTASKSONE,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSONE,LOG_Running);
	; _ _ _ _ _ _
};


instance DIA_XARDAS_NDM_TASKS_ONE_DONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_done_condition;
	information = dia_xardas_ndm_tasks_one_done_info;
	permanent = FALSE;
	description = " I brought your manuscripts. " ;
};


func int dia_xardas_ndm_tasks_one_done_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_Running) && (Npc_HasItems(hero,itwr_xardasdocs_1) >= 1) && (Npc_HasItems(hero,itwr_xardasdocs_2) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_done_info()
{
	B_GivePlayerXP(50);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_00 " );	// I brought your manuscripts.
	b_giveinvitemsmanythings(other,self);
	Npc_RemoveInvItems(other,itwr_xardasdocs_1,1);
	Npc_RemoveInvItems(other,itwr_xardasdocs_2,1);
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_01 " );	// (looking) Yes, that's really what I needed.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_02 " );	// And what are you going to do now?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_03 " );	// Now I intend to finally complete my research, and the papers you found will help me a lot in this.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_04 " );	// And what is written in them?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_05 " );	// (angrily) You're too curious! And then - I do not think that you will be able to fully understand the essence of my research.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_06 " );	// So you try first.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_07 " );	// That's insolent! Hmmm... good. These manuscripts contain the approximate formula for a complex magical spell that I have been working on for many years.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_08 " );	// What is this spell?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_09 " );	// It resembles the one you used to transfer the energy of the magic ore to Urizel before going to the temple of the Sleeper.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_10 " );	// Aha! It seems that everything is clear.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_11 " );	// Yes, but this time the purpose of the spell is slightly different. It will allow you to take all the magic power of any creature!
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_12 " );	// But why are you doing this?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_13 " );	// (angrily) But that doesn't concern you anymore! And I think you're asking too many questions.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_14 " );	// I'm just curious.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_15 " );	// (sarcastically) Absolutely! However, now you should be worried about something else.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Done_01_16 " );	// Again, you're on your own - I haven't forgotten about the dragons!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Done_01_17 " );	// Then why are you pestering me with your endless questions? You better go and get busy.
	MANUSCRIPTS1 = TRUE ;
	HARDASTIMERBENDM = Wld_GetDay();
	B_LogEntry( TOPIC_XARDASNDMTASKSONE , " I brought Xardas his old entries. " );
};

instance DIA_XARDAS_NDM_TASKS_ONE_NEW(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_new_condition;
	information = dia_xardas_ndm_tasks_one_new_info;
	important = TRUE;
	permanent = FALSE;
};

func int dia_xardas_ndm_tasks_one_new_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_Running) && (RUKOPISI1 == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_new_info()
{
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_01 " );	// (angrily) Wait!
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_02");	// ?
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_03 " );	// The second part of the manuscript you brought me is actually nothing but a cheap fake! Strange that I didn't notice it right away.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_New_01_04 " );	// How can this be?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_05 " );	// I don't know and don't want to know! The only thing that interests me at the moment is my original manuscript, which I don't have at the moment.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_New_01_06 " );	// But where to look for it now?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_07 " );	// Hmmm... She must have been kidnapped by one of the overly curious Firebenders!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_08 " );	// I doubt any of these hypocrites would admit to being interested in forbidden knowledge. But there is nothing left but to ask around.
	RUK3 = TRUE;
	; _ _ _ _ _ _
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_NDM_TASKS_ONE_NEW1(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_new1_condition;
	information = dia_xardas_ndm_tasks_one_new1_info;
	permanent = FALSE;
	description = " I found the original manuscript. " ;
};

func int dia_xardas_ndm_tasks_one_new1_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_Running) && (Npc_HasItems(hero,itwr_xardasdocs_3) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_new1_info()
{
	B_GivePlayerXP(150);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_New_01_09 " );	// I found the original manuscript.
	B_GiveInvItems(other,self,itwr_xardasdocs_3,1);
	Npc_RemoveInvItems(self,itwr_xardasdocs_3,1);
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_10");	//  ?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_New_01_11 " );	// At the fire mage named Trevius. Unfortunately, he is dead.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_12 " );	// Did you kill him?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_New_01_13 " );	// No, of course not! I found him in one of the caves, and next to his body was a real demon.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_14 " );	// Now everything is clear to me ... (mockingly) That's what it means to stick your nose into other people's secrets!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_New_01_15 " );	// But now it's not so important. The manuscript has returned to me and I can continue my research!
	B_GiveInvItems(self,hero,ItMi_Gold,1000);
	MIS_XARDASNDMTASKSONE = LOG_SUCCESS;
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSONE,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDASNDMTASKSONE , " I brought the real half of the manuscript to Xardas. " );
};

instance DIA_XARDAS_NDM_TASKS_ONE_TWO(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_two_condition;
	information = dia_xardas_ndm_tasks_one_two_info;
	permanent = TRUE;
	description = " Are there any more errands for me? " ;
};

func int dia_xardas_ndm_tasks_one_two_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_SUCCESS) && (MIS_XARDASNDMTASKSTWO == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_two_info()
{
	where int daynow;

	daynow = Wld_GetDay();
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Two_01_00 " );	// Will there be more errands for me?

	if (( XARDASTIMERBENDM  <= (daynow -  1 )) &&  ! Npc_IsDead(vlk_6027_taliasan))
	{
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_01 " );	// Yes, you're just in time! The other day I went through the notes you brought me from the monastery.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_02 " );	// They certainly helped me in my research, but along with this, even more incomprehensible questions arose that I cannot answer.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_03 " );	// I guess to sort of deal with them, I need one more thing. Or several. But I know exactly where to start.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Two_01_04");	// ?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_05 " );	// I'm interested in a rather rare book known as 'The Wasted Way'.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_06 " );	// If my memory serves me, it was once owned by a magician, whose name I, unfortunately, have already forgotten.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_07 " );	// However, he will not give it away just like that - he valued this treasure too much. At one time I already tried to get this tome from him.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Two_01_08 " );	// Where can I find this mage?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_09 " );	// If I knew that, I wouldn't be asking for your help!
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_10 " );	// I would just send a couple of my servants to him, who would convince him to give me the book.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Two_01_11 " );	// Looks like you. Well, do you know anything else about him?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_12 " );	// I just remembered that he once served as a city magician in Khorinis. Surely someone in town knows where to find it.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_Two_01_13 " );	// Okay, I'll try to find this magician and bring you a book.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_14 " );	// Try hard! (snickeringly) You won't let me be disappointed in my decision to take you as an apprentice, will you?
		MIS_XARDASNDMTASKSTWO = LOG_Running;
		Log_CreateTopic(TOPIC_XARDASNDMTASKSTWO,LOG_MISSION);
		Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_Running);
		if(TALIASANTELLWHOMAGE == TRUE)
		{
			B_LogEntry( TOPIC_XARDASNDMTASKSTWO , " Now Xardas wants me to get him one rare book called 'The Waste Way'. According to him, the last owner of this relic was a magician who lived in Khorinis. If you can get this book anywhere, then only with him. Not the former city magician - Gallahad, did Xardas mean ?! " );
		}
		else
		{
			B_LogEntry( TOPIC_XARDASNDMTASKSTWO , " Now Xardas wants me to get him one rare book called 'The Waste Way'. According to him, the last owner of this relic was a magician who lived in Khorinis. If you can get this book anywhere, then only with him. True, Xardas could not tell me where to look for this magician. " );
		};
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_Two_01_28 " );	// (grouchily) Not yet. Maybe later.
	};
};


instance DIA_XARDAS_NDM_TASKS_ONE_TWODONEKILL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_twodonekill_condition;
	information = dia_xardas_ndm_tasks_one_twodonekill_info;
	permanent = FALSE;
	description = " I found that mage. " ;
};


func int dia_xardas_ndm_tasks_one_twodonekill_condition()
{
	if((MIS_XARDASNDMTASKSTWO == LOG_Running) && !Npc_IsDead(vlk_6027_taliasan) && (XARDASBRIGBOOKSPECIAL == FALSE) && ((XARDASMISSBOOKFOREVER == TRUE) || (XARDASMISSBOOK == TRUE)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_twodonekill_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_01 " );	// I found that mage. His name is Gallahad.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_02 " );	// Oh, yes... now I remember him too. And where is he now?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_03 " );	// He lives in the city.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_04 " );	// What about the book I asked you to bring?
	TELLABOUTGALLAHAD = TRUE;
	if(XARDASMISSBOOKFOREVER == TRUE)
	{
		B_GivePlayerXP(100);
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_05 " );	// He doesn't have it.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_06 " );	// How is it not?!
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_07 " );	// Gallahad said he sold it to a traveling merchant a long time ago and...
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_08 " );	// What?! And did you believe him?
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_09");	//...
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_10 " );	// Stupid! He's got you wrapped around his finger like a snotty boy! Only an idiot would trade knowledge for money!
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_11 " );	// And besides, Gallahad is a magician, albeit a useless one! For any of us, the secrets of magic are far more important than the dull sheen of despicable metal. He would never do that!
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_12 " );	// And now what to do?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_13 " );	// (grouchily) Nothing for you. And I will send a couple of my demons to this worm. I think they can convince him to give me this book.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_14 " );	// You can get on with more pressing matters for now. But be prepared that I still need your services.
		MIS_XARDASNDMTASKSTWO = LOG_FAILED;
		XARDASTIMERQUEST = Wld_GetDay();
		B_LogEntry_Failed(TOPIC_XARDASNDMTASKSTWO);
		B_KillNpc(vlk_6027_taliasan);
	}
	else if(XARDASMISSBOOK == TRUE)
	{
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_15 " );	// He still has it, but Gallahad did not want to give it to me.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_16 " );	// It's worse for him! Let's see how he talks when I send a couple of my demons to him.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_17 " );	// I think they can convince him to give me this book.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_18 " );	// Aren't the measures too steep?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_19 " );	// (angrily) Are you still going to teach me what to do?
		Info_ClearChoices(dia_xardas_ndm_tasks_one_twodonekill);
		Info_AddChoice(dia_xardas_ndm_tasks_one_twodonekill, " No, no! Do as you please. " ,dia_xardas_ndm_tasks_one_twodonekill_killgalah);
		Info_AddChoice(dia_xardas_ndm_tasks_one_twodonekill, " I think I can fix this problem myself. " ,dia_xardas_ndm_tasks_one_twodonekill_dontworry);
	};
};

func void dia_xardas_ndm_tasks_one_twodonekill_killgalah()
{
	B_GivePlayerXP(300);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_KillGalah_01_01 " );	// No, what are you! Do what you know.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_KillGalah_01_02 " );	// (sarcastically) Exactly.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_KillGalah_01_03 " );	// You can get on with more pressing matters for now. But be prepared that I still need your services.
	B_KillNpc(vlk_6027_taliasan);
	MIS_XARDASNDMTASKSTWO = LOG_SUCCESS;
	XARDASTIMERQUEST = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDASNDMTASKSTWO , " Xardas is going to send a couple of his demons to Gallahad to knock the book out of him. Looks like Gallahad is done! " );
	Info_ClearChoices(dia_xardas_ndm_tasks_one_twodonekill);
};

func void dia_xardas_ndm_tasks_one_twodonekill_dontworry()
{
	B_GivePlayerXP(150);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_01 " );	// I just think I can fix this problem myself.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_02 " );	// (in disbelief) Are you sure about that?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_03 " );	// Absolutely! And besides, I do not think that Gallahad deserved such a fate.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_04 " );	// Good. But look, don't come back to me without a book, otherwise my demons will take care of you!
	B_LogEntry( TOPIC_XARDASNDMTASKSTWO , " I told Xardas about my conversation with Gallahad. After listening to me, Xardas already wanted to send a couple of his demons to the magician to beat the book out of him. But I managed to dissuade him from this idea. Now I should think about how get this book. " );
	Info_ClearChoices(dia_xardas_ndm_tasks_one_twodonekill);
};


instance DIA_XARDAS_NDM_TASKS_TWO_DONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_two_done_condition;
	information = dia_xardas_ndm_tasks_two_done_info;
	permanent = FALSE;
	description = " I have the book! " ;
};


func int dia_xardas_ndm_tasks_two_done_condition()
{
	if((MIS_XARDASNDMTASKSTWO == LOG_Running) && (Npc_HasItems(hero,itwr_umsonst_01) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_two_done_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_Done_01_01 " );	// I have the book!
	B_GiveInvItems(other,self,itwr_umsonst_01, 1 );
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_Done_01_02 " );	// (angrily) That's what I thought - a few pages missing!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_Done_01_03 " );	// But don't reproach yourself for this - it's not your fault. I should have guessed!
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_Done_01_04 " );	// And now what?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_Done_01_05 " );	// I hope this trouble doesn't prevent me from continuing my experiment... (thoughtfully) Although it's too early to talk about it.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_Done_01_06 " );	// I need to study everything written here. In the meantime, you can get on with more pressing matters.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_Done_01_07 " );	// But be prepared, I'll still need your services.
	MIS_XARDASNDMTASKSTWO = LOG_SUCCESS;
	XARDASTIMERQUEST = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDASNDMTASKSTWO , " I brought Xardas the book he was looking for. However, this did not make him very happy: the book is missing several very important pages. " );
};


instance DIA_XARDAS_NDM_TASKS_TWO_DONEDEAD(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_two_donedead_condition;
	information = dia_xardas_ndm_tasks_two_donedead_info;
	permanent = FALSE;
	description = " This mage is dead! " ;
};


func int dia_xardas_ndm_tasks_two_donedead_condition()
{
	if((MIS_XARDASNDMTASKSTWO == LOG_Running) && (TALIASANISDEAD == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_two_donedead_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_01 " );	// This mage is dead!
	if(TELLABOUTGALLAHAD == TRUE)
	{
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_02 " );	// You mean Gallahad?
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_03 " );	// Yes. Looks like someone slapped the poor guy!
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_04 " );	// What are you talking about?
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_05 " );	// I'm talking about the magician who had the book you needed. His name was Gallahad.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_06 " );	// He lived in the port quarter of Khorinis. Looks like the poor thing was slapped by someone.
	};
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_07 " );	// Well, okay. What about the book?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_08 " );	// He didn't have it with him.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_09 " );	// Are you sure about this?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_10 " );	// Absolutely.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_11 " );	// Well, if so, then maybe he just hid it somewhere well.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_12 " );	// I'll send a few of my servants out to find it. They will find this book!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Two_DoneDead_01_13 " );	// In the meantime, you can get on with more pressing matters. But be prepared, I still need your services.
	MIS_XARDASNDMTASKSTWO = LOG_SUCCESS;
	XARDASTIMERQUEST = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDASNDMTASKSTWO , " I brought the news of Gallahad's death to Xardas and also told him that he did not have the book with him. Maybe Gallahad just hid it well from prying eyes. Xardas will send some of his servants to look for her, but I can do other things. " );
};

instance DIA_XARDAS_NDM_TASKS_FOUR(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_four_condition;
	information = dia_xardas_ndm_tasks_four_info;
	permanent = FALSE;
	description = " Do you still need my help? " ;
};


func int dia_xardas_ndm_tasks_four_condition()
{
	where int daynow;
	daynow = Wld_GetDay();

	if((MIS_XARDASNDMTASKSTWO == LOG_SUCCESS) && (XARDASTIMERQUEST <= (daynow - 2)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_four_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_00 " );	// Do you still need my help?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_01 " );	// (grimly) Yes. Just this time, try to take my order as seriously as possible! It is much more complicated than the ones I gave you earlier.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_02 " );	// So... The other day I went through the notes you brought me from the monastery again.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_03 " );	// And after much thought, I came to the conclusion that I need one more thing to complete the research.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_04");	//?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_05 " );	// We are talking about one of the oldest tomes dedicated to the magic of necromancers - the Necronomicon!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_06 " );	// Have you ever heard of this artifact?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_07 " );	// Honestly, no.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_08 " );	// I thought so... (smiles) Few people know about its existence. But for me, it's even better!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_09 " );	// I also don't know much about this artifact. But my information is quite enough to take possession of this treasure.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_10 " );	// So you know where to look for it?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_11 " );	// I didn't say that! But I know someone who will help us with this.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_12 " );	// His name is Nergal! He was one of the most powerful necromancers of his time and the last master of the Necronomicon.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_13 " );	// Unfortunately, Nergal's soul has long since passed into the world of shadows... and it will not be so easy to find out in whose hands the Necronomicon is now.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_14 " );	// And what are you planning to do?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_15 " );	// It's simple! Knowledge of the dark runes of the necromancer will help me summon the spirit of Nergal into this world, but I will need your help as well.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_16 " );	// What should I do?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_17 " );	// (serious) Somewhere in the eastern part of this valley is the old tower of this necromancer. Your path is right there!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_18 " );	// I don't know what exactly awaits you there, but I think you'll understand everything when you get there.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_19 " );	// Well, I think there will be no problems with this.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_Four_01_20 " );	// Maybe... (snidely) But as far as I know, the entrance to this tower is closed. You'll have to figure out how to get there yourself.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_Four_01_21 " );	// I didn't expect anything else.
	MIS_XARDASTASKSFOUR = LOG_Running;
	Log_CreateTopic(TOPIC_XARDASTASKSFOUR,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDASTASKSFOUR,LOG_Running);
	; _ _ _ _ _ _
	Log_AddEntry( TOPIC_XARDASTASKSFOUR , " First, I need to go to the old Nergal tower. What awaits me there, I will find out on the spot. But the problem is that the entrance to the Nergal tower is closed and it is impossible to get there. Who could help me? " );
};


instance DIA_XARDAS_NDM_TASKS_FOURPROGRESS(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_fourprogress_condition;
	information = dia_xardas_ndm_tasks_fourprogress_info;
	permanent = FALSE;
	description = " I've been to Nergal's tower. " ;
};


func int dia_xardas_ndm_tasks_fourprogress_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (Npc_HasItems(hero,itmi_nergalcorpse) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourprogress_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourProgress_01_00 " );	// I've been to Nergal's tower.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgress_01_01 " );	// (admiringly) Did you succeed? Looks like I gave you this job for a reason.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgress_01_02 " );	// Tell me what did you find out?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourProgress_01_03 " );	// Nothing interesting. But I did manage to find something.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgress_01_04 " );	// And what is this?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourProgress_01_05 " );	// I think it's better if you take a look at it yourself.
	B_GiveInvItems(other,self,itmi_nergalcorpse,1);
	Npc_RemoveInvItems(self,itmi_nergalcorpse,1);
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgress_01_06 " );	// That's right! This is just what I needed.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgress_01_07 " );	// Now, nothing will stop me from summoning Nergal's soul into this world. And I will know the secret of the Necronomicon!
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourProgress_01_08 " );	// What should I do?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgress_01_09 " );	// Nothing yet. You can do other things.
	) ; _ _ _ _ _
	RITUALNERGALTIMER = Wld_GetDay();
};


instance DIA_XARDAS_NDM_TASKS_FOURPROGRESSTWO(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_fourprogresstwo_condition;
	information = dia_xardas_ndm_tasks_fourprogresstwo_info;
	permanent = FALSE;
	description = " When can you perform this ritual? " ;
};


func int dia_xardas_ndm_tasks_fourprogresstwo_condition()
{
	where int daynow;
	daynow = Wld_GetDay();
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALTIMER > (daynow - 2)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourprogresstwo_info()
{
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_00 " );	// When can you perform this ritual?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_01 " );	// (thinking) I can't tell you exactly. The call of the soul is an extremely difficult task in itself!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_02 " );	// And if we are talking about a powerful magician, like Nergal was, then it is completely deadly!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_03 " );	// Rushing here is highly undesirable. It is necessary to think over every little thing, otherwise any mistake can cost you your life!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_04 " );	// By the way...(grouchily) Why did you ask about this?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_05 " );	// I would like to participate in this ritual. You do not mind?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_06 " );	// Hmmm... I really need a few helpers to perform this ritual.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourProgressTwo_01_07 " );	// Well, I don't mind.
	RITUALNERGALPREPARE = TRUE;
	B_LogEntry( TOPIC_XARDASTASKSFOUR , " Xardas has no objection to me taking part in the ritual to summon the soul of the necromancer Nergal. " );
};


instance DIA_XARDAS_NDM_TASKS_FOURRITUALREADY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_fourritualready_condition;
	information = dia_xardas_ndm_tasks_fourritualready_info;
	permanent = TRUE;
	description = " Are you ready for the ritual? " ;
};


func int dia_xardas_ndm_tasks_fourritualready_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALPREPARE == TRUE) && (RITUALNERGALREADY == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourritualready_info()
{
	where int daynow;
	daynow = Wld_GetDay();
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_00 " );	// Are you ready for the ritual?
	if(RITUALNERGALTIMER <= (daynow - 2))
	{
		B_GivePlayerXP(500);
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_01 " );	// Yes, everything is ready. We can start!
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_02 " );	// And what should I do?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_03 " );	// Listen carefully and remember. As you probably already noticed, next to you on the floor is a magic pentagram.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_04 " );	// Stand at the end of the star to my left and don't leave that spot until I tell you to.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_05 " );	// In other words, don't go inside the pentagram itself. It is very important!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_06");	//?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_07 " );	// During the ritual, everyone who takes part in it forms a single magical barrier.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_08 " );	// When Nergal's soul comes to this world, this barrier will protect us from her rampage.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_09 " );	// So try to take this very seriously.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_10 " );	// I got it.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_11 " );	// Then let's not waste time - let's start the ritual!
		B_LogEntry( TOPIC_XARDASTASKSFOUR , " Everything is ready for Xardas to perform the ritual. " );
		Info_ClearChoices(dia_xardas_ndm_tasks_fourritualready);
		Info_AddChoice(dia_xardas_ndm_tasks_fourritualready," .",dia_xardas_ndm_tasks_fourritualready_ok);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_01_12 " );	// (grouchily) Not yet. Come back later!
	};
};

func void dia_xardas_ndm_tasks_fourritualready_ok()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_Ok_01_01");	// .
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourRitualReady_Ok_01_02 " );	// Great! Remember what I told you and everything will be fine.
	RITUALNERGALREADY = TRUE;
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"WaitForPlayerRitual");
	PC_Psionic.aivar[AIV_EnemyOverride] = TRUE;

	if(LesterGoXar == TRUE)
	{
		B_StartOtherRoutine(PC_Psionic,"Nergal");
	};
};


instance DIA_XARDAS_RITUALPREPAREHURRY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualpreparehurry_condition;
	information = dia_xardas_ritualpreparehurry_info;
	permanent = TRUE;
	important = TRUE;
};


func int dia_xardas_ritualpreparehurry_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALREADY == TRUE) && (XARDASFINISHRITUALBEGAN == FALSE) && Npc_IsInState(self,ZS_Talk) && (Npc_GetDistToWP(hero,"NW_XARDAS_RITUAL_04") >= 150))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualpreparehurry_info()
{
	AI_Output(self,other, " DIA_Xardas_RitualPrepareHurry_01_01 " );	// (grouchily) What are you waiting for?! Stand on the end of the pentagram, which is to my left, and we will begin the ritual.
	AI_Output(other,self,"DIA_Xardas_RitualPrepareHurry_01_02");	// .
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_RITUALPREPARE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualprepare_condition;
	information = dia_xardas_ritualprepare_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_xardas_ritualprepare_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALREADY == TRUE) && (Npc_GetDistToWP(hero,"NW_XARDAS_RITUAL_04") < 100) && (Npc_GetDistToWP(self,"NW_XARDAS_RITUAL_00") < 100))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualprepare_info()
{
	AI_Output(self,other, " DIA_Xardas_RitualPrepare_01_01 " );	// So let's get started. And remember - do not go within the limits of the pentagram!
	AI_Output(other,self, " DIA_Xardas_RitualPrepare_01_02 " );	// I got it! Let's get started already.
	AI_Output(self,other,"DIA_Xardas_RitualPrepare_01_03");	//.
	AI_StopProcessInfos(self);
	XARDASFINISHRITUALBEGAN = TRUE;
	Npc_ExchangeRoutine(self,"XardasRitual");
	self.name[0] = "";
};


instances of DIA_XARDAS_RITUALDONE (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualdone_condition;
	information = dia_xardas_ritualdone_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_xardas_ritualdone_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (XARDASFINISHRITUALOK == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualdone_info()
{
	self.name[ 0 ] = " Xardas " ;
	B_GivePlayerXP(1000);
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_01 " );	// (powerfully) It's over - the ritual is complete!
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_02 " );	// And what did you find out?
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_03 " );	// Enough to get your hands on the Necronomicon now!
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_04 " );	// Hmmm. And this necromancer turned out to be more powerful than I thought. I had a hard time getting the truth out of him!
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_05 " );	// But now it's over! It remains to go and pick up this artifact where it is now.
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_06 " );	// And where is this place?
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_07 " );	// Very close. On the west coast of the island stands the dark stronghold of Acheron!
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_08 " );	// It's a huge black tower with tall pointed spiers. You may have seen her before.
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_09 " );	// I remember something...
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_10 " );	// So. At the very top of this monolith, Nergal hid the Necronomicon!
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_11 " );	// And you didn't know about it?
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_12 " );	// I guessed, but couldn't check. The entrance to the tower was guarded by an immortal creature that was born by the Darkness itself!
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_13 " );	// And how to deal with it then, I didn't know either. But now, after meeting Nergal, everything has changed.
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_14 " );	// Then you should visit there again!
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_15 " );	// (grouchily) Not for me, but for you! I'm too busy with other urgent matters right now.
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_16 " );	// Okay. And how can I defeat this immortal being?
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_17 " );	// It's very simple. His weakness is his opposite!
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_18 " );	// Since this creature was created by the magic of Darkness, the magic light should kill it!
	AI_Output(other,self, " DIA_Xardas_RitualDone_01_19 " );	// Yes, really easy.
	AI_Output(self,other, " DIA_Xardas_RitualDone_01_20 " );	// Then act. Go and bring me the Necronomicon!
	XARDASTELLMEOSTA = TRUE ;
	B_LogEntry( TOPIC_XARDASTASKSFOUR , " The ritual of summoning the necromancer Nergal is completed, and now we know where to look for the Necronomicon. It is located on top of a dark tower located on the western coast of the island. The entrance to the tower is guarded by an immortal creature generated by Darkness itself. Now it is also impossible to cope with it will be difficult - this creature can kill a simple light. " );
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"Xar");
	PC_Psionic.aivar[AIV_EnemyOverride] = FALSE ;

	if(LesterGoXar == TRUE)
	{
		B_StartOtherRoutine(PC_Psionic,"Xardas");	
	};
};


instance DIA_XARDAS_RITUALFAIL (C_Info);
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualfail_condition;
	information = dia_xardas_ritualfail_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_xardas_ritualfail_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (XARDASRITUALFAIL == TRUE) && (NERGALISDEAD == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualfail_info()
{
	self.name[ 0 ] = " Xardas " ;
	B_GivePlayerXP(100);
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_01 " );	// (angrily) Stupid! What have you done?!
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_02 " );	// I told you not to dare to go inside the pentagram!
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_03 " );	// Now, because of your stupidity, we'll never know the secret of the Necronomicon!
	AI_Output(other,self, " DIA_Xardas_RitualFail_01_04 " );	// Don't worry! I know where we can find him.
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_05 " );	// What?! What the hell are you talking about?
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_06 " );	// Nergal's soul is dead! But only she could tell us about it ...
	AI_Output(other,self, " DIA_Xardas_RitualFail_01_08 " );	// Before trying to kill me, Nergal revealed this secret to me and told me how to get the artifact you were interested in.
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_09 " );	// But that can't be! Why on earth would Nergal do this?
	AI_Output(other,self, " DIA_Xardas_RitualFail_01_10 " );	// I have no idea. And does it matter now?
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_11 " );	// Hmmm... Well, if you really know how to get the Necronomicon, go and get it for me!
	AI_Output(self,other, " DIA_Xardas_RitualFail_01_12 " );	// And I hope you're not lying. I don't like being made into an idiot!
	B_LogEntry( TOPIC_XARDASTASKSFOUR , " Xardas did not believe that I was able to extract the secret of the Necronomicon from Nergal. I should have brought this artifact to him to convince him otherwise. " );
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"Xar");
	PC_Psionic.aivar[AIV_EnemyOverride] = FALSE ;

	if(LesterGoXar == TRUE)
	{
		B_StartOtherRoutine(PC_Psionic,"Xardas");	
	};
};


instance DIA_XARDAS_NDM_TASKS_FOURDONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_tasks_fourdone_condition;
	information = dia_xardas_ndm_tasks_fourdone_info;
	permanent = FALSE;
	description = " I have the Necronomicon! " ;
};


func int dia_xardas_ndm_tasks_fourdone_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (Npc_HasItems(hero,itwr_necronomicon) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourdone_info()
{
	B_GivePlayerXP(2000);
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_01 " );	// I have the Necronomicon!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_04 " );	// Very good! Now let me see this treasure! I'm already burning with impatience to see it with my own eyes.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_06");	//.
	B_GiveInvItems(other,self,itwr_necronomicon,1);
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_07 " );	// Finally! Now I have this book in my hands! You have no idea what she means to me.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_08");	//  ?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_09 " );	// Any dark magician dreams of taking possession of this treasure, and now I am HIS OWNER!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_10 " );	// No wonder Nergal was such a powerful necromancer in life. All thanks to the Necronomicon!
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_11 " );	// And even after death, its owner did not lose his power at all.
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_12 " );	// Got it. And now what?
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_13 " );	// Nothing... (laughs) Or were you hoping for some kind of representation of the capabilities of this artifact?
	AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_14 " );	// No, just asking.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_15 " );	// Remember! The Necronomicon does not endow its owner with power itself, it only carries wisdom and knowledge, which are the key to possessing the first.
	AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_16 " );	// By the way, I want to ask you - have you already tried to read it yourself?
	if(((NECRONOMICONBONUS == TRUE) && (NECRONOMICONBONUSTRY == TRUE)) || ((NECRONOMICONBONUS == TRUE) && (NECRONOMICONBONUSTRY == FALSE)))
	{
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_17 " );	// Yes, I read it.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_18 " );	// You should have figured it out by then...(mighty) And surely this experience was not in vain for you!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_19");	// .
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_20 " );	// (slyly) I don't doubt it. But okay, enough about that already! We have more important things to do.
	}
	else if((NECRONOMICONBONUS == FALSE) && (NECRONOMICONBONUSTRY == TRUE))
	{
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_22 " );	// I tried but didn't work. The book did not want to reveal its secrets!
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_23 " );	// (slyly) That's understandable. After all, it is subject only to the will of dark magicians, and you are not one. But now it doesn't matter anymore!
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_24 " );	// So enough about that already! We have more important things to do.
	}
	else if((NECRONOMICONBONUS == FALSE) && (NECRONOMICONBONUSTRY == FALSE))
	{
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_26 " );	// No, I haven't tried it. Was it necessary?
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_27 " );	// (surprised) Have you tried it? You surprise me a little.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_28 " );	// Get your hands on such a treasure and not try to find out its secret? I don't understand this.
		AI_Output(other,self, " DIA_Xardas_NDM_Tasks_FourDone_01_29 " );	// It just so happened. It just wasn't up to it.
		AI_Output(self,other, " DIA_Xardas_NDM_Tasks_FourDone_01_30 " );	// Well, that's your own business. Now enough about that! We have more important things to do.
	};
	MIS_XARDASTASKSFOUR = LOG_SUCCESS;
	Log_SetTopicStatus(TOPIC_XARDASTASKSFOUR,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDASTASKSFOUR , " I brought the Necronomicon to Xardas. " );
};


instance DIA_XARDAS_BRINGNECRONOMICONNOQUEST(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_bringnecronomiconnoquest_condition;
	information = dia_xardas_bringnecronomiconnoquest_info;
	permanent = FALSE;
	description = " I have something very interesting for you. " ;
};


func int dia_xardas_bringnecronomiconnoquest_condition()
{
	if (( MY_XARDASTASKSFOUR  ==  FALSE ) && (Npc_HasItems(hero,itwr_necronomicon) >=  1 ) && (hero.guild !=  GIL_KDM ) && (hero.guild !=  GIL_NDM )) ;
	{
		return TRUE;
	};
};

func void dia_xardas_bringnecronomiconnoquest_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_00 " );	// I have something very interesting for you.
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_01 " );	// Yes? What are you talking about?
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_02 " );	// Here, take a look for yourself.
	B_GiveInvItems(other,self,itwr_necronomicon,1);
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_03 " );	// (surprised) Incredible! Where did you find this book?
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_04 " );	// In one old tower. Looks like a pretty valuable item!
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_05 " );	// (indignantly) Valuable thing?! Do you even have the slightest idea what it is?
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_06 " );	// What is this?
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_07 " );	// (with reproach) This THING, as you put it, is nothing but the Necronomicon - the oldest tome dedicated to the magic of necromancers!
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_08 " );	// Any dark magician dreams of taking possession of this treasure. Not to mention that, until recently, no one even knew exactly where this artifact was hidden!
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_09 " );	// It turns out I'm very lucky.
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_10 " );	// And not only you... (slyly) Me too!
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_11 " );	// You wouldn't mind if I kept this book, would you? It's useless to you anyway.
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_13 " );	// Why is that?
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_14 " );	// Her secrets are subject only to the will of dark magicians. For the rest, it is of absolutely no value.
	AI_Output(other,self, " DIA_Xardas_BringNecronomiconNoQuest_01_15 " );	// Well, if you really need it, you can take it.
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_16 " );	// Thank you. To be honest, I didn't expect anything else.
	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_17 " );	// And I, in turn, will give something more useful for you than this book.

	if((other.guild == GIL_KDF) || (other.guild == GIL_KDW) || (other.guild == GIL_GUR) || (other.guild == GIL_KDM) || (other.guild == GIL_NOV) || (other.guild == GIL_NDM) || (other.guild == GIL_NDW))
	{
		AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_22 " );	// Here, take this spirit elixir!
		B_GiveInvItems(self,other,ItPo_Perm_Mana,1);
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_20 " );	// Here, take this elixir of life!
		B_GiveInvItems(self,other,ItPo_Perm_Health,1);
	};

	AI_Output(self,other, " DIA_Xardas_BringNecronomiconNoQuest_01_24 " );	// Would that suit you?
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_25");	//.
};

instance DIA_XARDAS_PYROKINEZ(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_pyrokinez_condition;
	information = dia_xardas_pyrokinez_info;
	permanent = FALSE;
	description = " What is that rune on your desk? " ;
};

func int dia_xardas_pyrokinez_condition()
{
	if ((Chapter >=  2 ) && ((hero.guild ==  GIL_KDM ) || (hero.guild ==  GIL_NDM )))
	{
		return TRUE;
	};
};

func void dia_xardas_pyrokinez_info()
{
	AI_Output(other,self, " DIA_Xardas_HarmUndead_01_00 " );	// What is that rune on your desk?
	AI_Output(self,other, " DIA_Xardas_HarmUndead_01_01 " );	// Oh, this one? (looking around) It contains a spell to destroy the undead. Pretty rare, by the way.
	AI_Output(self,other, " DIA_Xardas_HarmUndead_01_02 " );	// And for those who deal with the creatures of Beliar - it is also truly priceless!
	AI_Output(other,self, " DIA_Xardas_HarmUndead_01_03 " );	// Impressive. Is there any way I can get one like this?
	AI_Output(self,other, " DIA_Xardas_HarmUndead_01_04 " );	// I understand your interest. Well, I can give it to you.
	AI_Output(self,other, " DIA_Xardas_HarmUndead_01_05 " );	// But first, you'll have to do me a little favor.
	AI_Output(self,other, " DIA_Xardas_HarmUndead_01_07 " );	// Bring me five clots of ectoplasm. It will serve me to create a new, more powerful rune.
	MIS_Pyrokinez = LOG_Running;
	Log_CreateTopic(TOPIC_XARDAS_PYROKINEZ,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDAS_PYROKINEZ,LOG_Running);
	B_LogEntry( TOPIC_XARDAS_PYROKINEZ , " Xardas promised to give me a rune of destruction of the undead if I brought him five clots of ectoplasm. " );
};


instance DIA_Xardas_Pyrokinez_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pyrokinez_Done_condition;
	information = DIA_Xardas_Pyrokinez_Done_info;
	permanent = FALSE;
	description = " I brought you ectoplasm. " ;
};

func int DIA_Xardas_Pyrokinez_Done_condition()
{
	if((Npc_HasItems(hero,ITMI_PLAZMA) >= 5) && (MIS_Pyrokinez == LOG_Running))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pyrokinez_Done_info()
{
	B_GivePlayerXP(500);
	AI_Output(other,self, " DIA_Xardas_HarmUndead_Done_01_01 " );	// I brought you ectoplasm.
	B_GiveInvItems(other,self,ITMI_PLAZMA,5);
	Npc_RemoveInvItems(self,ITMI_PLAZMA,5);
	AI_Output(self,other, " DIA_Xardas_HarmUndead_Done_01_02 " );	// (pretty) Not bad, very good!
	AI_Output(self,other, " DIA_Xardas_HarmUndead_Done_01_03 " );	// And here is your rune. I'm sure you'll like it!
 	B_GiveInvItems(self,other,ItRu_HarmUndead,1);
 	AI_Output(self,other, " DIA_Xardas_HarmUndead_Done_01_04 " );	// Use it against the most powerful undead.
	MIS_Pyrokinez = LOG_SUCCESS;
	Log_SetTopicStatus(TOPIC_XARDAS_PYROKINEZ,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDAS_PYROKINEZ , " I brought ectoplasm to Xardas. I have the rune! " );
};


instances of DIA_Xardas_RobaUp (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_condition;
	information = DIA_Xardas_RobaUp_info;
	permanent = FALSE;
	description = " Can I upgrade my robe? " ;
};

func int DIA_Xardas_RobaUp_condition()
{
	if((KNOWSHOWDEALSOULS == TRUE) && (NEKR_H_ROBA == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_info()
{
	AI_Output(other,self, " DIA_Xardas_RobaUp_01_00 " );	// Can I improve my robe? I feel like she doesn't protect me well enough.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_01 " );	// Well, if Beliar himself is favorable to you, then perhaps you can consecrate your robe.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_02 " );	// And keep in mind that only the robes of the highest dark magician can be consecrated!
	AI_Output(other,self, " DIA_Xardas_RobaUp_01_03 " );	// Sanctify?! Is dark magic capable of such a thing?
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_04 " );	// For a long time, one means has been known by which the servants of Beliar consecrate various objects - mainly their robes.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_05 " );	// This elixir is called 'Breath of Death', and it's just not to be found anywhere.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_06 " );	// Unfortunately, the recipe for this elixir has long been lost. I can only assume that it was divided into two or three parts.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_07 " );	// So you'll have to figure this out on your own, I'm no help here.
	AI_Output(other,self, " DIA_Xardas_RobaUp_01_08 " );	// And if I still manage to get this elixir - what should I do with it?
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_09 " );	// If you can get it, you'll also need soul stones for the consecration ritual. I think at least a hundred.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_10 " );	// And then you will need to turn to Beliar himself with a certain prayer.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_11 " );	// Remember: SHATAR ATN BOLMAR KRAT ISAK MOTAL!
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_12 " );	// And if Beliar considers that you are worthy of his attention, he will consecrate your robe.
	AI_Output(other,self, " DIA_Xardas_RobaUp_01_13 " );	// Nothing else?
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_14 " );	// No way! I have already warned you that the path of the dark magician is difficult and dangerous.
	AI_Output(self,other, " DIA_Xardas_RobaUp_01_15 " );	// Don't be a lost sheep now! Go and try to find this recipe.
	Log_CreateTopic(TOPIC_XARDAS_ROBA,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDAS_ROBA,LOG_Running);
	B_LogEntry( TOPIC_XARDAS_ROBA , " I asked Xardas about my robe. He told me that it is possible to improve it, but it is very difficult. In order to have a chance of success, you need to get as many soul stones as possible. I also need a special elixir, but how almost no one knows how to cook it. The mentor hinted that there may be no more than two or three separate parts of the recipe on the island that I need. Well, I should go through all the dark corners and shake the local undead. " );
	MIS_ROBA_XARDAS = LOG_Running;
};

instance DIA_Xardas_RobaUp_Find(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_Find_condition;
	information = DIA_Xardas_RobaUp_Find_info;
	permanent = FALSE;
	description = " I found the recipe for 'Breath of Death'. " ;
};

func int DIA_Xardas_RobaUp_Find_condition()
{
	if((MIS_ROBA_XARDAS == LOG_Running) && (Npc_HasItems(other,itwr_death1) >= 1) && (Npc_HasItems(other,itwr_death2) >= 1) && (knows_breath_of_death1 == TRUE) && (knows_breath_of_death2 == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_Find_info()
{
	B_GivePlayerXP(1500);
	AI_Output(other,self, " DIA_Xardas_RobaUp_Find_00_01 " );	// I found the recipe for 'Breath of Death'.
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_02 " );	// (respectfully) You never cease to amaze me! Tell me, did you manage to find both parts of the recipe?
	AI_Output(other,self, " DIA_Xardas_RobaUp_Find_00_03 " );	// Of course.
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_04 " );	// And I hope you've already read the formula for making this potion?
	AI_Output(other,self, " DIA_Xardas_RobaUp_Find_00_05 " );	// Of course.
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_06 " );	// Great! Then I suppose you won't mind if I take them from you?
	AI_Output(other,self, " DIA_Xardas_RobaUp_Find_00_07 " );	// Well, if you need them so much, take them.
	B_GiveInvItemsManyThings(other,self);
	Npc_RemoveInvItems(hero,itwr_death1,2);
	Npc_RemoveInvItems(hero,itwr_death2,1);
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_08 " );	// Finally! You can't imagine how long I wanted to get these ancient records.
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_09 " );	// And so that you do not decide that you will leave me empty-handed for this...
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_10 " );	// ...I will personally prepare this elixir for you!
	AI_Output(other,self, " DIA_Xardas_RobaUp_Find_00_11 " );	// I did not even count on such help.
	AI_Output(self,other, " DIA_Xardas_RobaUp_Find_00_12 " );	// No thanks. Come back in three days - I believe by this time the elixir will be ready.
	MIS_ROBA_XARDAS = LOG_SUCCESS;
	HARDASTIMERBENDM = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDAS_ROBA,LOG_SUCCESS);
	B_LogEntry( TOPIC_XARDAS_ROBA , " I gave Xardas two parts of the recipe. In return, the dark magician promised to personally brew the 'Death's Breath' elixir for me. According to him, the drink will be ready in three days. " );
};

instance DIA_Xardas_RobaUp_Potion_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_Potion_Done_condition;
	information = DIA_Xardas_RobaUp_Potion_Done_info;
	important = FALSE;
	description = " How is my elixir doing? " ;
};

func int DIA_Xardas_RobaUp_Potion_Done_condition()
{
	where int daynow;

	daynow = Wld_GetDay();

	if((MIS_ROBA_XARDAS == LOG_SUCCESS) && (XARDASTIMERBENDM > 0) && (XARDASTIMERBENDM < (daynow - 3)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_Potion_Done_info()
{
	AI_Output(other,self, " DIA_Xardas_RobaUp_Potion_Done_01_00 " );	// How's my elixir doing?
	AI_Output(self,other, " DIA_Xardas_RobaUp_Potion_Done_01_01 " );	// It's ready. Here, you can take it.
	B_GiveInvItems(self,other,ITPO_BREATH_OF_DEATH,1);
	AI_Output(other,self,"DIA_Xardas_RobaUp_Potion_Done_01_02");	//.
};

instances of DIA_Xardas_RobaUp_NoRitual (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_NoRitual_condition;
	information = DIA_Xardas_RobaUp_NoRitual_info;
	permanent = FALSE;
	description = " I have a little problem. " ;
};

func int DIA_Xardas_RobaUp_NoRitual_condition()
{
	if (( BelieveFailedRobe ==  TRUE ) && ( BelieveDoneRobe ==  FALSE ))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_NoRitual_info()
{
	AI_Output(other,self, " DIA_Xardas_RobaUp_NoRitual_00_01 " );	// I have a little problem.
	AI_Output(self,other, " DIA_Xardas_RobaUp_NoRitual_00_02 " );	// (curiously) What else is this?
	AI_Output(other,self, " DIA_Xardas_RobaUp_NoRitual_00_03 " );	// Beliar didn't want to bless my robe. What should I do?
	AI_Output(self,other, " DIA_Xardas_RobaUp_NoRitual_00_04 " );	// No wonder! It means that by your deeds you have not yet earned his favor.
	AI_Output(self,other, " DIA_Xardas_RobaUp_NoRitual_00_05 " );	// You can use his gifts only if the Dark God has full confidence in you as a faithful servant.
	AI_Output(self,other, " DIA_Xardas_RobaUp_NoRitual_00_06 " );	// Yes, and one more thing: if you bring a stone with the soul of a special creature, the effect will be much more interesting.
};

DIA_Xardas_Mechi (C_Info) instances
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Mechi_condition;
	information = DIA_Xardas_Mechi_info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Xardas_Mechi_condition()
{
	if(hero.guild != GIL_NONE)
	{
		return TRUE;
	};
};

func void DIA_Xardas_Mechi_info()
{
	AI_Output(self,other, " DIA_Xardas_Mechi_00_01 " );	// Wait, I have one request for you.
	AI_Output(self,other, " DIA_Xardas_Mechi_00_02 " );	// You've dealt with a cursed weapon before, haven't you?
	AI_Output(other,self, " DIA_Xardas_Mechi_00_03 " );	// Maybe, I don't remember exactly.
	AI_Output(self,other, " DIA_Xardas_Mechi_00_04 " );	// I want to warn you right away - this weapon is very dangerous for people! So don't even think about using it.
	AI_Output(other,self, " DIA_Xardas_Mechi_00_05 " );	// But why?
	AI_Output(self,other, " DIA_Xardas_Mechi_00_06 " );	// Only the powerful undead wear it, and their magic can sometimes drive anyone crazy.
	AI_Output(self,other, " DIA_Xardas_Mechi_00_07 " );	// Even someone as strong as you!
	AI_Output(self,other, " DIA_Xardas_Mechi_00_08 " );	// (imperiously) That's why I want to ask you to bring me every cursed weapon you can find.
	AI_Output(self,other, " DIA_Xardas_Mechi_00_09 " );	// In my tower, under the protection of my servants, it will no longer harm the ordinary inhabitants of this world.
	AI_Output(self,other, " DIA_Xardas_Mechi_00_10 " );	// Well, your efforts will be well paid. Deal?
	AI_Output(other,self, " DIA_Xardas_Mechi_00_11 " );	// Okay, I'll keep that in mind.
	B_LogEntry(Topic_OutTrader, " Xardas will buy from me all the cursed weapons I bring him. " );
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_BuyWeapons(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 600;
	condition = DIA_Xardas_BuyWeapons_condition;
	information = DIA_Xardas_BuyWeapons_info;
	permanent = TRUE;
	description = " I have a cursed weapon for you. " ;
};

func int DIA_Xardas_BuyWeapons_condition()
{
	if ( Npc_KnowsInfo ( hero , DIA_Xardas_Mechi ))
	{
		if((Npc_HasItems(hero,ItMw_1H_ChelDrak_Left) > 0) || (Npc_HasItems(hero,ItMw_1H_ChelDrak_Right) > 0) || (Npc_HasItems(hero,ItMw_2H_ShadowBlade_Xert) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elair) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST_Ober) > 0) || (Npc_HasItems(hero,ItMw_PlagueStaff) > 0) || (Npc_HasItems(hero,ItMw_SoulKeeperStaff) > 0) || (Npc_HasItems(hero,ITMW_1H_DoomSpeer_Elite) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMAXE) > 0) || (Npc_HasItems(hero,ITMW_2H_HAOSHAND) > 0) || (Npc_HasItems(hero,ITMW_2H_RAVENELITE) > 0) || (Npc_HasItems(hero,ITMW_1H_GHOSTSWORD) > 0) || (Npc_HasItems(hero,ItMw_Doom_OldPiratensaebel) > 0) || (Npc_HasItems(hero,ItAr_Shield_01_Damn) > 0) || (Npc_HasItems(hero,ItAr_Shield_02_Damn) > 0) || (Npc_HasItems(hero,ItAr_Shield_03_Damn) > 0) || (Npc_HasItems(hero,ITMW_1H_DOOMSPEER) > 0) || (Npc_HasItems(hero,ITMW_1H_DOOMSWORD) > 0) || (Npc_HasItems(hero,ITMW_2H_DRACONSWORD_DEAD) > 0) || (Npc_HasItems(hero,ITMW_1H_DOOMSWORD_Elite) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMSWORD) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMSWORD_PreElite) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elite) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST) > 0) || (Npc_HasItems(hero,ItRw_Crossbow_Undead) > 0) || (Npc_HasItems(hero,ItRw_Undead) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMSWORD_Elite) > 0))
		{
			return TRUE;
		};
	};
};

func void DIA_Xardas_BuyWeapons_info()
{
	var int countexp;
	var int goldplus;
	var int goldplus_all;

	goldplus = FALSE ;
	goldplus_all = FALSE;

	AI_Output(other,self, " DIA_Xardas_BuyWeapons_01_00 " );	// I have a cursed weapon for you.
	AI_Output(self,other, " DIA_Xardas_BuyWeapons_01_01 " );	// Great! Give it here.

	if(Npc_HasItems(hero,ItMw_1H_ChelDrak_Left) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_1H_ChelDrak_Left);
		Npc_RemoveInvItems(hero,ItMw_1H_ChelDrak_Left,Npc_HasItems(hero,ItMw_1H_ChelDrak_Left));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_1H_ChelDrak_Right) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_1H_ChelDrak_Right);
		Npc_RemoveInvItems(hero,ItMw_1H_ChelDrak_Right,Npc_HasItems(hero,ItMw_1H_ChelDrak_Right));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_2H_ShadowBlade_Xert) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_2H_ShadowBlade_Xert);
		Npc_RemoveInvItems(hero,ItMw_2H_ShadowBlade_Xert,Npc_HasItems(hero,ItMw_2H_ShadowBlade_Xert));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elair) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST_Elair);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST_Elair,Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elair));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST_Ober) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST_Ober);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST_Ober,Npc_HasItems(hero,ITMW_SHADOWPRIEST_Ober));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_PlagueStaff) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_PlagueStaff);
		Npc_RemoveInvItems(hero,ItMw_PlagueStaff,Npc_HasItems(hero,ItMw_PlagueStaff));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_SoulKeeperStaff) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_SoulKeeperStaff);
		Npc_RemoveInvItems(hero,ItMw_SoulKeeperStaff,Npc_HasItems(hero,ItMw_SoulKeeperStaff));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ITMW_1H_DoomSpeer_Elite) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DoomSpeer_Elite);
		Npc_RemoveInvItems(hero,ITMW_1H_DoomSpeer_Elite,Npc_HasItems(hero,ITMW_1H_DoomSpeer_Elite));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMAXE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMAXE);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMAXE,Npc_HasItems(hero,ITMW_2H_DOOMAXE));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_HAOSHAND) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_HAOSHAND);
		Npc_RemoveInvItems(hero,ITMW_2H_HAOSHAND,Npc_HasItems(hero,ITMW_2H_HAOSHAND));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_RAVENELITE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_RAVENELITE);
		Npc_RemoveInvItems(hero,ITMW_2H_RAVENELITE,Npc_HasItems(hero,ITMW_2H_RAVENELITE));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_DRACONSWORD_DEAD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DRACONSWORD_DEAD);
		Npc_RemoveInvItems(hero,ITMW_2H_DRACONSWORD_DEAD,Npc_HasItems(hero,ITMW_2H_DRACONSWORD_DEAD));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ItMw_Doom_OldPiratensaebel) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_Doom_OldPiratensaebel);
		Npc_RemoveInvItems(hero,ItMw_Doom_OldPiratensaebel,Npc_HasItems(hero,ItMw_Doom_OldPiratensaebel));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST,Npc_HasItems(hero,ITMW_SHADOWPRIEST));
		goldplus_all = goldplus_all + (goldplus * 40);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elite) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST_Elite);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST_Elite,Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elite));
		goldplus_all = goldplus_all + (goldplus * 40);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMSWORD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMSWORD);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMSWORD,Npc_HasItems(hero,ITMW_2H_DOOMSWORD));
		goldplus_all = goldplus_all + (goldplus * 20);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMSWORD_PREELITE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMSWORD_PREELITE);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMSWORD_PREELITE,Npc_HasItems(hero,ITMW_2H_DOOMSWORD_PREELITE));
		goldplus_all = goldplus_all + (goldplus * 20);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMSWORD_ELITE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMSWORD_ELITE);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMSWORD_ELITE,Npc_HasItems(hero,ITMW_2H_DOOMSWORD_ELITE));
		goldplus_all = goldplus_all + (goldplus * 20);
	};
	if(Npc_HasItems(hero,ITMW_1H_DOOMSWORD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DOOMSWORD);
		Npc_RemoveInvItems(hero,ITMW_1H_DOOMSWORD,Npc_HasItems(hero,ITMW_1H_DOOMSWORD));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_1H_GHOSTSWORD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_GHOSTSWORD);
		Npc_RemoveInvItems(hero,ITMW_1H_GHOSTSWORD,Npc_HasItems(hero,ITMW_1H_GHOSTSWORD));
		goldplus_all = goldplus_all + (goldplus * 30);
	};
	if(Npc_HasItems(hero,ITMW_1H_DOOMSPEER) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DOOMSPEER);
		Npc_RemoveInvItems(hero,ITMW_1H_DOOMSPEER,Npc_HasItems(hero,ITMW_1H_DOOMSPEER));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_1H_DOOMSWORD_Elite) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DOOMSWORD_Elite);
		Npc_RemoveInvItems(hero,ITMW_1H_DOOMSWORD_Elite,Npc_HasItems(hero,ITMW_1H_DOOMSWORD_Elite));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ItRw_Undead) > 0)
	{
		goldplus = Npc_HasItems(other,ItRw_Undead);
		Npc_RemoveInvItems(hero,ItRw_Undead,Npc_HasItems(hero,ItRw_Undead));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ItRw_Crossbow_Undead) > 0)
	{
		goldplus = Npc_HasItems(other,ItRw_Crossbow_Undead);
		Npc_RemoveInvItems(hero,ItRw_Crossbow_Undead,Npc_HasItems(hero,ItRw_Crossbow_Undead));
		goldplus_all = goldplus_all + (goldplus * 15);
	};
	if(Npc_HasItems(hero,ItAr_Shield_01_Damn) > 0)
	{
		goldplus = Npc_HasItems(other,ItAr_Shield_01_Damn);
		Npc_RemoveInvItems(hero,ItAr_Shield_01_Damn,Npc_HasItems(hero,ItAr_Shield_01_Damn));
		goldplus_all = goldplus_all + (goldplus * 15);
	};
	if(Npc_HasItems(hero,ItAr_Shield_02_Damn) > 0)
	{
		goldplus = Npc_HasItems(other,ItAr_Shield_02_Damn);
		Npc_RemoveInvItems(hero,ItAr_Shield_02_Damn,Npc_HasItems(hero,ItAr_Shield_02_Damn));
		goldplus_all = goldplus_all + (goldplus * 15);
	};
	if(Npc_HasItems(hero,ItAr_Shield_03_Damn) > 0)
	{
		goldplus = Npc_HasItems(other,ItAr_Shield_03_Damn);
		Npc_RemoveInvItems(hero,ItAr_Shield_03_Damn,Npc_HasItems(hero,ItAr_Shield_03_Damn));
		goldplus_all = goldplus_all + (goldplus * 15);
	};

	AI_Output(self,other, " DIA_Xardas_BuyWeapons_01_02 " );	// Good! Keep your gold.
	B_GiveInvItems(self,other,ItMi_Gold,goldplus_all);
};

instance DIA_Xardas_SleeperMask(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SleeperMask_condition;
	information = DIA_Xardas_SleeperMask_info;
	permanent = FALSE;
	description = " I have a Sleeper mask with me. " ;
};

func int DIA_Xardas_SleeperMask_condition()
{
	if ( Npc_HasItems ( hero , ITMI_HELMSLEEPER_MY ) >  0 ) ;
	{
		return TRUE;
	};
};

func void DIA_Xardas_SleeperMask_info()
{
	AI_Output(other,self, " DIA_Xardas_SleeperMask_00_01 " );	// I have a Sleeper mask with me.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_02 " );	// Interesting! Where did you get it from?
	AI_Output(other,self, " DIA_Xardas_SleeperMask_00_03 " );	// Inherited from one necromancer from the temple of the orcs.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_04 " );	// Come on, let me take a look at her!
	AI_Output(other,self, " DIA_Xardas_SleeperMask_00_05 " );	// Here, look.
	B_GiveInvItems(other,self,ITMI_HELMSLEEPER_MIS,1);
	Npc_RemoveInvItems(self,ITMI_HELMSLEEPER_MIS,1);
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_06 " );	// Hmmm... (appreciatively) There's dark magic in her! A very evil and powerful item.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_07 " );	// I am sure that her previous owner did not part with him of his own free will.
	AI_Output(other,self, " DIA_Xardas_SleeperMask_00_08 " );	// Of course! But I'm interested in another question - can I use it myself?
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_10 " );	// Well... (thoughtfully) Subordinating this magical artifact to my will seems quite possible to me.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_11 " );	// True, in this case, part of his magic power will go away, and he will no longer be as effective as he is now.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_00_12 " );	// However, even then, you'll need to have a lot of power to wear it!

	if ((hero.guild !=  GIL_KDF ) || (hero.guild !=  GIL_KDW ) || (hero.guild !=  GIL_KDM ) || (hero.guild !=  GIL_GUR ))
	{
		AI_Output(self,other, " DIA_Xardas_SleeperMask_00_04 " );	// And since you're not a mage, I can't imagine how you'd be able to use this artifact.
	};

	Info_ClearChoices(DIA_Xardas_SleeperMask);
	Info_AddChoice(DIA_Xardas_SleeperMask, " Never mind ! Just do it. " ,DIA_Xardas_SleeperMask_DoIt);
	Info_AddChoice(DIA_Xardas_SleeperMask, " Better keep her then. " ,DIA_Xardas_SleeperMask_Leave);
};

func void DIA_Xardas_SleeperMask_DoIt()
{
	AI_Output(other,self, " DIA_Xardas_SleeperMask_DoIt_00_01 " );	// Doesn't matter! Just do it.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_DoIt_00_02 " );	// As you say! Wait a minute...
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_Output(self,other, " DIA_Xardas_SleeperMask_DoIt_00_03 " );	// That's it, now you can use it.
	B_GiveInvItems(self,other,ITMI_HELMSLEEPER,1);
	AI_Output(other,self, " DIA_Xardas_SleeperMask_DoIt_00_04 " );	// Thank you.
	Info_ClearChoices(DIA_Xardas_SleeperMask);
};

func void DIA_Xardas_SleeperMask_Leave()
{
	B_GivePlayerXP(2000);
	AI_Output(other,self, " DIA_Xardas_SleeperMask_Leave_00_01 " );	// Then you'd better keep it to yourself.
	AI_Output(self,other, " DIA_Xardas_SleeperMask_Leave_00_02 " );	// Wise decision...(enough) I'll definitely find a use for it!
	DestroyMask = TRUE;
	Info_ClearChoices(DIA_Xardas_SleeperMask);
};

var int XardasDoMagicRoot;
var int XardasDoMagicRootYes;
var int HardasDoMagicRootDay;

instance DIA_Xardas_Druid(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Druid_condition;
	information = DIA_Xardas_Druid_info;
	permanent = FALSE;
	description = " Do you know anything about druid magic? " ;
};

func int DIA_Xardas_Druid_condition()
{
	if((XarDruid == TRUE) && (RootIsUp == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Druid_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_Druid_00_01 " );	// Do you know anything about druid magic?
	AI_Output(self,other, " DIA_Xardas_Druid_00_02 " );	// Maybe I know. Why is she suddenly interested in you?
	AI_Output(other,self, " DIA_Xardas_Druid_00_03 " );	// I have one problem. Saturas said that the magic of the druids would help me solve it.
	AI_Output(self,other, " DIA_Xardas_Druid_00_04 " );	// What's the point?
	AI_Output(other,self, " DIA_Xardas_Druid_00_05 " );	// I need to bring one dead tree back to life. Just don't ask what and why!
	AI_Output(self,other, " DIA_Xardas_Druid_00_06 " );	// This doesn't bother me much. But your question really interested me.
	AI_Output(self,other, " DIA_Xardas_Druid_00_07 " );	// Wait a minute... so where are my notes...
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_Druid_00_08 " );	// Yep, found it. Yes, this is indeed possible.
	AI_Output(self,other, " DIA_Xardas_Druid_00_09 " );	// A dedicated druid will have no trouble doing this, but for those unfamiliar with their magic...
	AI_Output(self,other, " DIA_Xardas_Druid_00_10 " );	// ...well, it won't be easy. But I can help you with this.
	AI_Output(other,self, " DIA_Xardas_Druid_00_11 " );	// What is required of me?
	AI_Output(self,other, " DIA_Xardas_Druid_00_12 " );	// (strictly) First, your attention. It says in my notes that a certain plant called the Root of Life by the druids has the effect you want!
	AI_Output(other,self, " DIA_Xardas_Druid_00_13 " );	// Root of Life? And where can I look for it?
	AI_Output(self,other, " DIA_Xardas_Druid_00_14 " );	// Don't bother looking. It cannot be found or gardened anywhere, it can only be obtained by an experienced druid!
	AI_Output(other,self, " DIA_Xardas_Druid_00_15 " );	// Can you tell me how to do this?
	AI_Output(self,other, " DIA_Xardas_Druid_00_16 " );	// I don't think so. It took me years to master the secrets of druidic magic. I'm not ready to spend them again to teach you them.
	AI_Output(self,other, " DIA_Xardas_Druid_00_17 " );	// Bring me what I need and I'll make it for you myself.
	AI_Output(other,self, " DIA_Xardas_Druid_00_18 " );	// Well, you can. And what do you need?
	AI_Output(self,other, " DIA_Xardas_Druid_00_19 " );	// Hmmm... (thoughtfully) Wait a minute!
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_Druid_00_20 " );	// Remember: I need royal sorrel, fiery root, which will serve as the basis of the recipe...
	AI_Output(self,other, " DIA_Xardas_Druid_00_21 " );	// ...three leaves of medicinal herb, troll's cherry as a reagent, and...
	AI_Output(self,other, " DIA_Xardas_Druid_00_22 " );	// (thoughtfully) This is going to be the hardest part... I also need a cactus flower!
	AI_Output(other,self, " DIA_Xardas_Druid_00_23 " );	// Cactus flower?
	AI_Output(self,other, " DIA_Xardas_Druid_00_24 " );	// Yes! This plant grows in abundance only in very hot conditions. It will be extremely difficult to find a similar specimen on this island.


	if(Npc_HasItems(hero,ItPl_CactusFlower) > 0)
	{
		AI_Output(other,self, " DIA_Xardas_Druid_00_25 " );	// Don't worry! I already have one of these.
		AI_Output(self,other, " DIA_Xardas_Druid_00_26 " );	// (surprised) Well, if so, then bring me all the other ingredients and I'll make you a Life Root!
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_Druid_00_27 " );	// But anyway, I can't do anything without it.
	};

	AI_Output(other,self,"DIA_Xardas_Druid_00_37");	//.
	B_LogEntry(TOPIC_AdanosCrone, " It looks like there is nothing in the world that Xardas does not know about. He will prepare for me a magical plant - the Root of Life, capable of restoring vitality to a dead tree. To create it, you need: royal sorrel, fire root, troll cherry , three leaves of medicinal grass and a cactus flower. The latter will not be easy to find, since it grows only in very hot places. Something tells me that I could find this plant on a plateau ... " );
	XardasDoMagicRoot = TRUE;
	RootIsUp = TRUE;
};

instance DIA_Xardas_MagicRoot(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_MagicRoot_condition;
	information = DIA_Xardas_MagicRoot_info;
	permanent = TRUE;
	description = " I've brought all the necessary ingredients. " ;
};

func int DIA_Xardas_MagicRoot_condition()
{
	if((XardasDoMagicRoot == TRUE) && (XardasDoMagicRootYes == FALSE) && (Npc_HasItems(hero,ItPl_CactusFlower) > 0) && (Npc_HasItems(hero,ItPl_Mana_Herb_03) > 0) && (Npc_HasItems(hero,ItPl_Health_Herb_01) >= 3) && (Npc_HasItems(hero,ITPL_SUPER_HERB) > 0) && (Npc_HasItems(hero,ItPl_Perm_Herb) > 0))
	{
		return TRUE;
	};
};

func void DIA_Xardas_MagicRoot_info()
{
	AI_Output(other,self, " DIA_Xardas_MagicRoot_00_01 " );	// I've brought all the necessary ingredients.

	if((Xardas_GoesToRitualInnosEye == FALSE) || ((MIS_RitualInnosEyeRepair == LOG_SUCCESS) && (Xardas_GoesToRitualInnosEye == TRUE)))
	{
		B_GivePlayerXP(500);
		AI_Output(self,other, " DIA_Xardas_MagicRoot_00_02 " );	// Great! Give them to me.
		AI_Output(other,self, " DIA_Xardas_MagicRoot_00_03 " );	// Here they are.
		b_giveinvitemsmanythings(other,self);
		Npc_RemoveInvItems(hero,ItPl_CactusFlower,1);
		Npc_RemoveInvItems(hero,ItPl_Mana_Herb_03,1);
		Npc_RemoveInvItems(hero,ItPl_Health_Herb_01,3);
		Npc_RemoveInvItems(hero,ITPL_SUPER_HERB,1);
		Npc_RemoveInvItems(hero,ItPl_Perm_Herb,1);
		AI_Output(self,other, " DIA_Xardas_MagicRoot_00_04 " );	// Now be patient. Exactly one day later, your plant will be ready.
		XardasDoMagicRootDay = Wld_GetDay();
		XardasDoMagicRootYes = TRUE;
		AI_StopProcessInfos(self);
		Npc_ExchangeRoutine(self,"Alchemy");
	}
	else
	{
		AI_Output(self,other, " DIA_Xardas_MagicRoot_00_05 " );	// We'll talk about this later.
		AI_StopProcessInfos(self);
	};
};

instance DIA_Xardas_MagicRoot_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_MagicRoot_Done_condition;
	information = DIA_Xardas_MagicRoot_Done_info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Xardas_MagicRoot_Done_condition()
{
	where int daynow;

	daynow = Wld_GetDay();

	if((XardasDoMagicRootYes == TRUE) && (XardasDoMagicRootDay < daynow))
	{
		return TRUE;
	};
};

func void DIA_Xardas_MagicRoot_Done_info()
{
	AI_Output(self,other, " DIA_Xardas_MagicRoot_Done_00_01 " );	// The Root of Life is done! Here, you can take it.
	B_GiveInvItems(self,other,ItPl_MagicRoot,1);
	AI_Output(other,self,"DIA_Xardas_MagicRoot_Done_00_02");	//.
	B_LogEntry(TOPIC_AdanosCrone, " Xardas made a Life Root for me! Time to return to the plateau. " );
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"Xar");
};

var int XarCanDoSoulPot;
var int XarCanDoSoulPotDay;

instances of DIA_Xardas_SeekerSoul (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SeekerSoul_condition;
	information = DIA_Xardas_SeekerSoul_info;
	permanent = FALSE;
	description = " I have something with me here. " ;
};

func int DIA_Xardas_SeekerSoul_condition()
{
	if(Npc_HasItems(hero,ITMI_SeekerSoul) > 0)
	{
		return TRUE;
	};
};

func void DIA_Xardas_SeekerSoul_info()
{
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_00_01 " );	// I have something with me here.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_02 " );	// (grouchily) Be precise! What you have there?
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_03");	//.
	B_GiveInvItems(other,self,ITMI_SeekerSoul,1);
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_04 " );	// (thoughtfully) It looks like a dark soul crystal. Where did you get it from?
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_00_05 " );	// Inherited from one evil creature. And what is this thing?
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_06 " );	// Well, to put it simply, it's just an ordinary heart.
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_00_07 " );	// It doesn't look very much like a heart.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_08 " );	// There are creatures of flesh and blood, and you have seen their hearts more than once.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_09 " );	// And there are those that are generated by magic. They are not often seen in this world, and they are all extremely dangerous.
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_00_10 " );	// I agree with you on this. And this... heart can be used for something?
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_11 " );	// Good question! Let me think...
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_12 " );	// I had entries that mentioned one rare magic elixir. For its preparation, these crystals were just needed.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_13 " );	// Wait a minute...
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_14 " );	// Aha, here they are!
	B_UseFakeScroll();
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_15 " );	// It says here that ten dark soul crystals are needed to make this elixir.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_16 " );	// However, it is also said that the effect of this potion is extremely unpredictable.
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_00_17 " );	// And what does this mean?
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_18 " );	// As I understand it, it can increase your strength, or it can give you agility. It affects everyone differently.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_00_19 " );	// Anyway, if you bring me the crystals, I'll brew this elixir for you...
	B_GiveInvItems(self,other,ITMI_SeekerSoul,1);
	MIS_SeekerSoul = LOG_Running;
	Log_CreateTopic(TOPIC_SeekerSoul,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_SeekerSoul,LOG_Running);
	B_LogEntry(TOPIC_SeekerSoul, " Xardas told me that dark soul crystals can be used to make a magical elixir. However, he will need at least a dozen of these crystals to do so. " );
};

instance DIA_Xardas_SeekerSoul_Start(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SeekerSoul_Start_condition;
	information = DIA_Xardas_SeekerSoul_Start_info;
	permanent = FALSE;
	description = " I brought dark soul crystals. " ;
};

func int DIA_Xardas_SeekerSoul_Start_condition()
{
	if((MIS_SeekerSoul == LOG_Running) && (Npc_HasItems(hero,ITMI_SeekerSoul) >= 10))
	{
		return TRUE;
	};
};

func void DIA_Xardas_SeekerSoul_Start_info()
{
	B_GivePlayerXP(300);
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_Start_00_01 " );	// I brought the dark soul crystals.
	B_GiveInvItems(other,self,ITMI_SeekerSoul,10);
	Npc_RemoveInvItems(self,ITMI_SeekerSoul,10);
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_Start_00_06 " );	// Good! I need time to cook it.
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_Start_00_07 " );	// Come back in a couple of days. I think by then it will be ready.
	B_LogEntry(TOPIC_SeekerSoul, " I brought the dark soul crystals to Xardas. I can stop by for the elixir in a couple of days. " );
	XarCanDoSoulPot = TRUE;
	XarCanDoSoulPotDay = Wld_GetDay();
};

instance DIA_Xardas_SeekerSoul_End(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SeekerSoul_End_condition;
	information = DIA_Xardas_SeekerSoul_End_info;
	permanent = FALSE;
	description = " How is my elixir doing? " ;
};

func int DIA_Xardas_SeekerSoul_End_condition()
{
	var int DayNow;

	DayNow = Wld_GetDay();

	if((MIS_SeekerSoul == LOG_Running) && (XarCanDoSoulPot == TRUE) && (XarCanDoSoulPotDay <= (DayNow - 2)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_SeekerSoul_End_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_SeekerSoul_End_00_01 " );	// How's my elixir doing?
	AI_Output(self,other, " DIA_Xardas_SeekerSoul_End_00_02 " );	// It's ready. Hold on.
	B_GiveInvItems(self,other,ITPO_SOULPOTION,1);
	MIS_SeekerSoul = LOG_Success;
	Log_SetTopicStatus(TOPIC_SeekerSoul,LOG_Success);
	B_LogEntry(TOPIC_SeekerSoul, " I have the crystal potion. " );
};

instance DIA_Xardas_Pirate_Start(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pirate_Start_condition;
	information = DIA_Xardas_Pirate_Start_info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Xardas_Pirate_Start_condition()
{
	if ((Chapter >=  2 ) && (GregIsBack ==  TRUE ))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pirate_Start_info()
{
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_01 " );	// Good to have you here! I have a little deal for you.
	AI_Output(other,self, " DIA_Xardas_Pirate_Start_00_02 " );	// I'm listening carefully.
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_03 " );	// I learned that before their arrival in Khorinis, the paladins sank a pirate ship.
	AI_Output(other,self, " DIA_Xardas_Pirate_Start_00_04 " );	// Since when do you have an interest in pirates?
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_05 " );	// (grouchily) First, listen to the end, and only then ask a question! So...
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_06 " );	// At one time, before destroying one of the temples of Beliar, the paladins took out a lot of valuable items from there.
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_07 " );	// There was one ring among them. Unsightly in appearance, but possessing great power in the hands of a knowledgeable person!
	AI_Output(other,self, " DIA_Xardas_Pirate_Start_00_08 " );	// And what about the pirates?
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_09 " );	// Listen further... (grouchily) Until now, I have not known anything about the fate of the ring.
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_10 " );	// But recently I found out that this ring was seen on a person in the city!
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_11 " );	// If you believe the rumors, then he just recently appeared in the city, and according to the description looks like a pirate.
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_12 " );	// He has a distinctive feature - an eye patch! So it will be difficult to confuse him with anyone else.
	AI_Output(self,other, " DIA_Xardas_Pirate_Start_00_13 " );	// I want you to find this person and find out about the ring!
	AI_Output(other,self, " DIA_Xardas_Pirate_Start_00_14 " );	// Okay, I'll try.
	MIS_PirateRing = LOG_Running;
	Log_CreateTopic(TOPIC_PirateRing,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_PirateRing,LOG_Running);
	B_LogEntry(TOPIC_PirateRing, " Xardas is looking for a rare ring that the paladins once removed from the temple of Beliar they destroyed. Recently, the old man learned that this ring was seen on a person who, according to the description, resembles a pirate. Its distinguishing feature is an eye patch. Xardas asked me to find this person and find out from him about the ring. " );
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_Pirate_Curse(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pirate_Curse_condition;
	information = DIA_Xardas_Pirate_Curse_info;
	permanent = FALSE;
	description = " There's been a little problem with your ring. " ;
};

func int DIA_Xardas_Pirate_Curse_condition()
{
	if((MIS_PirateRing == LOG_Running) && (GregCurse == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pirate_Curse_info()
{
	B_GivePlayerXP(500);
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_01 " );	// There's a little problem with your ring.
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_02 " );	// Apparently, it carries a curse of great power!
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_03 " );	// And the pirate captain who wears this ring has lost a good part of his crew because of it.
	AI_Output(self,other, " DIA_Xardas_Pirate_Curse_00_04 " );	// This is not a problem. Let him remove it, and the curse will immediately disappear!
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_05 " );	// That's the point, he can't do it! As soon as he tried to remove the ring, it almost sent him to the next world.
	AI_Output(self,other, " DIA_Xardas_Pirate_Curse_00_06 " );	// Hmmm... (thoughtfully) I couldn't imagine that.
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_07 " );	// He offers you a deal: you release him from the curse, and he will give you the ring.
	AI_Output(self,other, " DIA_Xardas_Pirate_Curse_00_08 " );	// Good. I will try to help him, but for this I need to know exactly how it all began.
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_09 " );	// It was like this...(tells Greg's story)...
	AI_Output(self,other, " DIA_Xardas_Pirate_Curse_00_10 " );	// Then everything is clear to me! His curse hangs not only on him, but also on those who remained in that cave.
	AI_Output(self,other, " DIA_Xardas_Pirate_Curse_00_11 " );	// If their cursed souls are appeased, the curse's power will be slightly weakened, allowing him to remove the ring.
	AI_Output(other,self, " DIA_Xardas_Pirate_Curse_00_12 " );	// It is unlikely that he will stick his head in there again. His memories are too fresh!
	AI_Output(self,other, " DIA_Xardas_Pirate_Curse_00_13 " );	// Then YOU do it for him! Kill those damned pirates and give me back this ring.
	XarCurseClear = TRUE;
	; _ _ _ _
};

instance DIA_Xardas_Pirate_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pirate_Done_condition;
	information = DIA_Xardas_Pirate_Done_info;
	permanent = FALSE;
	description = " Hold your ring. " ;
};

func int DIA_Xardas_Pirate_Done_condition()
{
	if((MIS_PirateRing == LOG_Running) && (Npc_HasItems(hero,ItRi_DarkCurse) >= 1))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pirate_Done_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_Pirate_Done_00_01 " );	// Hold your ring.
	B_GiveInvItems(other,self,ItRi_DarkCurse,1);
	Npc_RemoveInvItems(self,ItRi_DarkCurse,1);
	AI_Output(self,other, " DIA_Xardas_Pirate_Done_00_02 " );	// (pretty) It's finally mine. You have no idea how much I've been waiting for this moment!
	AI_Output(other,self, " DIA_Xardas_Pirate_Done_00_03 " );	// What about my reward?
	AI_Output(self,other, " DIA_Xardas_Pirate_Done_00_04 " );	// Don't worry! I have prepared a special gift for you.
	B_GiveInvItems(self,other,ItPo_ElixirSHadow,1);
	AI_Output(other,self, " DIA_Xardas_Pirate_Done_00_05 " );	// Some kind of elixir?
	AI_Output(self,other, " DIA_Xardas_Pirate_Done_00_06 " );	// Not some, but the rarest specimen! So use it wisely.
	AI_Output(other,self, " DIA_Xardas_Pirate_Done_00_07 " );	// Okay, thanks.
	MIS_PirateRing = LOG_Success;
	Log_SetTopicStatus(TOPIC_PirateRing,LOG_Success);
	B_LogEntry(TOPIC_PirateRing, " I gave the ring to Xardas and received the reward he deserved. " );
};

instance DIA_NONE_100_Xardas_WhyHere(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_NONE_100_Xardas_WhyHere_condition;
	information = DIA_NONE_100_Xardas_WhyHere_info;
	permanent = FALSE;
	description = " I need to talk to you. " ;
};

func int DIA_NONE_100_Xardas_WhyHere_condition()
{
	if((Kapitel < 4) && (MIS_TrueDragonMasters == LOG_Running))
	{
		return TRUE;
	};
};

func void DIA_NONE_100_Xardas_WhyHere_info()
{
	B_GivePlayerXP(1000);
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_00 " );	// I need to talk to you.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_01 " );	// What happened?
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_02 " );	// I heard from an orc shaman that dragons don't serve Beliar at all! This is true?
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_03 " );	// (calmly) Let me explain something to you.
 	AI_Output(self,other, " DIA_Xardas_WhyHere_01_04 " );	// Recent events have made it clear to me that the threat does not come from where we thought.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_05 " );	// Only stupid people tend to blame the orcs for all their troubles! In fact, things are somewhat different.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_06 " );	// You've already met the Guardians, haven't you?
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_07 " );	// Met. Just in your tower.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_08 " );	// Then you should know the reasons why they came here.
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_09 " );	// Of course. Keeper Dagoth told me about them.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_10 " );	// And you are not at all embarrassed that the ancient creators turned to you?
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_11 " );	// What's wrong with that? I did kill the Sleeper after all. Or did you forget?
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_12 " );	// Yes, that's right... (thoughtfully) But isn't that too much honor?
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_13 " );	// Sleeper was a strong demon, I don't deny it. But even before you, many heroes sent more terrible creatures to the kingdom of Beliar!
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_14 " );	// What do you mean by that?
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_15 " );	// It seems to me that by doing so they are trying to distract you from your main purpose.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_16 " );	// So that you do not interfere with them, or vice versa, so that you help in the implementation of their plans.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_17 " );	// I thought about this for a long time, but it was the orcs who helped me figure it out to the end!
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_18 " );	// Then what are the Guardians up to?
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_19 " );	// I think they want to destroy this world!
	AI_Output(other,self, " DIA_Xardas_WhyHere_01_20 " );	// Wow! Interesting, why would they?
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_21 " );	// I can't answer this question, because their plans are still a mystery to me.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_22 " );	// But one thing I know for sure: you are far from the last role in all this.
	AI_Output(self,other, " DIA_Xardas_WhyHere_01_23 " );	// And we need to act decisively! We have very little time left.
	B_LogEntry(TOPIC_TrueDragonMasters, " Xardas believes that the Guardians are playing a double game, and that it is from them, and not from the orcs, that the main danger to this world comes. " );
};

instance DIA_NONE_100_Xardas_WhatDo(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_NONE_100_Xardas_WhatDo_condition;
	information = DIA_NONE_100_Xardas_WhatDo_info;
	permanent = FALSE;
	description = " So what do we do then? " ;
};

func int DIA_NONE_100_Xardas_WhatDo_condition()
{
	if((MIS_TrueDragonMasters == LOG_Running) && (Npc_KnowsInfo(hero,DIA_NONE_100_Xardas_WhyHere) == TRUE))
	{
		return TRUE;
	};
};

func void DIA_NONE_100_Xardas_WhatDo_info()
{
	AI_Output(other,self, " DIA_Xardas_WhatDo_01_00 " );	// And what do we do then?
	AI_Output(self,other, " DIA_Xardas_WhatDo_01_01 " );	// We need to deal with the dragons first! At the most decisive moment, they can interfere with us.
	AI_Output(other,self, " DIA_Xardas_WhatDo_01_02 " );	// Aren't dragons in league with orcs?
	AI_Output(self,other, " DIA_Xardas_WhatDo_01_03 " );	// These ancient creatures are born from powerful elemental magic. And the call of the Sleeper only awakened them from their sleep!
	AI_Output(self,other, " DIA_Xardas_WhatDo_01_04 " );	// They are more likely to obey the will of the Guardians than anyone else.
	AI_Output(other,self, " DIA_Xardas_WhatDo_01_05 " );	// But it always seemed to me that dragons serve Beliar!
	AI_Output(self,other, " DIA_Xardas_WhatDo_01_06 " );	// (seriously) No, it's not. Dragons don't serve anyone!
	AI_Output(self,other, " DIA_Xardas_WhatDo_01_07 " );	// They are too powerful to be mere pawns in this endless war of the gods.
	AI_Output(self,other, " DIA_Xardas_WhatDo_01_08 " );	// And only the power of their creators may be able to control them. And their creators are Guardians!
	MIS_TrueDragonMasters = LOG_Success;
	Log_SetTopicStatus(TOPIC_TrueDragonMasters,LOG_Success);
	B_LogEntry(TOPIC_TrueDragonMasters, " Xardas told me to proceed with our plan. I need to slay the dragons in the Mine Valley! " );
};

instance DIA_NONE_100_Xardas_Scare(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_NONE_100_Xardas_Scare_condition;
	information = DIA_NONE_100_Xardas_Scare_info;
	permanent = FALSE;
	description = " Aren't you afraid that the Guardians will hear your words?! " ;
};

func int DIA_NONE_100_Xardas_Scare_condition()
{
	if((MIS_TrueDragonMasters == LOG_Success) && (Npc_GetDistToWP(self,"NW_TROLLAREA_RITUAL_01") > 2000))
	{
		return TRUE;
	};
};

func void DIA_NONE_100_Xardas_Scare_info()
{
	AI_Output(other,self, " DIA_Xardas_Scare_01_00 " );	// Aren't you afraid that the Guardians will hear your words?
	AI_Output(self,other, " DIA_Xardas_Scare_01_01 " );	// (calmly) You're forgetting one thing. It's still my tower.
	AI_Output(self,other, " DIA_Xardas_Scare_01_02 " );	// And, of course, I made sure to feel completely safe here.
	AI_Output(self,other, " DIA_Xardas_Scare_01_03 " );	// So don't worry! No one will ever know about our conversation.
};

instance DIA_Xardas_DarkMageBuySwords(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_DarkMageBuySwords_condition;
	information = DIA_Xardas_DarkMageBuySwords_info;
	permanent = FALSE;
	description = " Could you be interested in this weapon? " ;
};

func int DIA_Xardas_DarkMageBuySwords_condition()
{
	if((Npc_HasItems(hero,ITMW_FAKESWORD_01) >= 1) && (DarkMageBuySwords == TRUE) && (KreolBuyMasiafSwrods == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_DarkMageBuySwords_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_DarkMageBuySwords_01_00 " );	// Would you be interested in this weapon?
	B_GiveInvItems(other,self,ITMW_FAKESWORD_01,1);
	AI_Output(self,other, " DIA_Xardas_DarkMageBuySwords_01_03 " );	// Well, well... Yes, interesting stuff! But I don't need it.
	AI_Output(self,other, " DIA_Xardas_DarkMageBuySwords_01_04 " );	// So you'd better look for someone else who's interested in her.
	B_GiveInvItems(self,other,ITMW_FAKESWORD_01,1);
};

instance DIA_Xardas_OldTeleports(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_OldTeleports_condition;
	information = DIA_Xardas_OldTeleports_info;
	permanent = FALSE;
	description = " What do you know about large runestones? " ;
};

func int DIA_Xardas_OldTeleports_condition()
{
	if(MIS_OldTeleports == LOG_Running)
	{
		return TRUE;
	};
};

func void DIA_Xardas_OldTeleports_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self, " DIA_Xardas_OldTeleports_01_00 " );	// What do you know about large runestones?
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_01 " );	// As far as I know, they were used by the druids who once lived on this island.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_02 " );	// These stones served them as a means of quickly moving around the island, similar to those teleportation platforms that were in the Valley of Mines.
	AI_Output(other,self, " DIA_Xardas_OldTeleports_01_03 " );	// Have you tried to use them yourself?
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_04 " );	// Tried but no luck so far...
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_05 " );	// I guess they require some artifacts from the druids themselves to use them.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_06 " );	// But I still don't know which ones exactly.
	AI_Output(other,self, " DIA_Xardas_OldTeleports_01_07 " );	// It turns out that they are absolutely useless for us?
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_08 " );	// Not really... I managed to figure out the move process itself.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_09 " );	// To do this, I created a magic rune of teleportation that will use the power of these runestones.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_10 " );	// However, the question is how to activate the stones themselves!
	AI_Output(other,self, " DIA_Xardas_OldTeleports_01_11 " );	// If you want, I can search for these artifacts for you.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_12 " );	// Hmmm... Why not? After all, I don't have time to do it myself right now.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_01_13 " );	// So I'll give you my rune, and you find a way to bring these stones to life.
	B_GiveInvItems(self,other,ItRu_GlobalTeleport, 1 );
	AI_Output(other,self, " DIA_Xardas_OldTeleports_01_14 " );	// Okay, I'll try.
	B_LogEntry(TOPIC_OldTeleports, " According to Xardas, these runestones were used by the druids to move around the island. He does not know how to activate the stones themselves, but he was able to create a teleportation rune that can later use their magical power. Now I need to find the druid artifacts, using which it will be possible to make these stones work. " );
	XarSeekDruidArt = TRUE;
};

instance DIA_Xardas_OldTeleports_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_OldTeleports_Done_condition;
	information = DIA_Xardas_OldTeleports_Done_info;
	permanent = FALSE;
	description = " I found a way to activate the runestones. " ;
};

func int DIA_Xardas_OldTeleports_Done_condition()
{
	if((MIS_OldTeleports == LOG_Running) && (ActivateDruidStone == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_OldTeleports_Done_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_OldTeleports_Done_01_00 " );	// I found a way to activate the runestones.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_Done_01_01 " );	// Great! Now, with their help, you will be able to move around the island the way the druids themselves once did.
	AI_Output(self,other, " DIA_Xardas_OldTeleports_Done_01_02 " );	// And keep the rune I gave you. She will still be useful to you.
	MIS_OldTeleports = LOG_Success;
	Log_SetTopicStatus(TOPIC_OldTeleports,LOG_Success);
	B_LogEntry(TOPIC_OldTeleports, " I informed Xardas that I was able to activate the runestones. He advised me to use them later on to move around the island, as the druids themselves once did. " );
};

instance DIA_Xardas_Fregarah (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_Fregarah_condition;
	information = DIA_Xardas_Fregarah_info;
	permanent = FALSE;
	description = " Tell me about the stone giant. " ;
};

func int DIA_Xardas_Fregarah_condition()
{
	if((MIS_XRANFREG == LOG_Running) && (XRANFREGXAR == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Fregarah_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self, " DIA_Xardas_Fregarah_01_00 " );	// Tell me about the stone giant.
	AI_Output(self,other, " DIA_Xardas_Fregarah_01_01 " );	// What?! What are you talking about?
	AI_Output(other,self, " DIA_Xardas_Fregarah_01_02 " );	// About the creature that blocked your path to the temple during the expedition of the Fire Mages to the mountains of Khorinis.
	AI_Output(self,other, " DIA_Xardas_Fregarah_01_03 " );	// Ahhh... That's it! You somehow got to know this story. From whom?
	AI_Output(other,self, " DIA_Xardas_Fregarah_01_04 " );	// I read it in one of the books in the library of the monastery.
	AI_Output(other,self, " DIA_Xardas_Fregarah_01_05 " );	// Pyrocar also confirmed the existence of this golem!
	AI_Output(self,other, " DIA_Xardas_Fregarah_01_06 " );	// Still... (chuckling) He was just as scared then as if a real dragon had appeared in front of his nose now!
	AI_Output(other,self, " DIA_Xardas_Fregarah_01_07 " );	// What do you know about him?
	AI_Output(self,other, " DIA_Xardas_Fregarah_01_08 " );	// Same as you. No more and no less!
	AI_Output(self,other, " DIA_Xardas_Fregarah_01_09 " );	// And anyway, I'm too busy right now to bother myself with some overgrown stone golem.
	AI_Output(self,other, " DIA_Xardas_Fregarah_01_10 " );	// So if you want to know more, look for my notes regarding this creature. Here in the tower.
	AI_StopProcessInfos(self);
	Wld_InsertItem(ItWr_Fregarah,"FP_ITEM_XARDAS_07");
};

instance DIA_Xardas_StonnosHronics (C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_StonnosHronics_condition;
	information = DIA_Xardas_StonnosHronics_info;
	permanent = FALSE;
	description = " I've read your posts. " ;
};

func int DIA_Xardas_StonnosHronics_condition()
{
	if((MIS_XRANFREG == LOG_Running) && (FregarahSekret == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_StonnosHronics_info()
{
	AI_Output(other,self, " DIA_Xardas_StonnosHronics_01_01 " );	// I've read your posts.
	AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_02 " );	// What other records?
	AI_Output(other,self, " DIA_Xardas_StonnosHronics_01_03 " );	// Well, about that stone golem.
	AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_04 " );	// (grouchily) Ah, you're all about that. So what?
	AI_Output(other,self, " DIA_Xardas_StonnosHronics_01_05 " );	// Now I need your advice.
	AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_06 " );	// (chuckling) You won't just leave me alone, will you?
	AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_07 " );	// Well, okay. If you are so interested, I will help you.
	AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_08 " );	// As far as I remember, one of the books describing those events was kept in my old flooded tower. Look for her there.
	AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_09 " );	// It's probably in my old chest. Here is the key to it.
	B_GiveInvItems(self,other,itke_xardasowt,1);
	AI_Output(other,self, " DIA_Xardas_StonnosHronics_01_10 " );	// Thank you.

     if(Npc_HasItems(hero,ItWr_Fregarah) >= 1)
	{
		AI_Output(self,other, " DIA_Xardas_StonnosHronics_01_11 " );	// (grouchily) Give me back my notes! I still need them myself.
	     B_GiveInvItems(other,self,ItWr_Fregarah,1);
		Npc_RemoveInvItems(self,ItWr_Fregarah,1);
	};

	XarGiveFirstTome = TRUE;
};

instance DIA_Xardas_HauntedLighthouse(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_HauntedLighthouse_condition;
	information = DIA_Xardas_HauntedLighthouse_info;
	permanent = FALSE;
	description = " Are you familiar with magical signs? " ;
};

func int DIA_Xardas_HauntedLighthouse_condition()
{
	if((MIS_HauntedLighthouse == LOG_Running) && (FindDamnSigh == TRUE) && (XardasGiveScroll == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_HauntedLighthouse_info()
{
	B_GivePlayerXP(250);
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_01_01 " );	// Are you good at magical signs?
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_01_02 " );	// What are the questions? I am a mage. Naturally, I understand them.
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_01_03 " );	// Then help me understand what one of them means.
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_01_04 " );	// Tell me what he looked like.
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_01_05 " );	// Well, like... like a pentagram inside a pentagonal figure.
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_01_06 " );	// It's a curse mark! And quite ancient... Where did you find it?
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_01_07 " );	// At the old lighthouse near Khorinis.
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_01_08 " );	// Clear. But to understand where he came from, I need to know what really happened there.
	B_LogEntry(TOPIC_HauntedLighthouse, " I told Xardas about the magic sign I found at the lighthouse. According to him, this is a sign of a curse. But to find out the reason for the sign, we need to understand what exactly happened there. " );

	if((MIS_HauntedLighthouse == LOG_Running) && (FindOldSkeleton == TRUE) && (FindOldRing == TRUE) && (KnowStefan == TRUE))
	{
		Info_ClearChoices(DIA_Xardas_HauntedLighthouse);
		Info_AddChoice(DIA_Xardas_HauntedLighthouse, " I know what happened at the lighthouse. " ,DIA_Xardas_HauntedLighthouse_FindSkel);
	}
	else
	{
		XarKnowHLH = TRUE;
		AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_01_09 " );	// I'll try to figure it out.
	};
};

instance DIA_Xardas_HauntedLighthouse_Again(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_HauntedLighthouse_Again_condition;
	information = DIA_Xardas_HauntedLighthouse_Again_info;
	permanent = TRUE;
	description = " About that sign... " ;
};

func int DIA_Xardas_HauntedLighthouse_Again_condition()
{
	if((MIS_HauntedLighthouse == LOG_Running) && (FindDamnSigh == TRUE) && (XarKnowHLH == TRUE) && (XardasGiveScroll == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_HauntedLighthouse_Again_info()
{
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_Again_01_01 " );	// Regarding that sign...
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_Again_01_02 " );	// Yes? Have you managed to find out anything?

	if((MIS_HauntedLighthouse == LOG_Running) && (FindOldSkeleton == TRUE) && (FindOldRing == TRUE) && (KnowStefan == TRUE))
	{
		Info_ClearChoices(DIA_Xardas_HauntedLighthouse_Again);
		Info_AddChoice(DIA_Xardas_HauntedLighthouse_Again, " I know what happened at the lighthouse. " ,DIA_Xardas_HauntedLighthouse_FindSkel);
	}
	else
	{
		AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_Again_01_03");	// .
	};
};

func void DIA_Xardas_HauntedLighthouse_FindSkel()
{
	B_GivePlayerXP(150);
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_FindSkel_01_01 " );	// I know what happened at the lighthouse. A few years ago there was a murder.
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_FindSkel_01_02 " );	// Hannah, the innkeeper, told me that...
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_FindSkel_01_03 " );	// I'm not interested in the details! Your words are enough.
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_FindSkel_01_04 " );	// And what do you think about it?
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_FindSkel_01_05 " );	// Such an incident could very well have caused corruption or a curse. Then the appearance of ghosts at the lighthouse is quite understandable.
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_FindSkel_01_06 " );	// How to remove this curse?
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_FindSkel_01_07 " );	// (thoughtfully) It won't be easy. First of all, it is necessary to understand the reason for the murder. And in this you can only be helped by the spirit of that murdered poor fellow.
	AI_Output(other,self, " DIA_Xardas_HauntedLighthouse_FindSkel_01_08 " );	// Can you summon him?
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_FindSkel_01_09 " );	// You can handle it yourself, but I have enough things to do without you.
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_FindSkel_01_10 " );	// Here's a scroll for you. Its power will allow you to summon the spirit of the slain at the place of his death.
	B_GiveInvItems(self,other,ItMi_XardasMagicScroll,1);
	AI_Output(self,other, " DIA_Xardas_HauntedLighthouse_FindSkel_01_11 " );	// Just be careful. Spirits do not like the living. If he talks to you, it can already be considered a great success!
	XardasGiveScroll = TRUE;
	B_LogEntry(TOPIC_HauntedLighthouse, " I told Xardas about what happened at the lighthouse. Now I need to talk to the spirit of the victim in order to understand why he was killed. Xardas gave me a magic scroll to read at the lighthouse near the murder site. " );
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_DealStoryDLH(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_DealStoryDLH_condition;
	information = DIA_Xardas_DealStoryDLH_info;
	permanent = FALSE;
	description = " About the lighthouse... " ;
};

func int DIA_Xardas_DealStoryDLH_condition()
{
	if((MIS_HauntedLighthouse == LOG_Running) && (DealStoryDLH == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_DealStoryDLH_info()
{
	B_GivePlayerXP(250);
	AI_Output(other,self, " DIA_Xardas_DealStoryDLH_01_01 " );	// I used your scroll and summoned the spirit of the slain.
	AI_Output(other,self, " DIA_Xardas_DealStoryDLH_01_02 " );	// He told me everything he knew. And now I have only one question - how to remove the curse itself?
	AI_Output(self,other, " DIA_Xardas_DealStoryDLH_01_03 " );	// It seems to me that only the repentance of the killer himself in the face of his victim will help to remove it.
	AI_Output(self,other, " DIA_Xardas_DealStoryDLH_01_04 " );	// You must find the killer and bring him to the lighthouse, where he will have to ask for forgiveness from the spirit you summoned.
	AI_Output(self,other, " DIA_Xardas_DealStoryDLH_01_05 " );	// If he forgives him, the curse will lose its power.
	AI_Output(other,self, " DIA_Xardas_DealStoryDLH_01_06 " );	// And if not?
	AI_Output(self,other, " DIA_Xardas_DealStoryDLH_01_07 " );	// Then, most likely, he will die.
	CanGoLH = TRUE;
	B_LogEntry(TOPIC_HauntedLighthouse, " According to Xardas, only the killer's repentance in the face of a ghost will remove the curse from the lighthouse. I will have to find the one who killed Stefan and take him to the lighthouse so that he asks for forgiveness from the murdered one. And where to look for him now, after so much years? I'll try to ask around at the port. " );
};

// ------------------------------ Xar's Servants--------------- -------------------------


instance DIA_Xardas_Skeleton_Servant_01_EXIT(C_Info)
{
	npc = Xardas_Skeleton_Servant_01;
	nr = 999;
	condition = DIA_Xardas_Skeleton_Servant_01_EXIT_Condition;
	information = DIA_Xardas_Skeleton_Servant_01_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_Skeleton_Servant_01_EXIT_Condition()
{
	return TRUE;
};

func void DIA_Xardas_Skeleton_Servant_01_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_Skeleton_Servant_01_NO_TALK(C_Info)
{
	npc = Xardas_Skeleton_Servant_01;
	nr = 1;
	condition = DIA_Xardas_Skeleton_Servant_01_NO_TALK_condition;
	information = DIA_Xardas_Skeleton_Servant_01_NO_TALK_info;
	permanent = TRUE;
	important = TRUE;
};


func int DIA_Xardas_Skeleton_Servant_01_NO_TALK_condition()
{
	if(Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Skeleton_Servant_01_NO_TALK_info()
{
	Snd_Play3d(self,"GHOSTCURSE");
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_Skeleton_Servant_02_EXIT(C_Info)
{
	npc = Xardas_Skeleton_Servant_02;
	nr = 999;
	condition = DIA_Xardas_Skeleton_Servant_02_EXIT_Condition;
	information = DIA_Xardas_Skeleton_Servant_02_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_Skeleton_Servant_02_EXIT_Condition()
{
	return TRUE;
};

func void DIA_Xardas_Skeleton_Servant_02_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_Skeleton_Servant_02_NO_TALK(C_Info)
{
	npc = Xardas_Skeleton_Servant_02;
	nr = 1;
	condition = DIA_Xardas_Skeleton_Servant_02_NO_TALK_condition;
	information = DIA_Xardas_Skeleton_Servant_02_NO_TALK_info;
	permanent = TRUE;
	important = TRUE;
};


func int DIA_Xardas_Skeleton_Servant_02_NO_TALK_condition()
{
	if(Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Skeleton_Servant_02_NO_TALK_info()
{
	Snd_Play3d(self,"GHOSTCURSE");
	AI_StopProcessInfos(self);
};

// -----------------------druid------------------------- ---------------------

instance DIA_Fregeal_EXIT(C_Info)
{
	npc = NONE_1192_Fregeal;
	nr = 999;
	condition = DIA_Fregeal_EXIT_Condition;
	information = DIA_Fregeal_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Fregeal_EXIT_Condition()
{
	return TRUE;
};

func void DIA_Fregeal_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_Fregeal_Hello(C_Info)
{
	npc = NONE_1192_Fregeal;
	condition = DIA_Fregeal_Hello_Condition;
	information = DIA_Fregeal_Hello_Info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Fregeal_Hello_Condition()
{
	return TRUE;
};

func void DIA_Fregeal_Hello_Info()
{
	AI_Output(self,other, " DIA_Fregeal_Hello_01_00 " );	// Greetings, traveler. Are you looking for something here, or are you just lost?
	AI_Output(other,self, " DIA_Fregeal_Hello_01_01 " );	// I'm just walking around. What are you doing here?
	AI_Output(self,other, " DIA_Fregeal_Hello_01_02 " );	// I live here.
	AI_Output(other,self, " DIA_Fregeal_Hello_01_03 " );	// Live?! Alone, in the forest?
	AI_Output(self,other, " DIA_Fregeal_Hello_01_04 " );	// Why is this forest so bad for you?
	AI_Output(other,self, " DIA_Fregeal_Hello_01_05 " );	// There are a whole bunch of dangerous creatures here. Not to mention orcs...
	AI_Output(self,other, " DIA_Fregeal_Hello_01_06 " );	// They won't touch me. I pose no threat to them. As are they for me.
	AI_Output(other,self, " DIA_Fregeal_Hello_01_07 " );	// Are you saying that animals don't touch you?
	AI_Output(self,other, " DIA_Fregeal_Hello_01_08 " );	// You grasp everything on the fly.
	AI_Output(other,self, " DIA_Fregeal_Hello_01_09 " );	// What about orcs?
	AI_Output(self,other, " DIA_Fregeal_Hello_01_10 " );	// I haven't seen them here yet. But I doubt that they dare to attack me.
	AI_Output(other,self, " DIA_Fregeal_Hello_01_11 " );	// Orc is a pretty strong opponent.
	AI_Output(self,other, " DIA_Fregeal_Hello_01_12 " );	// Yes. But my forest brothers will protect me if necessary.
	AI_Output(self,other, " DIA_Fregeal_Hello_01_13 " );	// So don't worry about me.
};

instance DIA_Fregeal_WhatName(C_Info)
{
	npc = NONE_1192_Fregeal;
	condition = DIA_Fregeal_WhatName_Condition;
	information = DIA_Fregeal_WhatName_Info;
	permanent = FALSE;
	description = " What's your name? " ;
};

func int DIA_Fregeal_WhatName_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Fregeal_Hello) == TRUE)
	{
		return TRUE;
	};
};

func void DIA_Fregeal_WhatName_Info()
{
	AI_Output(other,self, " DIA_Fregeal_WhatName_01_00 " );	// What's your name?
	AI_Output(self,other, " DIA_Fregeal_WhatName_01_01 " );	// My name is Fregial.
	AI_Output(other,self, " DIA_Fregeal_WhatName_01_02 " );	// Hmmm... Quite an unusual name for a simple herbalist.
	AI_Output(self,other, " DIA_Fregeal_WhatName_01_03 " );	// You know, names are not chosen. My name came to me from my grandfather.
	AI_Output(self,other, " DIA_Fregeal_WhatName_01_04 " );	// I guess he had reason to call me that.
	AI_Output(self,other, " DIA_Fregeal_WhatName_01_05 " );	// But it doesn't matter now. I'm used to it and don't intend to change.
};

var int FregealCanTrade;

instance DIA_Fregeal_WhatDo(C_Info)
{
	npc = NONE_1192_Fregeal;
	condition = DIA_Fregeal_WhatDo_Condition;
	information = DIA_Fregeal_WhatDo_Info;
	permanent = FALSE;
	description = " What are you doing here? " ;
};

func int DIA_Fregeal_WhatDo_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Fregeal_Hello) == TRUE)
	{
		return TRUE;
	};
};

func void DIA_Fregeal_WhatDo_Info()
{
	AI_Output(other,self, " DIA_Fregeal_WhatDo_01_00 " );	// What are you doing here?
	AI_Output(self,other, " DIA_Fregeal_WhatDo_01_01 " );	// I'm a regular herbalist. I collect plants, and then I prepare various drugs and decoctions from them.
	AI_Output(other,self, " DIA_Fregeal_WhatDo_01_02 " );	// What, for example?
	AI_Output(self,other, " DIA_Fregeal_WhatDo_01_03 " );	// Mostly healing, curing various ailments.
	AI_Output(self,other, " DIA_Fregeal_WhatDo_01_04 " );	// If you happen to be sick, I can sell you some of them.
	AI_Output(self,other, " DIA_Fregeal_WhatDo_01_05 " );	// You'll see how quickly they get you back on your feet.
	AI_Output(other,self, " DIA_Fregeal_WhatDo_01_06 " );	// Sounds tempting.
	FregealCanTrade = TRUE;
	Log_CreateTopic(Topic_OutTrader,LOG_NOTE);
	B_LogEntry(Topic_OutTrader, " Fregial the herbalist will be able to sell me various plants and potions. " );
};

instance DIA_Fregeal_Trade(C_Info)
{
	npc = NONE_1192_Fregeal;
	nr = 80;
	condition = DIA_Fregeal_Trade_Condition;
	information = DIA_Fregeal_Trade_Info;
	trade = TRUE;
	permanent = TRUE;
	description = " What can you offer? " ;
};

func int DIA_Fregeal_Trade_Condition()
{
	if((FregealCanTrade == TRUE) && (Wld_IsTime(8,0,23,0) == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Fregeal_Trade_Info()
{
	AI_Output(other,self, " DIA_Addon_Martin_Trade_15_00 " );	// What can you suggest?
	B_GiveTradeInv(self);
};

instance DIA_Fregeal_SwampSecret(C_Info)
{
	npc = NONE_1192_Fregeal;
	nr = 1;
	condition = DIA_Fregeal_SwampSecret_condition;
	information = DIA_Fregeal_SwampSecret_info;
	permanent = FALSE;
	description = " What do you know about a plant called swamp grass? " ;
};

func int DIA_Fregeal_SwampSecret_condition()
{
	if((MIS_SwampSecret == LOG_Running) && (Npc_KnowsInfo(other,DIA_Fregeal_Hello) == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Fregeal_SwampSecret_info()
{
	B_GivePlayerXP(300);
	AI_Output(other,self, " DIA_Fregeal_SwampSecret_01_00 " );	// What do you know about the plant called swamp grass?
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_01 " );	// (thoughtfully) Not very much. Why are you interested in this?
	AI_Output(other,self, " DIA_Fregeal_SwampSecret_01_02 " );	// It seems to me that the effect of its influence on consciousness is extremely unusual for a simple plant.
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_03 " );	// Ahh... So you want to know why smoking swamp grass has such a strong effect on a person's magic power and consciousness?
	AI_Output(other,self, " DIA_Fregeal_SwampSecret_01_04 " );	// That's right.
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_05 " );	// Alas, I can't answer that question for you. However, I have one guess.
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_06 " );	// It seems to me that this plant is generated by elemental magic.
	AI_Output(other,self, " DIA_Fregeal_SwampSecret_01_07 " );	// Elemental magic? What do you mean?
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_08 " );	// Usually the gift of magic is transferred to a person from one of the gods. Innos bestows it on Fire Mages, Adanos on Water Mages, and Beliar on Dark Mages.
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_09 " );	// But there are also much more powerful forces in the world than those to which the gods themselves belong.
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_10 " );	// Perhaps the swamp grass has some of that power. And when a person smokes it, he fills himself with such a small fraction of this power.
	AI_Output(other,self, " DIA_Fregeal_SwampSecret_01_11 " );	// Are you saying that any port drunk who smokes this herb will sooner or later become a powerful magician?
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_12 " );	// Of course not! To begin with, this person must have great fortitude and devote himself to long meditations. A mere ignoramus cannot do this.
	AI_Output(self,other, " DIA_Fregeal_SwampSecret_01_13 " );	// But this is all just my guess. Only by learning more about the element that nourishes this herb with magic, it will be possible to understand whether this is really so.
	B_LogEntry(TOPIC_SwampSecret,"Herbalist Fregial believes that the swamp grass contains a piece of the magical power of the very elements that gave birth to this world. I somehow hardly believe this, but Fregial does not come across as a stoned madman. If he is right, then the only way to learn the secret of swamp grass is to find out which element bestows a particle of its magic on it and how it happens.But where to look for the answer to this question?After all, the elements existed before this world and hardly any of the ordinary people wrote monographs about them. Maybe some ancient artifact that has absorbed the power of the elements can shed light on this mystery.");
};
